(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cf(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var pu={exports:{}},Ti={},gu={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ls=Symbol.for("react.element"),uf=Symbol.for("react.portal"),df=Symbol.for("react.fragment"),hf=Symbol.for("react.strict_mode"),ff=Symbol.for("react.profiler"),mf=Symbol.for("react.provider"),pf=Symbol.for("react.context"),gf=Symbol.for("react.forward_ref"),xf=Symbol.for("react.suspense"),yf=Symbol.for("react.memo"),vf=Symbol.for("react.lazy"),Uo=Symbol.iterator;function wf(e){return e===null||typeof e!="object"?null:(e=Uo&&e[Uo]||e["@@iterator"],typeof e=="function"?e:null)}var xu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yu=Object.assign,vu={};function un(e,t,r){this.props=e,this.context=t,this.refs=vu,this.updater=r||xu}un.prototype.isReactComponent={};un.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};un.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wu(){}wu.prototype=un.prototype;function Ml(e,t,r){this.props=e,this.context=t,this.refs=vu,this.updater=r||xu}var Ll=Ml.prototype=new wu;Ll.constructor=Ml;yu(Ll,un.prototype);Ll.isPureReactComponent=!0;var Bo=Array.isArray,ju=Object.prototype.hasOwnProperty,Fl={current:null},bu={key:!0,ref:!0,__self:!0,__source:!0};function Nu(e,t,r){var n,i={},a=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)ju.call(t,n)&&!bu.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:ls,type:e,key:a,ref:l,props:i,_owner:Fl.current}}function jf(e,t){return{$$typeof:ls,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zl(e){return typeof e=="object"&&e!==null&&e.$$typeof===ls}function bf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Vo=/\/+/g;function Zi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bf(""+e.key):t.toString(36)}function Ms(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case ls:case uf:l=!0}}if(l)return l=e,i=i(l),e=n===""?"."+Zi(l,0):n,Bo(i)?(r="",e!=null&&(r=e.replace(Vo,"$&/")+"/"),Ms(i,t,r,"",function(u){return u})):i!=null&&(zl(i)&&(i=jf(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Vo,"$&/")+"/")+e)),t.push(i)),1;if(l=0,n=n===""?".":n+":",Bo(e))for(var o=0;o<e.length;o++){a=e[o];var c=n+Zi(a,o);l+=Ms(a,t,r,c,i)}else if(c=wf(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=n+Zi(a,o++),l+=Ms(a,t,r,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function ps(e,t,r){if(e==null)return e;var n=[],i=0;return Ms(e,n,"","",function(a){return t.call(r,a,i++)}),n}function Nf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pe={current:null},Ls={transition:null},kf={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:Ls,ReactCurrentOwner:Fl};function ku(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:ps,forEach:function(e,t,r){ps(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ps(e,function(){t++}),t},toArray:function(e){return ps(e,function(t){return t})||[]},only:function(e){if(!zl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};q.Component=un;q.Fragment=df;q.Profiler=ff;q.PureComponent=Ml;q.StrictMode=hf;q.Suspense=xf;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kf;q.act=ku;q.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=yu({},e.props),i=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=Fl.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)ju.call(t,c)&&!bu.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:ls,type:e.type,key:i,ref:a,props:n,_owner:l}};q.createContext=function(e){return e={$$typeof:pf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mf,_context:e},e.Consumer=e};q.createElement=Nu;q.createFactory=function(e){var t=Nu.bind(null,e);return t.type=e,t};q.createRef=function(){return{current:null}};q.forwardRef=function(e){return{$$typeof:gf,render:e}};q.isValidElement=zl;q.lazy=function(e){return{$$typeof:vf,_payload:{_status:-1,_result:e},_init:Nf}};q.memo=function(e,t){return{$$typeof:yf,type:e,compare:t===void 0?null:t}};q.startTransition=function(e){var t=Ls.transition;Ls.transition={};try{e()}finally{Ls.transition=t}};q.unstable_act=ku;q.useCallback=function(e,t){return Pe.current.useCallback(e,t)};q.useContext=function(e){return Pe.current.useContext(e)};q.useDebugValue=function(){};q.useDeferredValue=function(e){return Pe.current.useDeferredValue(e)};q.useEffect=function(e,t){return Pe.current.useEffect(e,t)};q.useId=function(){return Pe.current.useId()};q.useImperativeHandle=function(e,t,r){return Pe.current.useImperativeHandle(e,t,r)};q.useInsertionEffect=function(e,t){return Pe.current.useInsertionEffect(e,t)};q.useLayoutEffect=function(e,t){return Pe.current.useLayoutEffect(e,t)};q.useMemo=function(e,t){return Pe.current.useMemo(e,t)};q.useReducer=function(e,t,r){return Pe.current.useReducer(e,t,r)};q.useRef=function(e){return Pe.current.useRef(e)};q.useState=function(e){return Pe.current.useState(e)};q.useSyncExternalStore=function(e,t,r){return Pe.current.useSyncExternalStore(e,t,r)};q.useTransition=function(){return Pe.current.useTransition()};q.version="18.3.1";gu.exports=q;var P=gu.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f=P,Cf=Symbol.for("react.element"),Sf=Symbol.for("react.fragment"),Ef=Object.prototype.hasOwnProperty,Pf=_f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tf={key:!0,ref:!0,__self:!0,__source:!0};function _u(e,t,r){var n,i={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Ef.call(t,n)&&!Tf.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Cf,type:e,key:a,ref:l,props:i,_owner:Pf.current}}Ti.Fragment=Sf;Ti.jsx=_u;Ti.jsxs=_u;pu.exports=Ti;var s=pu.exports,Cu={exports:{}},Ge={},Su={exports:{}},Eu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,D){var z=A.length;A.push(D);e:for(;0<z;){var Q=z-1>>>1,K=A[Q];if(0<i(K,D))A[Q]=D,A[z]=K,z=Q;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var D=A[0],z=A.pop();if(z!==D){A[0]=z;e:for(var Q=0,K=A.length,ft=K>>>1;Q<ft;){var ze=2*(Q+1)-1,wt=A[ze],I=ze+1,H=A[I];if(0>i(wt,z))I<K&&0>i(H,wt)?(A[Q]=H,A[I]=z,Q=I):(A[Q]=wt,A[ze]=z,Q=ze);else if(I<K&&0>i(H,z))A[Q]=H,A[I]=z,Q=I;else break e}}return D}function i(A,D){var z=A.sortIndex-D.sortIndex;return z!==0?z:A.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],u=[],d=1,f=null,m=3,y=!1,p=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(A){for(var D=r(u);D!==null;){if(D.callback===null)n(u);else if(D.startTime<=A)n(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=r(u)}}function v(A){if(j=!1,g(A),!p)if(r(c)!==null)p=!0,ue(k);else{var D=r(u);D!==null&&Re(v,D.startTime-A)}}function k(A,D){p=!1,j&&(j=!1,x(R),R=-1),y=!0;var z=m;try{for(g(D),f=r(c);f!==null&&(!(f.expirationTime>D)||A&&!le());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,m=f.priorityLevel;var K=Q(f.expirationTime<=D);D=e.unstable_now(),typeof K=="function"?f.callback=K:f===r(c)&&n(c),g(D)}else n(c);f=r(c)}if(f!==null)var ft=!0;else{var ze=r(u);ze!==null&&Re(v,ze.startTime-D),ft=!1}return ft}finally{f=null,m=z,y=!1}}var w=!1,C=null,R=-1,U=5,O=-1;function le(){return!(e.unstable_now()-O<U)}function X(){if(C!==null){var A=e.unstable_now();O=A;var D=!0;try{D=C(!0,A)}finally{D?_():(w=!1,C=null)}}else w=!1}var _;if(typeof h=="function")_=function(){h(X)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,L=T.port2;T.port1.onmessage=X,_=function(){L.postMessage(null)}}else _=function(){N(X,0)};function ue(A){C=A,w||(w=!0,_())}function Re(A,D){R=N(function(){A(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){p||y||(p=!0,ue(k))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(m){case 1:case 2:case 3:var D=3;break;default:D=m}var z=m;m=D;try{return A()}finally{m=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,D){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var z=m;m=A;try{return D()}finally{m=z}},e.unstable_scheduleCallback=function(A,D,z){var Q=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Q+z:Q):z=Q,A){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=z+K,A={id:d++,callback:D,priorityLevel:A,startTime:z,expirationTime:K,sortIndex:-1},z>Q?(A.sortIndex=z,t(u,A),r(c)===null&&A===r(u)&&(j?(x(R),R=-1):j=!0,Re(v,z-Q))):(A.sortIndex=K,t(c,A),p||y||(p=!0,ue(k))),A},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(A){var D=m;return function(){var z=m;m=D;try{return A.apply(this,arguments)}finally{m=z}}}})(Eu);Su.exports=Eu;var Rf=Su.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af=P,He=Rf;function S(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pu=new Set,Vn={};function kr(e,t){tn(e,t),tn(e+"Capture",t)}function tn(e,t){for(Vn[e]=t,e=0;e<t.length;e++)Pu.add(t[e])}var Pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$a=Object.prototype.hasOwnProperty,If=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qo={},Ho={};function $f(e){return $a.call(Ho,e)?!0:$a.call(qo,e)?!1:If.test(e)?Ho[e]=!0:(qo[e]=!0,!1)}function Of(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Df(e,t,r,n){if(t===null||typeof t>"u"||Of(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Te(e,t,r,n,i,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){je[e]=new Te(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];je[t]=new Te(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){je[e]=new Te(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){je[e]=new Te(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){je[e]=new Te(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){je[e]=new Te(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){je[e]=new Te(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){je[e]=new Te(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){je[e]=new Te(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ul=/[\-:]([a-z])/g;function Bl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ul,Bl);je[t]=new Te(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ul,Bl);je[t]=new Te(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ul,Bl);je[t]=new Te(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){je[e]=new Te(e,1,!1,e.toLowerCase(),null,!1,!1)});je.xlinkHref=new Te("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){je[e]=new Te(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vl(e,t,r,n){var i=je.hasOwnProperty(t)?je[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Df(t,r,i,n)&&(r=null),n||i===null?$f(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var It=Af.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gs=Symbol.for("react.element"),$r=Symbol.for("react.portal"),Or=Symbol.for("react.fragment"),ql=Symbol.for("react.strict_mode"),Oa=Symbol.for("react.profiler"),Tu=Symbol.for("react.provider"),Ru=Symbol.for("react.context"),Hl=Symbol.for("react.forward_ref"),Da=Symbol.for("react.suspense"),Ma=Symbol.for("react.suspense_list"),Wl=Symbol.for("react.memo"),Mt=Symbol.for("react.lazy"),Au=Symbol.for("react.offscreen"),Wo=Symbol.iterator;function pn(e){return e===null||typeof e!="object"?null:(e=Wo&&e[Wo]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Object.assign,ea;function _n(e){if(ea===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ea=t&&t[1]||""}return`
`+ea+e}var ta=!1;function ra(e,t){if(!e||ta)return"";ta=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),l=i.length-1,o=a.length-1;1<=l&&0<=o&&i[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==a[o]){var c=`
`+i[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{ta=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?_n(e):""}function Mf(e){switch(e.tag){case 5:return _n(e.type);case 16:return _n("Lazy");case 13:return _n("Suspense");case 19:return _n("SuspenseList");case 0:case 2:case 15:return e=ra(e.type,!1),e;case 11:return e=ra(e.type.render,!1),e;case 1:return e=ra(e.type,!0),e;default:return""}}function La(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Or:return"Fragment";case $r:return"Portal";case Oa:return"Profiler";case ql:return"StrictMode";case Da:return"Suspense";case Ma:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ru:return(e.displayName||"Context")+".Consumer";case Tu:return(e._context.displayName||"Context")+".Provider";case Hl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wl:return t=e.displayName||null,t!==null?t:La(e.type)||"Memo";case Mt:t=e._payload,e=e._init;try{return La(e(t))}catch{}}return null}function Lf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return La(t);case 8:return t===ql?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Iu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ff(e){var t=Iu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xs(e){e._valueTracker||(e._valueTracker=Ff(e))}function $u(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Iu(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Xs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fa(e,t){var r=t.checked;return ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Go(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Zt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ou(e,t){t=t.checked,t!=null&&Vl(e,"checked",t,!1)}function za(e,t){Ou(e,t);var r=Zt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ua(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ua(e,t.type,Zt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ko(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ua(e,t,r){(t!=="number"||Xs(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Cn=Array.isArray;function Kr(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Zt(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ba(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(S(91));return ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jo(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(S(92));if(Cn(r)){if(1<r.length)throw Error(S(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Zt(r)}}function Du(e,t){var r=Zt(t.value),n=Zt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Qo(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Mu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Va(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Mu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ys,Lu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ys=ys||document.createElement("div"),ys.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ys.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Tn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zf=["Webkit","ms","Moz","O"];Object.keys(Tn).forEach(function(e){zf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tn[t]=Tn[e]})});function Fu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Tn.hasOwnProperty(e)&&Tn[e]?(""+t).trim():t+"px"}function zu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Fu(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Uf=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qa(e,t){if(t){if(Uf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(S(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(S(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(S(61))}if(t.style!=null&&typeof t.style!="object")throw Error(S(62))}}function Ha(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wa=null;function Gl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ga=null,Jr=null,Qr=null;function Xo(e){if(e=us(e)){if(typeof Ga!="function")throw Error(S(280));var t=e.stateNode;t&&(t=Oi(t),Ga(e.stateNode,e.type,t))}}function Uu(e){Jr?Qr?Qr.push(e):Qr=[e]:Jr=e}function Bu(){if(Jr){var e=Jr,t=Qr;if(Qr=Jr=null,Xo(e),t)for(e=0;e<t.length;e++)Xo(t[e])}}function Vu(e,t){return e(t)}function qu(){}var na=!1;function Hu(e,t,r){if(na)return e(t,r);na=!0;try{return Vu(e,t,r)}finally{na=!1,(Jr!==null||Qr!==null)&&(qu(),Bu())}}function Hn(e,t){var r=e.stateNode;if(r===null)return null;var n=Oi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(S(231,t,typeof r));return r}var Ka=!1;if(Pt)try{var gn={};Object.defineProperty(gn,"passive",{get:function(){Ka=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch{Ka=!1}function Bf(e,t,r,n,i,a,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Rn=!1,Ys=null,Zs=!1,Ja=null,Vf={onError:function(e){Rn=!0,Ys=e}};function qf(e,t,r,n,i,a,l,o,c){Rn=!1,Ys=null,Bf.apply(Vf,arguments)}function Hf(e,t,r,n,i,a,l,o,c){if(qf.apply(this,arguments),Rn){if(Rn){var u=Ys;Rn=!1,Ys=null}else throw Error(S(198));Zs||(Zs=!0,Ja=u)}}function _r(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Wu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Yo(e){if(_r(e)!==e)throw Error(S(188))}function Wf(e){var t=e.alternate;if(!t){if(t=_r(e),t===null)throw Error(S(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Yo(i),e;if(a===n)return Yo(i),t;a=a.sibling}throw Error(S(188))}if(r.return!==n.return)r=i,n=a;else{for(var l=!1,o=i.child;o;){if(o===r){l=!0,r=i,n=a;break}if(o===n){l=!0,n=i,r=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===r){l=!0,r=a,n=i;break}if(o===n){l=!0,n=a,r=i;break}o=o.sibling}if(!l)throw Error(S(189))}}if(r.alternate!==n)throw Error(S(190))}if(r.tag!==3)throw Error(S(188));return r.stateNode.current===r?e:t}function Gu(e){return e=Wf(e),e!==null?Ku(e):null}function Ku(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ku(e);if(t!==null)return t;e=e.sibling}return null}var Ju=He.unstable_scheduleCallback,Zo=He.unstable_cancelCallback,Gf=He.unstable_shouldYield,Kf=He.unstable_requestPaint,ce=He.unstable_now,Jf=He.unstable_getCurrentPriorityLevel,Kl=He.unstable_ImmediatePriority,Qu=He.unstable_UserBlockingPriority,ei=He.unstable_NormalPriority,Qf=He.unstable_LowPriority,Xu=He.unstable_IdlePriority,Ri=null,xt=null;function Xf(e){if(xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Ri,e,void 0,(e.current.flags&128)===128)}catch{}}var ut=Math.clz32?Math.clz32:em,Yf=Math.log,Zf=Math.LN2;function em(e){return e>>>=0,e===0?32:31-(Yf(e)/Zf|0)|0}var vs=64,ws=4194304;function Sn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ti(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~i;o!==0?n=Sn(o):(a&=l,a!==0&&(n=Sn(a)))}else l=r&~i,l!==0?n=Sn(l):a!==0&&(n=Sn(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ut(t),i=1<<r,n|=e[r],t&=~i;return n}function tm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rm(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-ut(a),o=1<<l,c=i[l];c===-1?(!(o&r)||o&n)&&(i[l]=tm(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function Qa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Yu(){var e=vs;return vs<<=1,!(vs&4194240)&&(vs=64),e}function sa(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function os(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ut(t),e[t]=r}function nm(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ut(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function Jl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ut(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var J=0;function Zu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ed,Ql,td,rd,nd,Xa=!1,js=[],Ht=null,Wt=null,Gt=null,Wn=new Map,Gn=new Map,zt=[],sm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ec(e,t){switch(e){case"focusin":case"focusout":Ht=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":Gt=null;break;case"pointerover":case"pointerout":Wn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gn.delete(t.pointerId)}}function xn(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=us(t),t!==null&&Ql(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function im(e,t,r,n,i){switch(t){case"focusin":return Ht=xn(Ht,e,t,r,n,i),!0;case"dragenter":return Wt=xn(Wt,e,t,r,n,i),!0;case"mouseover":return Gt=xn(Gt,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Wn.set(a,xn(Wn.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Gn.set(a,xn(Gn.get(a)||null,e,t,r,n,i)),!0}return!1}function sd(e){var t=hr(e.target);if(t!==null){var r=_r(t);if(r!==null){if(t=r.tag,t===13){if(t=Wu(r),t!==null){e.blockedOn=t,nd(e.priority,function(){td(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ya(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Wa=n,r.target.dispatchEvent(n),Wa=null}else return t=us(r),t!==null&&Ql(t),e.blockedOn=r,!1;t.shift()}return!0}function tc(e,t,r){Fs(e)&&r.delete(t)}function am(){Xa=!1,Ht!==null&&Fs(Ht)&&(Ht=null),Wt!==null&&Fs(Wt)&&(Wt=null),Gt!==null&&Fs(Gt)&&(Gt=null),Wn.forEach(tc),Gn.forEach(tc)}function yn(e,t){e.blockedOn===t&&(e.blockedOn=null,Xa||(Xa=!0,He.unstable_scheduleCallback(He.unstable_NormalPriority,am)))}function Kn(e){function t(i){return yn(i,e)}if(0<js.length){yn(js[0],e);for(var r=1;r<js.length;r++){var n=js[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ht!==null&&yn(Ht,e),Wt!==null&&yn(Wt,e),Gt!==null&&yn(Gt,e),Wn.forEach(t),Gn.forEach(t),r=0;r<zt.length;r++)n=zt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<zt.length&&(r=zt[0],r.blockedOn===null);)sd(r),r.blockedOn===null&&zt.shift()}var Xr=It.ReactCurrentBatchConfig,ri=!0;function lm(e,t,r,n){var i=J,a=Xr.transition;Xr.transition=null;try{J=1,Xl(e,t,r,n)}finally{J=i,Xr.transition=a}}function om(e,t,r,n){var i=J,a=Xr.transition;Xr.transition=null;try{J=4,Xl(e,t,r,n)}finally{J=i,Xr.transition=a}}function Xl(e,t,r,n){if(ri){var i=Ya(e,t,r,n);if(i===null)ma(e,t,n,ni,r),ec(e,n);else if(im(i,e,t,r,n))n.stopPropagation();else if(ec(e,n),t&4&&-1<sm.indexOf(e)){for(;i!==null;){var a=us(i);if(a!==null&&ed(a),a=Ya(e,t,r,n),a===null&&ma(e,t,n,ni,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else ma(e,t,n,null,r)}}var ni=null;function Ya(e,t,r,n){if(ni=null,e=Gl(n),e=hr(e),e!==null)if(t=_r(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Wu(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ni=e,null}function id(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jf()){case Kl:return 1;case Qu:return 4;case ei:case Qf:return 16;case Xu:return 536870912;default:return 16}default:return 16}}var Vt=null,Yl=null,zs=null;function ad(){if(zs)return zs;var e,t=Yl,r=t.length,n,i="value"in Vt?Vt.value:Vt.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===i[a-n];n++);return zs=i.slice(e,1<n?1-n:void 0)}function Us(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bs(){return!0}function rc(){return!1}function Ke(e){function t(r,n,i,a,l){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?bs:rc,this.isPropagationStopped=rc,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bs)},persist:function(){},isPersistent:bs}),t}var dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zl=Ke(dn),cs=ae({},dn,{view:0,detail:0}),cm=Ke(cs),ia,aa,vn,Ai=ae({},cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vn&&(vn&&e.type==="mousemove"?(ia=e.screenX-vn.screenX,aa=e.screenY-vn.screenY):aa=ia=0,vn=e),ia)},movementY:function(e){return"movementY"in e?e.movementY:aa}}),nc=Ke(Ai),um=ae({},Ai,{dataTransfer:0}),dm=Ke(um),hm=ae({},cs,{relatedTarget:0}),la=Ke(hm),fm=ae({},dn,{animationName:0,elapsedTime:0,pseudoElement:0}),mm=Ke(fm),pm=ae({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gm=Ke(pm),xm=ae({},dn,{data:0}),sc=Ke(xm),ym={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wm[e])?!!t[e]:!1}function eo(){return jm}var bm=ae({},cs,{key:function(e){if(e.key){var t=ym[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Us(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eo,charCode:function(e){return e.type==="keypress"?Us(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Us(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nm=Ke(bm),km=ae({},Ai,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ic=Ke(km),_m=ae({},cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eo}),Cm=Ke(_m),Sm=ae({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Em=Ke(Sm),Pm=ae({},Ai,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tm=Ke(Pm),Rm=[9,13,27,32],to=Pt&&"CompositionEvent"in window,An=null;Pt&&"documentMode"in document&&(An=document.documentMode);var Am=Pt&&"TextEvent"in window&&!An,ld=Pt&&(!to||An&&8<An&&11>=An),ac=" ",lc=!1;function od(e,t){switch(e){case"keyup":return Rm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dr=!1;function Im(e,t){switch(e){case"compositionend":return cd(t);case"keypress":return t.which!==32?null:(lc=!0,ac);case"textInput":return e=t.data,e===ac&&lc?null:e;default:return null}}function $m(e,t){if(Dr)return e==="compositionend"||!to&&od(e,t)?(e=ad(),zs=Yl=Vt=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ld&&t.locale!=="ko"?null:t.data;default:return null}}var Om={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Om[e.type]:t==="textarea"}function ud(e,t,r,n){Uu(n),t=si(t,"onChange"),0<t.length&&(r=new Zl("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var In=null,Jn=null;function Dm(e){jd(e,0)}function Ii(e){var t=Fr(e);if($u(t))return e}function Mm(e,t){if(e==="change")return t}var dd=!1;if(Pt){var oa;if(Pt){var ca="oninput"in document;if(!ca){var cc=document.createElement("div");cc.setAttribute("oninput","return;"),ca=typeof cc.oninput=="function"}oa=ca}else oa=!1;dd=oa&&(!document.documentMode||9<document.documentMode)}function uc(){In&&(In.detachEvent("onpropertychange",hd),Jn=In=null)}function hd(e){if(e.propertyName==="value"&&Ii(Jn)){var t=[];ud(t,Jn,e,Gl(e)),Hu(Dm,t)}}function Lm(e,t,r){e==="focusin"?(uc(),In=t,Jn=r,In.attachEvent("onpropertychange",hd)):e==="focusout"&&uc()}function Fm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ii(Jn)}function zm(e,t){if(e==="click")return Ii(t)}function Um(e,t){if(e==="input"||e==="change")return Ii(t)}function Bm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ht=typeof Object.is=="function"?Object.is:Bm;function Qn(e,t){if(ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!$a.call(t,i)||!ht(e[i],t[i]))return!1}return!0}function dc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hc(e,t){var r=dc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dc(r)}}function fd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function md(){for(var e=window,t=Xs();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Xs(e.document)}return t}function ro(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Vm(e){var t=md(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&fd(r.ownerDocument.documentElement,r)){if(n!==null&&ro(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=hc(r,a);var l=hc(r,n);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qm=Pt&&"documentMode"in document&&11>=document.documentMode,Mr=null,Za=null,$n=null,el=!1;function fc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;el||Mr==null||Mr!==Xs(n)||(n=Mr,"selectionStart"in n&&ro(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),$n&&Qn($n,n)||($n=n,n=si(Za,"onSelect"),0<n.length&&(t=new Zl("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Mr)))}function Ns(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Lr={animationend:Ns("Animation","AnimationEnd"),animationiteration:Ns("Animation","AnimationIteration"),animationstart:Ns("Animation","AnimationStart"),transitionend:Ns("Transition","TransitionEnd")},ua={},pd={};Pt&&(pd=document.createElement("div").style,"AnimationEvent"in window||(delete Lr.animationend.animation,delete Lr.animationiteration.animation,delete Lr.animationstart.animation),"TransitionEvent"in window||delete Lr.transitionend.transition);function $i(e){if(ua[e])return ua[e];if(!Lr[e])return e;var t=Lr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in pd)return ua[e]=t[r];return e}var gd=$i("animationend"),xd=$i("animationiteration"),yd=$i("animationstart"),vd=$i("transitionend"),wd=new Map,mc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(e,t){wd.set(e,t),kr(t,[e])}for(var da=0;da<mc.length;da++){var ha=mc[da],Hm=ha.toLowerCase(),Wm=ha[0].toUpperCase()+ha.slice(1);rr(Hm,"on"+Wm)}rr(gd,"onAnimationEnd");rr(xd,"onAnimationIteration");rr(yd,"onAnimationStart");rr("dblclick","onDoubleClick");rr("focusin","onFocus");rr("focusout","onBlur");rr(vd,"onTransitionEnd");tn("onMouseEnter",["mouseout","mouseover"]);tn("onMouseLeave",["mouseout","mouseover"]);tn("onPointerEnter",["pointerout","pointerover"]);tn("onPointerLeave",["pointerout","pointerover"]);kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var En="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gm=new Set("cancel close invalid load scroll toggle".split(" ").concat(En));function pc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Hf(n,t,void 0,e),e.currentTarget=null}function jd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;pc(i,o,u),a=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;pc(i,o,u),a=c}}}if(Zs)throw e=Ja,Zs=!1,Ja=null,e}function ee(e,t){var r=t[il];r===void 0&&(r=t[il]=new Set);var n=e+"__bubble";r.has(n)||(bd(t,e,2,!1),r.add(n))}function fa(e,t,r){var n=0;t&&(n|=4),bd(r,e,n,t)}var ks="_reactListening"+Math.random().toString(36).slice(2);function Xn(e){if(!e[ks]){e[ks]=!0,Pu.forEach(function(r){r!=="selectionchange"&&(Gm.has(r)||fa(r,!1,e),fa(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ks]||(t[ks]=!0,fa("selectionchange",!1,t))}}function bd(e,t,r,n){switch(id(t)){case 1:var i=lm;break;case 4:i=om;break;default:i=Xl}r=i.bind(null,t,r,e),i=void 0,!Ka||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function ma(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;o!==null;){if(l=hr(o),l===null)return;if(c=l.tag,c===5||c===6){n=a=l;continue e}o=o.parentNode}}n=n.return}Hu(function(){var u=a,d=Gl(r),f=[];e:{var m=wd.get(e);if(m!==void 0){var y=Zl,p=e;switch(e){case"keypress":if(Us(r)===0)break e;case"keydown":case"keyup":y=Nm;break;case"focusin":p="focus",y=la;break;case"focusout":p="blur",y=la;break;case"beforeblur":case"afterblur":y=la;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=dm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Cm;break;case gd:case xd:case yd:y=mm;break;case vd:y=Em;break;case"scroll":y=cm;break;case"wheel":y=Tm;break;case"copy":case"cut":case"paste":y=gm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ic}var j=(t&4)!==0,N=!j&&e==="scroll",x=j?m!==null?m+"Capture":null:m;j=[];for(var h=u,g;h!==null;){g=h;var v=g.stateNode;if(g.tag===5&&v!==null&&(g=v,x!==null&&(v=Hn(h,x),v!=null&&j.push(Yn(h,v,g)))),N)break;h=h.return}0<j.length&&(m=new y(m,p,null,r,d),f.push({event:m,listeners:j}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&r!==Wa&&(p=r.relatedTarget||r.fromElement)&&(hr(p)||p[Tt]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(p=r.relatedTarget||r.toElement,y=u,p=p?hr(p):null,p!==null&&(N=_r(p),p!==N||p.tag!==5&&p.tag!==6)&&(p=null)):(y=null,p=u),y!==p)){if(j=nc,v="onMouseLeave",x="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(j=ic,v="onPointerLeave",x="onPointerEnter",h="pointer"),N=y==null?m:Fr(y),g=p==null?m:Fr(p),m=new j(v,h+"leave",y,r,d),m.target=N,m.relatedTarget=g,v=null,hr(d)===u&&(j=new j(x,h+"enter",p,r,d),j.target=g,j.relatedTarget=N,v=j),N=v,y&&p)t:{for(j=y,x=p,h=0,g=j;g;g=Er(g))h++;for(g=0,v=x;v;v=Er(v))g++;for(;0<h-g;)j=Er(j),h--;for(;0<g-h;)x=Er(x),g--;for(;h--;){if(j===x||x!==null&&j===x.alternate)break t;j=Er(j),x=Er(x)}j=null}else j=null;y!==null&&gc(f,m,y,j,!1),p!==null&&N!==null&&gc(f,N,p,j,!0)}}e:{if(m=u?Fr(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var k=Mm;else if(oc(m))if(dd)k=Um;else{k=Fm;var w=Lm}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=zm);if(k&&(k=k(e,u))){ud(f,k,r,d);break e}w&&w(e,m,u),e==="focusout"&&(w=m._wrapperState)&&w.controlled&&m.type==="number"&&Ua(m,"number",m.value)}switch(w=u?Fr(u):window,e){case"focusin":(oc(w)||w.contentEditable==="true")&&(Mr=w,Za=u,$n=null);break;case"focusout":$n=Za=Mr=null;break;case"mousedown":el=!0;break;case"contextmenu":case"mouseup":case"dragend":el=!1,fc(f,r,d);break;case"selectionchange":if(qm)break;case"keydown":case"keyup":fc(f,r,d)}var C;if(to)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Dr?od(e,r)&&(R="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(ld&&r.locale!=="ko"&&(Dr||R!=="onCompositionStart"?R==="onCompositionEnd"&&Dr&&(C=ad()):(Vt=d,Yl="value"in Vt?Vt.value:Vt.textContent,Dr=!0)),w=si(u,R),0<w.length&&(R=new sc(R,e,null,r,d),f.push({event:R,listeners:w}),C?R.data=C:(C=cd(r),C!==null&&(R.data=C)))),(C=Am?Im(e,r):$m(e,r))&&(u=si(u,"onBeforeInput"),0<u.length&&(d=new sc("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=C))}jd(f,t)})}function Yn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function si(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Hn(e,r),a!=null&&n.unshift(Yn(e,a,i)),a=Hn(e,t),a!=null&&n.push(Yn(e,a,i))),e=e.return}return n}function Er(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gc(e,t,r,n,i){for(var a=t._reactName,l=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=Hn(r,a),c!=null&&l.unshift(Yn(r,c,o))):i||(c=Hn(r,a),c!=null&&l.push(Yn(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var Km=/\r\n?/g,Jm=/\u0000|\uFFFD/g;function xc(e){return(typeof e=="string"?e:""+e).replace(Km,`
`).replace(Jm,"")}function _s(e,t,r){if(t=xc(t),xc(e)!==t&&r)throw Error(S(425))}function ii(){}var tl=null,rl=null;function nl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sl=typeof setTimeout=="function"?setTimeout:void 0,Qm=typeof clearTimeout=="function"?clearTimeout:void 0,yc=typeof Promise=="function"?Promise:void 0,Xm=typeof queueMicrotask=="function"?queueMicrotask:typeof yc<"u"?function(e){return yc.resolve(null).then(e).catch(Ym)}:sl;function Ym(e){setTimeout(function(){throw e})}function pa(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Kn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Kn(t)}function Kt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var hn=Math.random().toString(36).slice(2),gt="__reactFiber$"+hn,Zn="__reactProps$"+hn,Tt="__reactContainer$"+hn,il="__reactEvents$"+hn,Zm="__reactListeners$"+hn,ep="__reactHandles$"+hn;function hr(e){var t=e[gt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Tt]||r[gt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=vc(e);e!==null;){if(r=e[gt])return r;e=vc(e)}return t}e=r,r=e.parentNode}return null}function us(e){return e=e[gt]||e[Tt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(S(33))}function Oi(e){return e[Zn]||null}var al=[],zr=-1;function nr(e){return{current:e}}function te(e){0>zr||(e.current=al[zr],al[zr]=null,zr--)}function Z(e,t){zr++,al[zr]=e.current,e.current=t}var er={},Ce=nr(er),Me=nr(!1),xr=er;function rn(e,t){var r=e.type.contextTypes;if(!r)return er;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Le(e){return e=e.childContextTypes,e!=null}function ai(){te(Me),te(Ce)}function wc(e,t,r){if(Ce.current!==er)throw Error(S(168));Z(Ce,t),Z(Me,r)}function Nd(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(S(108,Lf(e)||"Unknown",i));return ae({},r,n)}function li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||er,xr=Ce.current,Z(Ce,e),Z(Me,Me.current),!0}function jc(e,t,r){var n=e.stateNode;if(!n)throw Error(S(169));r?(e=Nd(e,t,xr),n.__reactInternalMemoizedMergedChildContext=e,te(Me),te(Ce),Z(Ce,e)):te(Me),Z(Me,r)}var _t=null,Di=!1,ga=!1;function kd(e){_t===null?_t=[e]:_t.push(e)}function tp(e){Di=!0,kd(e)}function sr(){if(!ga&&_t!==null){ga=!0;var e=0,t=J;try{var r=_t;for(J=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}_t=null,Di=!1}catch(i){throw _t!==null&&(_t=_t.slice(e+1)),Ju(Kl,sr),i}finally{J=t,ga=!1}}return null}var Ur=[],Br=0,oi=null,ci=0,Je=[],Qe=0,yr=null,Ct=1,St="";function lr(e,t){Ur[Br++]=ci,Ur[Br++]=oi,oi=e,ci=t}function _d(e,t,r){Je[Qe++]=Ct,Je[Qe++]=St,Je[Qe++]=yr,yr=e;var n=Ct;e=St;var i=32-ut(n)-1;n&=~(1<<i),r+=1;var a=32-ut(t)+i;if(30<a){var l=i-i%5;a=(n&(1<<l)-1).toString(32),n>>=l,i-=l,Ct=1<<32-ut(t)+i|r<<i|n,St=a+e}else Ct=1<<a|r<<i|n,St=e}function no(e){e.return!==null&&(lr(e,1),_d(e,1,0))}function so(e){for(;e===oi;)oi=Ur[--Br],Ur[Br]=null,ci=Ur[--Br],Ur[Br]=null;for(;e===yr;)yr=Je[--Qe],Je[Qe]=null,St=Je[--Qe],Je[Qe]=null,Ct=Je[--Qe],Je[Qe]=null}var Ve=null,Be=null,ne=!1,ct=null;function Cd(e,t){var r=Ye(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function bc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ve=e,Be=Kt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ve=e,Be=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=yr!==null?{id:Ct,overflow:St}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ye(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ve=e,Be=null,!0):!1;default:return!1}}function ll(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ol(e){if(ne){var t=Be;if(t){var r=t;if(!bc(e,t)){if(ll(e))throw Error(S(418));t=Kt(r.nextSibling);var n=Ve;t&&bc(e,t)?Cd(n,r):(e.flags=e.flags&-4097|2,ne=!1,Ve=e)}}else{if(ll(e))throw Error(S(418));e.flags=e.flags&-4097|2,ne=!1,Ve=e}}}function Nc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ve=e}function Cs(e){if(e!==Ve)return!1;if(!ne)return Nc(e),ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nl(e.type,e.memoizedProps)),t&&(t=Be)){if(ll(e))throw Sd(),Error(S(418));for(;t;)Cd(e,t),t=Kt(t.nextSibling)}if(Nc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(S(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Be=Kt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Be=null}}else Be=Ve?Kt(e.stateNode.nextSibling):null;return!0}function Sd(){for(var e=Be;e;)e=Kt(e.nextSibling)}function nn(){Be=Ve=null,ne=!1}function io(e){ct===null?ct=[e]:ct.push(e)}var rp=It.ReactCurrentBatchConfig;function wn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(S(309));var n=r.stateNode}if(!n)throw Error(S(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var o=i.refs;l===null?delete o[a]:o[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(S(284));if(!r._owner)throw Error(S(290,e))}return e}function Ss(e,t){throw e=Object.prototype.toString.call(t),Error(S(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kc(e){var t=e._init;return t(e._payload)}function Ed(e){function t(x,h){if(e){var g=x.deletions;g===null?(x.deletions=[h],x.flags|=16):g.push(h)}}function r(x,h){if(!e)return null;for(;h!==null;)t(x,h),h=h.sibling;return null}function n(x,h){for(x=new Map;h!==null;)h.key!==null?x.set(h.key,h):x.set(h.index,h),h=h.sibling;return x}function i(x,h){return x=Yt(x,h),x.index=0,x.sibling=null,x}function a(x,h,g){return x.index=g,e?(g=x.alternate,g!==null?(g=g.index,g<h?(x.flags|=2,h):g):(x.flags|=2,h)):(x.flags|=1048576,h)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,h,g,v){return h===null||h.tag!==6?(h=Na(g,x.mode,v),h.return=x,h):(h=i(h,g),h.return=x,h)}function c(x,h,g,v){var k=g.type;return k===Or?d(x,h,g.props.children,v,g.key):h!==null&&(h.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Mt&&kc(k)===h.type)?(v=i(h,g.props),v.ref=wn(x,h,g),v.return=x,v):(v=Ks(g.type,g.key,g.props,null,x.mode,v),v.ref=wn(x,h,g),v.return=x,v)}function u(x,h,g,v){return h===null||h.tag!==4||h.stateNode.containerInfo!==g.containerInfo||h.stateNode.implementation!==g.implementation?(h=ka(g,x.mode,v),h.return=x,h):(h=i(h,g.children||[]),h.return=x,h)}function d(x,h,g,v,k){return h===null||h.tag!==7?(h=gr(g,x.mode,v,k),h.return=x,h):(h=i(h,g),h.return=x,h)}function f(x,h,g){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Na(""+h,x.mode,g),h.return=x,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case gs:return g=Ks(h.type,h.key,h.props,null,x.mode,g),g.ref=wn(x,null,h),g.return=x,g;case $r:return h=ka(h,x.mode,g),h.return=x,h;case Mt:var v=h._init;return f(x,v(h._payload),g)}if(Cn(h)||pn(h))return h=gr(h,x.mode,g,null),h.return=x,h;Ss(x,h)}return null}function m(x,h,g,v){var k=h!==null?h.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:o(x,h,""+g,v);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case gs:return g.key===k?c(x,h,g,v):null;case $r:return g.key===k?u(x,h,g,v):null;case Mt:return k=g._init,m(x,h,k(g._payload),v)}if(Cn(g)||pn(g))return k!==null?null:d(x,h,g,v,null);Ss(x,g)}return null}function y(x,h,g,v,k){if(typeof v=="string"&&v!==""||typeof v=="number")return x=x.get(g)||null,o(h,x,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case gs:return x=x.get(v.key===null?g:v.key)||null,c(h,x,v,k);case $r:return x=x.get(v.key===null?g:v.key)||null,u(h,x,v,k);case Mt:var w=v._init;return y(x,h,g,w(v._payload),k)}if(Cn(v)||pn(v))return x=x.get(g)||null,d(h,x,v,k,null);Ss(h,v)}return null}function p(x,h,g,v){for(var k=null,w=null,C=h,R=h=0,U=null;C!==null&&R<g.length;R++){C.index>R?(U=C,C=null):U=C.sibling;var O=m(x,C,g[R],v);if(O===null){C===null&&(C=U);break}e&&C&&O.alternate===null&&t(x,C),h=a(O,h,R),w===null?k=O:w.sibling=O,w=O,C=U}if(R===g.length)return r(x,C),ne&&lr(x,R),k;if(C===null){for(;R<g.length;R++)C=f(x,g[R],v),C!==null&&(h=a(C,h,R),w===null?k=C:w.sibling=C,w=C);return ne&&lr(x,R),k}for(C=n(x,C);R<g.length;R++)U=y(C,x,R,g[R],v),U!==null&&(e&&U.alternate!==null&&C.delete(U.key===null?R:U.key),h=a(U,h,R),w===null?k=U:w.sibling=U,w=U);return e&&C.forEach(function(le){return t(x,le)}),ne&&lr(x,R),k}function j(x,h,g,v){var k=pn(g);if(typeof k!="function")throw Error(S(150));if(g=k.call(g),g==null)throw Error(S(151));for(var w=k=null,C=h,R=h=0,U=null,O=g.next();C!==null&&!O.done;R++,O=g.next()){C.index>R?(U=C,C=null):U=C.sibling;var le=m(x,C,O.value,v);if(le===null){C===null&&(C=U);break}e&&C&&le.alternate===null&&t(x,C),h=a(le,h,R),w===null?k=le:w.sibling=le,w=le,C=U}if(O.done)return r(x,C),ne&&lr(x,R),k;if(C===null){for(;!O.done;R++,O=g.next())O=f(x,O.value,v),O!==null&&(h=a(O,h,R),w===null?k=O:w.sibling=O,w=O);return ne&&lr(x,R),k}for(C=n(x,C);!O.done;R++,O=g.next())O=y(C,x,R,O.value,v),O!==null&&(e&&O.alternate!==null&&C.delete(O.key===null?R:O.key),h=a(O,h,R),w===null?k=O:w.sibling=O,w=O);return e&&C.forEach(function(X){return t(x,X)}),ne&&lr(x,R),k}function N(x,h,g,v){if(typeof g=="object"&&g!==null&&g.type===Or&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case gs:e:{for(var k=g.key,w=h;w!==null;){if(w.key===k){if(k=g.type,k===Or){if(w.tag===7){r(x,w.sibling),h=i(w,g.props.children),h.return=x,x=h;break e}}else if(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Mt&&kc(k)===w.type){r(x,w.sibling),h=i(w,g.props),h.ref=wn(x,w,g),h.return=x,x=h;break e}r(x,w);break}else t(x,w);w=w.sibling}g.type===Or?(h=gr(g.props.children,x.mode,v,g.key),h.return=x,x=h):(v=Ks(g.type,g.key,g.props,null,x.mode,v),v.ref=wn(x,h,g),v.return=x,x=v)}return l(x);case $r:e:{for(w=g.key;h!==null;){if(h.key===w)if(h.tag===4&&h.stateNode.containerInfo===g.containerInfo&&h.stateNode.implementation===g.implementation){r(x,h.sibling),h=i(h,g.children||[]),h.return=x,x=h;break e}else{r(x,h);break}else t(x,h);h=h.sibling}h=ka(g,x.mode,v),h.return=x,x=h}return l(x);case Mt:return w=g._init,N(x,h,w(g._payload),v)}if(Cn(g))return p(x,h,g,v);if(pn(g))return j(x,h,g,v);Ss(x,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,h!==null&&h.tag===6?(r(x,h.sibling),h=i(h,g),h.return=x,x=h):(r(x,h),h=Na(g,x.mode,v),h.return=x,x=h),l(x)):r(x,h)}return N}var sn=Ed(!0),Pd=Ed(!1),ui=nr(null),di=null,Vr=null,ao=null;function lo(){ao=Vr=di=null}function oo(e){var t=ui.current;te(ui),e._currentValue=t}function cl(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Yr(e,t){di=e,ao=Vr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(De=!0),e.firstContext=null)}function rt(e){var t=e._currentValue;if(ao!==e)if(e={context:e,memoizedValue:t,next:null},Vr===null){if(di===null)throw Error(S(308));Vr=e,di.dependencies={lanes:0,firstContext:e}}else Vr=Vr.next=e;return t}var fr=null;function co(e){fr===null?fr=[e]:fr.push(e)}function Td(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,co(t)):(r.next=i.next,i.next=r),t.interleaved=r,Rt(e,n)}function Rt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Lt=!1;function uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Et(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Jt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,W&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Rt(e,r)}return i=n.interleaved,i===null?(t.next=t,co(n)):(t.next=i.next,i.next=t),n.interleaved=t,Rt(e,r)}function Bs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Jl(e,r)}}function _c(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=l:a=a.next=l,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function hi(e,t,r,n){var i=e.updateQueue;Lt=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?a=u:l.next=u,l=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==l&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=i.baseState;l=0,d=u=c=null,o=a;do{var m=o.lane,y=o.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,j=o;switch(m=t,y=r,j.tag){case 1:if(p=j.payload,typeof p=="function"){f=p.call(y,f,m);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=j.payload,m=typeof p=="function"?p.call(y,f,m):p,m==null)break e;f=ae({},f,m);break e;case 2:Lt=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[o]:m.push(o))}else y={eventTime:y,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=y,c=f):d=d.next=y,l|=m;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);wr|=l,e.lanes=l,e.memoizedState=f}}function Cc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(S(191,i));i.call(n)}}}var ds={},yt=nr(ds),es=nr(ds),ts=nr(ds);function mr(e){if(e===ds)throw Error(S(174));return e}function ho(e,t){switch(Z(ts,t),Z(es,e),Z(yt,ds),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Va(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Va(t,e)}te(yt),Z(yt,t)}function an(){te(yt),te(es),te(ts)}function Ad(e){mr(ts.current);var t=mr(yt.current),r=Va(t,e.type);t!==r&&(Z(es,e),Z(yt,r))}function fo(e){es.current===e&&(te(yt),te(es))}var se=nr(0);function fi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xa=[];function mo(){for(var e=0;e<xa.length;e++)xa[e]._workInProgressVersionPrimary=null;xa.length=0}var Vs=It.ReactCurrentDispatcher,ya=It.ReactCurrentBatchConfig,vr=0,ie=null,me=null,xe=null,mi=!1,On=!1,rs=0,np=0;function be(){throw Error(S(321))}function po(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ht(e[r],t[r]))return!1;return!0}function go(e,t,r,n,i,a){if(vr=a,ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vs.current=e===null||e.memoizedState===null?lp:op,e=r(n,i),On){a=0;do{if(On=!1,rs=0,25<=a)throw Error(S(301));a+=1,xe=me=null,t.updateQueue=null,Vs.current=cp,e=r(n,i)}while(On)}if(Vs.current=pi,t=me!==null&&me.next!==null,vr=0,xe=me=ie=null,mi=!1,t)throw Error(S(300));return e}function xo(){var e=rs!==0;return rs=0,e}function pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?ie.memoizedState=xe=e:xe=xe.next=e,xe}function nt(){if(me===null){var e=ie.alternate;e=e!==null?e.memoizedState:null}else e=me.next;var t=xe===null?ie.memoizedState:xe.next;if(t!==null)xe=t,me=e;else{if(e===null)throw Error(S(310));me=e,e={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},xe===null?ie.memoizedState=xe=e:xe=xe.next=e}return xe}function ns(e,t){return typeof t=="function"?t(e):t}function va(e){var t=nt(),r=t.queue;if(r===null)throw Error(S(311));r.lastRenderedReducer=e;var n=me,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=l=null,c=null,u=a;do{var d=u.lane;if((vr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,l=n):c=c.next=f,ie.lanes|=d,wr|=d}u=u.next}while(u!==null&&u!==a);c===null?l=n:c.next=o,ht(n,t.memoizedState)||(De=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,ie.lanes|=a,wr|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wa(e){var t=nt(),r=t.queue;if(r===null)throw Error(S(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var l=i=i.next;do a=e(a,l.action),l=l.next;while(l!==i);ht(a,t.memoizedState)||(De=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Id(){}function $d(e,t){var r=ie,n=nt(),i=t(),a=!ht(n.memoizedState,i);if(a&&(n.memoizedState=i,De=!0),n=n.queue,yo(Md.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||xe!==null&&xe.memoizedState.tag&1){if(r.flags|=2048,ss(9,Dd.bind(null,r,n,i,t),void 0,null),ye===null)throw Error(S(349));vr&30||Od(r,t,i)}return i}function Od(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ie.updateQueue,t===null?(t={lastEffect:null,stores:null},ie.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Dd(e,t,r,n){t.value=r,t.getSnapshot=n,Ld(t)&&Fd(e)}function Md(e,t,r){return r(function(){Ld(t)&&Fd(e)})}function Ld(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ht(e,r)}catch{return!0}}function Fd(e){var t=Rt(e,1);t!==null&&dt(t,e,1,-1)}function Sc(e){var t=pt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:e},t.queue=e,e=e.dispatch=ap.bind(null,ie,e),[t.memoizedState,e]}function ss(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ie.updateQueue,t===null?(t={lastEffect:null,stores:null},ie.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function zd(){return nt().memoizedState}function qs(e,t,r,n){var i=pt();ie.flags|=e,i.memoizedState=ss(1|t,r,void 0,n===void 0?null:n)}function Mi(e,t,r,n){var i=nt();n=n===void 0?null:n;var a=void 0;if(me!==null){var l=me.memoizedState;if(a=l.destroy,n!==null&&po(n,l.deps)){i.memoizedState=ss(t,r,a,n);return}}ie.flags|=e,i.memoizedState=ss(1|t,r,a,n)}function Ec(e,t){return qs(8390656,8,e,t)}function yo(e,t){return Mi(2048,8,e,t)}function Ud(e,t){return Mi(4,2,e,t)}function Bd(e,t){return Mi(4,4,e,t)}function Vd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qd(e,t,r){return r=r!=null?r.concat([e]):null,Mi(4,4,Vd.bind(null,t,e),r)}function vo(){}function Hd(e,t){var r=nt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&po(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Wd(e,t){var r=nt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&po(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Gd(e,t,r){return vr&21?(ht(r,t)||(r=Yu(),ie.lanes|=r,wr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,De=!0),e.memoizedState=r)}function sp(e,t){var r=J;J=r!==0&&4>r?r:4,e(!0);var n=ya.transition;ya.transition={};try{e(!1),t()}finally{J=r,ya.transition=n}}function Kd(){return nt().memoizedState}function ip(e,t,r){var n=Xt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Jd(e))Qd(t,r);else if(r=Td(e,t,r,n),r!==null){var i=Ee();dt(r,e,n,i),Xd(r,t,n)}}function ap(e,t,r){var n=Xt(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Jd(e))Qd(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,o=a(l,r);if(i.hasEagerState=!0,i.eagerState=o,ht(o,l)){var c=t.interleaved;c===null?(i.next=i,co(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=Td(e,t,i,n),r!==null&&(i=Ee(),dt(r,e,n,i),Xd(r,t,n))}}function Jd(e){var t=e.alternate;return e===ie||t!==null&&t===ie}function Qd(e,t){On=mi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Xd(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Jl(e,r)}}var pi={readContext:rt,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useInsertionEffect:be,useLayoutEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useMutableSource:be,useSyncExternalStore:be,useId:be,unstable_isNewReconciler:!1},lp={readContext:rt,useCallback:function(e,t){return pt().memoizedState=[e,t===void 0?null:t],e},useContext:rt,useEffect:Ec,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,qs(4194308,4,Vd.bind(null,t,e),r)},useLayoutEffect:function(e,t){return qs(4194308,4,e,t)},useInsertionEffect:function(e,t){return qs(4,2,e,t)},useMemo:function(e,t){var r=pt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=pt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ip.bind(null,ie,e),[n.memoizedState,e]},useRef:function(e){var t=pt();return e={current:e},t.memoizedState=e},useState:Sc,useDebugValue:vo,useDeferredValue:function(e){return pt().memoizedState=e},useTransition:function(){var e=Sc(!1),t=e[0];return e=sp.bind(null,e[1]),pt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ie,i=pt();if(ne){if(r===void 0)throw Error(S(407));r=r()}else{if(r=t(),ye===null)throw Error(S(349));vr&30||Od(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,Ec(Md.bind(null,n,a,e),[e]),n.flags|=2048,ss(9,Dd.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=pt(),t=ye.identifierPrefix;if(ne){var r=St,n=Ct;r=(n&~(1<<32-ut(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=rs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=np++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},op={readContext:rt,useCallback:Hd,useContext:rt,useEffect:yo,useImperativeHandle:qd,useInsertionEffect:Ud,useLayoutEffect:Bd,useMemo:Wd,useReducer:va,useRef:zd,useState:function(){return va(ns)},useDebugValue:vo,useDeferredValue:function(e){var t=nt();return Gd(t,me.memoizedState,e)},useTransition:function(){var e=va(ns)[0],t=nt().memoizedState;return[e,t]},useMutableSource:Id,useSyncExternalStore:$d,useId:Kd,unstable_isNewReconciler:!1},cp={readContext:rt,useCallback:Hd,useContext:rt,useEffect:yo,useImperativeHandle:qd,useInsertionEffect:Ud,useLayoutEffect:Bd,useMemo:Wd,useReducer:wa,useRef:zd,useState:function(){return wa(ns)},useDebugValue:vo,useDeferredValue:function(e){var t=nt();return me===null?t.memoizedState=e:Gd(t,me.memoizedState,e)},useTransition:function(){var e=wa(ns)[0],t=nt().memoizedState;return[e,t]},useMutableSource:Id,useSyncExternalStore:$d,useId:Kd,unstable_isNewReconciler:!1};function at(e,t){if(e&&e.defaultProps){t=ae({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ul(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ae({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Li={isMounted:function(e){return(e=e._reactInternals)?_r(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ee(),i=Xt(e),a=Et(n,i);a.payload=t,r!=null&&(a.callback=r),t=Jt(e,a,i),t!==null&&(dt(t,e,i,n),Bs(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ee(),i=Xt(e),a=Et(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Jt(e,a,i),t!==null&&(dt(t,e,i,n),Bs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ee(),n=Xt(e),i=Et(r,n);i.tag=2,t!=null&&(i.callback=t),t=Jt(e,i,n),t!==null&&(dt(t,e,n,r),Bs(t,e,n))}};function Pc(e,t,r,n,i,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,l):t.prototype&&t.prototype.isPureReactComponent?!Qn(r,n)||!Qn(i,a):!0}function Yd(e,t,r){var n=!1,i=er,a=t.contextType;return typeof a=="object"&&a!==null?a=rt(a):(i=Le(t)?xr:Ce.current,n=t.contextTypes,a=(n=n!=null)?rn(e,i):er),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Li,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Tc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Li.enqueueReplaceState(t,t.state,null)}function dl(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},uo(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=rt(a):(a=Le(t)?xr:Ce.current,i.context=rn(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ul(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Li.enqueueReplaceState(i,i.state,null),hi(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ln(e,t){try{var r="",n=t;do r+=Mf(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function ja(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function hl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var up=typeof WeakMap=="function"?WeakMap:Map;function Zd(e,t,r){r=Et(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){xi||(xi=!0,bl=n),hl(e,t)},r}function eh(e,t,r){r=Et(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){hl(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){hl(e,t),typeof n!="function"&&(Qt===null?Qt=new Set([this]):Qt.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function Rc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new up;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=kp.bind(null,e,t,r),t.then(e,e))}function Ac(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ic(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Et(-1,1),t.tag=2,Jt(r,t,1))),r.lanes|=1),e)}var dp=It.ReactCurrentOwner,De=!1;function Se(e,t,r,n){t.child=e===null?Pd(t,null,r,n):sn(t,e.child,r,n)}function $c(e,t,r,n,i){r=r.render;var a=t.ref;return Yr(t,i),n=go(e,t,r,n,a,i),r=xo(),e!==null&&!De?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,At(e,t,i)):(ne&&r&&no(t),t.flags|=1,Se(e,t,n,i),t.child)}function Oc(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!So(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,th(e,t,a,n,i)):(e=Ks(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var l=a.memoizedProps;if(r=r.compare,r=r!==null?r:Qn,r(l,n)&&e.ref===t.ref)return At(e,t,i)}return t.flags|=1,e=Yt(a,n),e.ref=t.ref,e.return=t,t.child=e}function th(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(Qn(a,n)&&e.ref===t.ref)if(De=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(De=!0);else return t.lanes=e.lanes,At(e,t,i)}return fl(e,t,r,n,i)}function rh(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Z(Hr,Ue),Ue|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Z(Hr,Ue),Ue|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Z(Hr,Ue),Ue|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Z(Hr,Ue),Ue|=n;return Se(e,t,i,r),t.child}function nh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function fl(e,t,r,n,i){var a=Le(r)?xr:Ce.current;return a=rn(t,a),Yr(t,i),r=go(e,t,r,n,a,i),n=xo(),e!==null&&!De?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,At(e,t,i)):(ne&&n&&no(t),t.flags|=1,Se(e,t,r,i),t.child)}function Dc(e,t,r,n,i){if(Le(r)){var a=!0;li(t)}else a=!1;if(Yr(t,i),t.stateNode===null)Hs(e,t),Yd(t,r,n),dl(t,r,n,i),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=rt(u):(u=Le(r)?xr:Ce.current,u=rn(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==u)&&Tc(t,l,n,u),Lt=!1;var m=t.memoizedState;l.state=m,hi(t,n,l,i),c=t.memoizedState,o!==n||m!==c||Me.current||Lt?(typeof d=="function"&&(ul(t,r,d,n),c=t.memoizedState),(o=Lt||Pc(t,r,o,n,m,c,u))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=u,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,Rd(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:at(t.type,o),l.props=u,f=t.pendingProps,m=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=rt(c):(c=Le(r)?xr:Ce.current,c=rn(t,c));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==f||m!==c)&&Tc(t,l,n,c),Lt=!1,m=t.memoizedState,l.state=m,hi(t,n,l,i);var p=t.memoizedState;o!==f||m!==p||Me.current||Lt?(typeof y=="function"&&(ul(t,r,y,n),p=t.memoizedState),(u=Lt||Pc(t,r,u,n,m,p,c)||!1)?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,p,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,p,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),l.props=n,l.state=p,l.context=c,n=u):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return ml(e,t,r,n,a,i)}function ml(e,t,r,n,i,a){nh(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return i&&jc(t,r,!1),At(e,t,a);n=t.stateNode,dp.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=sn(t,e.child,null,a),t.child=sn(t,null,o,a)):Se(e,t,o,a),t.memoizedState=n.state,i&&jc(t,r,!0),t.child}function sh(e){var t=e.stateNode;t.pendingContext?wc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wc(e,t.context,!1),ho(e,t.containerInfo)}function Mc(e,t,r,n,i){return nn(),io(i),t.flags|=256,Se(e,t,r,n),t.child}var pl={dehydrated:null,treeContext:null,retryLane:0};function gl(e){return{baseLanes:e,cachePool:null,transitions:null}}function ih(e,t,r){var n=t.pendingProps,i=se.current,a=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Z(se,i&1),e===null)return ol(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,a?(n=t.mode,a=t.child,l={mode:"hidden",children:l},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Ui(l,n,0,null),e=gr(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=gl(r),t.memoizedState=pl,e):wo(t,l));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return hp(e,t,l,n,o,i,r);if(a){a=n.fallback,l=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Yt(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Yt(o,a):(a=gr(a,l,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,l=e.child.memoizedState,l=l===null?gl(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=pl,n}return a=e.child,e=a.sibling,n=Yt(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function wo(e,t){return t=Ui({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Es(e,t,r,n){return n!==null&&io(n),sn(t,e.child,null,r),e=wo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hp(e,t,r,n,i,a,l){if(r)return t.flags&256?(t.flags&=-257,n=ja(Error(S(422))),Es(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Ui({mode:"visible",children:n.children},i,0,null),a=gr(a,i,l,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&sn(t,e.child,null,l),t.child.memoizedState=gl(l),t.memoizedState=pl,a);if(!(t.mode&1))return Es(e,t,l,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(S(419)),n=ja(a,n,void 0),Es(e,t,l,n)}if(o=(l&e.childLanes)!==0,De||o){if(n=ye,n!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Rt(e,i),dt(n,e,i,-1))}return Co(),n=ja(Error(S(421))),Es(e,t,l,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=_p.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Be=Kt(i.nextSibling),Ve=t,ne=!0,ct=null,e!==null&&(Je[Qe++]=Ct,Je[Qe++]=St,Je[Qe++]=yr,Ct=e.id,St=e.overflow,yr=t),t=wo(t,n.children),t.flags|=4096,t)}function Lc(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),cl(e.return,t,r)}function ba(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function ah(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(Se(e,t,n.children,r),n=se.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lc(e,r,t);else if(e.tag===19)Lc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Z(se,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&fi(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),ba(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&fi(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}ba(t,!0,r,null,a);break;case"together":ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function At(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),wr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(S(153));if(t.child!==null){for(e=t.child,r=Yt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Yt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function fp(e,t,r){switch(t.tag){case 3:sh(t),nn();break;case 5:Ad(t);break;case 1:Le(t.type)&&li(t);break;case 4:ho(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Z(ui,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Z(se,se.current&1),t.flags|=128,null):r&t.child.childLanes?ih(e,t,r):(Z(se,se.current&1),e=At(e,t,r),e!==null?e.sibling:null);Z(se,se.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return ah(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Z(se,se.current),n)break;return null;case 22:case 23:return t.lanes=0,rh(e,t,r)}return At(e,t,r)}var lh,xl,oh,ch;lh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xl=function(){};oh=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,mr(yt.current);var a=null;switch(r){case"input":i=Fa(e,i),n=Fa(e,n),a=[];break;case"select":i=ae({},i,{value:void 0}),n=ae({},n,{value:void 0}),a=[];break;case"textarea":i=Ba(e,i),n=Ba(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ii)}qa(r,n);var l;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Vn.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Vn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ee("scroll",e),a||o===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};ch=function(e,t,r,n){r!==n&&(t.flags|=4)};function jn(e,t){if(!ne)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ne(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function mp(e,t,r){var n=t.pendingProps;switch(so(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(t),null;case 1:return Le(t.type)&&ai(),Ne(t),null;case 3:return n=t.stateNode,an(),te(Me),te(Ce),mo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Cs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ct!==null&&(_l(ct),ct=null))),xl(e,t),Ne(t),null;case 5:fo(t);var i=mr(ts.current);if(r=t.type,e!==null&&t.stateNode!=null)oh(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(S(166));return Ne(t),null}if(e=mr(yt.current),Cs(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[gt]=t,n[Zn]=a,e=(t.mode&1)!==0,r){case"dialog":ee("cancel",n),ee("close",n);break;case"iframe":case"object":case"embed":ee("load",n);break;case"video":case"audio":for(i=0;i<En.length;i++)ee(En[i],n);break;case"source":ee("error",n);break;case"img":case"image":case"link":ee("error",n),ee("load",n);break;case"details":ee("toggle",n);break;case"input":Go(n,a),ee("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},ee("invalid",n);break;case"textarea":Jo(n,a),ee("invalid",n)}qa(r,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&_s(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&_s(n.textContent,o,e),i=["children",""+o]):Vn.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ee("scroll",n)}switch(r){case"input":xs(n),Ko(n,a,!0);break;case"textarea":xs(n),Qo(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=ii)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Mu(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[gt]=t,e[Zn]=n,lh(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ha(r,n),r){case"dialog":ee("cancel",e),ee("close",e),i=n;break;case"iframe":case"object":case"embed":ee("load",e),i=n;break;case"video":case"audio":for(i=0;i<En.length;i++)ee(En[i],e);i=n;break;case"source":ee("error",e),i=n;break;case"img":case"image":case"link":ee("error",e),ee("load",e),i=n;break;case"details":ee("toggle",e),i=n;break;case"input":Go(e,n),i=Fa(e,n),ee("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=ae({},n,{value:void 0}),ee("invalid",e);break;case"textarea":Jo(e,n),i=Ba(e,n),ee("invalid",e);break;default:i=n}qa(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?zu(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Lu(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&qn(e,c):typeof c=="number"&&qn(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Vn.hasOwnProperty(a)?c!=null&&a==="onScroll"&&ee("scroll",e):c!=null&&Vl(e,a,c,l))}switch(r){case"input":xs(e),Ko(e,n,!1);break;case"textarea":xs(e),Qo(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Zt(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Kr(e,!!n.multiple,a,!1):n.defaultValue!=null&&Kr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ii)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ne(t),null;case 6:if(e&&t.stateNode!=null)ch(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(S(166));if(r=mr(ts.current),mr(yt.current),Cs(t)){if(n=t.stateNode,r=t.memoizedProps,n[gt]=t,(a=n.nodeValue!==r)&&(e=Ve,e!==null))switch(e.tag){case 3:_s(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_s(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[gt]=t,t.stateNode=n}return Ne(t),null;case 13:if(te(se),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ne&&Be!==null&&t.mode&1&&!(t.flags&128))Sd(),nn(),t.flags|=98560,a=!1;else if(a=Cs(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(S(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(S(317));a[gt]=t}else nn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ne(t),a=!1}else ct!==null&&(_l(ct),ct=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||se.current&1?pe===0&&(pe=3):Co())),t.updateQueue!==null&&(t.flags|=4),Ne(t),null);case 4:return an(),xl(e,t),e===null&&Xn(t.stateNode.containerInfo),Ne(t),null;case 10:return oo(t.type._context),Ne(t),null;case 17:return Le(t.type)&&ai(),Ne(t),null;case 19:if(te(se),a=t.memoizedState,a===null)return Ne(t),null;if(n=(t.flags&128)!==0,l=a.rendering,l===null)if(n)jn(a,!1);else{if(pe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=fi(e),l!==null){for(t.flags|=128,jn(a,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Z(se,se.current&1|2),t.child}e=e.sibling}a.tail!==null&&ce()>on&&(t.flags|=128,n=!0,jn(a,!1),t.lanes=4194304)}else{if(!n)if(e=fi(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),jn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!ne)return Ne(t),null}else 2*ce()-a.renderingStartTime>on&&r!==1073741824&&(t.flags|=128,n=!0,jn(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(r=a.last,r!==null?r.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ce(),t.sibling=null,r=se.current,Z(se,n?r&1|2:r&1),t):(Ne(t),null);case 22:case 23:return _o(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ue&1073741824&&(Ne(t),t.subtreeFlags&6&&(t.flags|=8192)):Ne(t),null;case 24:return null;case 25:return null}throw Error(S(156,t.tag))}function pp(e,t){switch(so(t),t.tag){case 1:return Le(t.type)&&ai(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return an(),te(Me),te(Ce),mo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return fo(t),null;case 13:if(te(se),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(S(340));nn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return te(se),null;case 4:return an(),null;case 10:return oo(t.type._context),null;case 22:case 23:return _o(),null;case 24:return null;default:return null}}var Ps=!1,_e=!1,gp=typeof WeakSet=="function"?WeakSet:Set,$=null;function qr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){oe(e,t,n)}else r.current=null}function yl(e,t,r){try{r()}catch(n){oe(e,t,n)}}var Fc=!1;function xp(e,t){if(tl=ri,e=md(),ro(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var y;f!==r||i!==0&&f.nodeType!==3||(o=l+i),f!==a||n!==0&&f.nodeType!==3||(c=l+n),f.nodeType===3&&(l+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===e)break t;if(m===r&&++u===i&&(o=l),m===a&&++d===n&&(c=l),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(rl={focusedElem:e,selectionRange:r},ri=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var j=p.memoizedProps,N=p.memoizedState,x=t.stateNode,h=x.getSnapshotBeforeUpdate(t.elementType===t.type?j:at(t.type,j),N);x.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(v){oe(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return p=Fc,Fc=!1,p}function Dn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&yl(t,r,a)}i=i.next}while(i!==n)}}function Fi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function vl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function uh(e){var t=e.alternate;t!==null&&(e.alternate=null,uh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gt],delete t[Zn],delete t[il],delete t[Zm],delete t[ep])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dh(e){return e.tag===5||e.tag===3||e.tag===4}function zc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ii));else if(n!==4&&(e=e.child,e!==null))for(wl(e,t,r),e=e.sibling;e!==null;)wl(e,t,r),e=e.sibling}function jl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(jl(e,t,r),e=e.sibling;e!==null;)jl(e,t,r),e=e.sibling}var ve=null,lt=!1;function Ot(e,t,r){for(r=r.child;r!==null;)hh(e,t,r),r=r.sibling}function hh(e,t,r){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Ri,r)}catch{}switch(r.tag){case 5:_e||qr(r,t);case 6:var n=ve,i=lt;ve=null,Ot(e,t,r),ve=n,lt=i,ve!==null&&(lt?(e=ve,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ve.removeChild(r.stateNode));break;case 18:ve!==null&&(lt?(e=ve,r=r.stateNode,e.nodeType===8?pa(e.parentNode,r):e.nodeType===1&&pa(e,r),Kn(e)):pa(ve,r.stateNode));break;case 4:n=ve,i=lt,ve=r.stateNode.containerInfo,lt=!0,Ot(e,t,r),ve=n,lt=i;break;case 0:case 11:case 14:case 15:if(!_e&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&yl(r,t,l),i=i.next}while(i!==n)}Ot(e,t,r);break;case 1:if(!_e&&(qr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){oe(r,t,o)}Ot(e,t,r);break;case 21:Ot(e,t,r);break;case 22:r.mode&1?(_e=(n=_e)||r.memoizedState!==null,Ot(e,t,r),_e=n):Ot(e,t,r);break;default:Ot(e,t,r)}}function Uc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new gp),t.forEach(function(n){var i=Cp.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function st(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:ve=o.stateNode,lt=!1;break e;case 3:ve=o.stateNode.containerInfo,lt=!0;break e;case 4:ve=o.stateNode.containerInfo,lt=!0;break e}o=o.return}if(ve===null)throw Error(S(160));hh(a,l,i),ve=null,lt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){oe(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fh(t,e),t=t.sibling}function fh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(st(t,e),mt(e),n&4){try{Dn(3,e,e.return),Fi(3,e)}catch(j){oe(e,e.return,j)}try{Dn(5,e,e.return)}catch(j){oe(e,e.return,j)}}break;case 1:st(t,e),mt(e),n&512&&r!==null&&qr(r,r.return);break;case 5:if(st(t,e),mt(e),n&512&&r!==null&&qr(r,r.return),e.flags&32){var i=e.stateNode;try{qn(i,"")}catch(j){oe(e,e.return,j)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,l=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Ou(i,a),Ha(o,l);var u=Ha(o,a);for(l=0;l<c.length;l+=2){var d=c[l],f=c[l+1];d==="style"?zu(i,f):d==="dangerouslySetInnerHTML"?Lu(i,f):d==="children"?qn(i,f):Vl(i,d,f,u)}switch(o){case"input":za(i,a);break;case"textarea":Du(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?Kr(i,!!a.multiple,y,!1):m!==!!a.multiple&&(a.defaultValue!=null?Kr(i,!!a.multiple,a.defaultValue,!0):Kr(i,!!a.multiple,a.multiple?[]:"",!1))}i[Zn]=a}catch(j){oe(e,e.return,j)}}break;case 6:if(st(t,e),mt(e),n&4){if(e.stateNode===null)throw Error(S(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(j){oe(e,e.return,j)}}break;case 3:if(st(t,e),mt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Kn(t.containerInfo)}catch(j){oe(e,e.return,j)}break;case 4:st(t,e),mt(e);break;case 13:st(t,e),mt(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(No=ce())),n&4&&Uc(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(_e=(u=_e)||d,st(t,e),_e=u):st(t,e),mt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for($=e,d=e.child;d!==null;){for(f=$=d;$!==null;){switch(m=$,y=m.child,m.tag){case 0:case 11:case 14:case 15:Dn(4,m,m.return);break;case 1:qr(m,m.return);var p=m.stateNode;if(typeof p.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(j){oe(n,r,j)}}break;case 5:qr(m,m.return);break;case 22:if(m.memoizedState!==null){Vc(f);continue}}y!==null?(y.return=m,$=y):Vc(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,c=f.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Fu("display",l))}catch(j){oe(e,e.return,j)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(j){oe(e,e.return,j)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:st(t,e),mt(e),n&4&&Uc(e);break;case 21:break;default:st(t,e),mt(e)}}function mt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(dh(r)){var n=r;break e}r=r.return}throw Error(S(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(qn(i,""),n.flags&=-33);var a=zc(e);jl(e,a,i);break;case 3:case 4:var l=n.stateNode.containerInfo,o=zc(e);wl(e,o,l);break;default:throw Error(S(161))}}catch(c){oe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yp(e,t,r){$=e,mh(e)}function mh(e,t,r){for(var n=(e.mode&1)!==0;$!==null;){var i=$,a=i.child;if(i.tag===22&&n){var l=i.memoizedState!==null||Ps;if(!l){var o=i.alternate,c=o!==null&&o.memoizedState!==null||_e;o=Ps;var u=_e;if(Ps=l,(_e=c)&&!u)for($=i;$!==null;)l=$,c=l.child,l.tag===22&&l.memoizedState!==null?qc(i):c!==null?(c.return=l,$=c):qc(i);for(;a!==null;)$=a,mh(a),a=a.sibling;$=i,Ps=o,_e=u}Bc(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,$=a):Bc(e)}}function Bc(e){for(;$!==null;){var t=$;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_e||Fi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!_e)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:at(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Cc(t,a,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Cc(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Kn(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}_e||t.flags&512&&vl(t)}catch(m){oe(t,t.return,m)}}if(t===e){$=null;break}if(r=t.sibling,r!==null){r.return=t.return,$=r;break}$=t.return}}function Vc(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var r=t.sibling;if(r!==null){r.return=t.return,$=r;break}$=t.return}}function qc(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Fi(4,t)}catch(c){oe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){oe(t,i,c)}}var a=t.return;try{vl(t)}catch(c){oe(t,a,c)}break;case 5:var l=t.return;try{vl(t)}catch(c){oe(t,l,c)}}}catch(c){oe(t,t.return,c)}if(t===e){$=null;break}var o=t.sibling;if(o!==null){o.return=t.return,$=o;break}$=t.return}}var vp=Math.ceil,gi=It.ReactCurrentDispatcher,jo=It.ReactCurrentOwner,Ze=It.ReactCurrentBatchConfig,W=0,ye=null,de=null,we=0,Ue=0,Hr=nr(0),pe=0,is=null,wr=0,zi=0,bo=0,Mn=null,$e=null,No=0,on=1/0,Nt=null,xi=!1,bl=null,Qt=null,Ts=!1,qt=null,yi=0,Ln=0,Nl=null,Ws=-1,Gs=0;function Ee(){return W&6?ce():Ws!==-1?Ws:Ws=ce()}function Xt(e){return e.mode&1?W&2&&we!==0?we&-we:rp.transition!==null?(Gs===0&&(Gs=Yu()),Gs):(e=J,e!==0||(e=window.event,e=e===void 0?16:id(e.type)),e):1}function dt(e,t,r,n){if(50<Ln)throw Ln=0,Nl=null,Error(S(185));os(e,r,n),(!(W&2)||e!==ye)&&(e===ye&&(!(W&2)&&(zi|=r),pe===4&&Ut(e,we)),Fe(e,n),r===1&&W===0&&!(t.mode&1)&&(on=ce()+500,Di&&sr()))}function Fe(e,t){var r=e.callbackNode;rm(e,t);var n=ti(e,e===ye?we:0);if(n===0)r!==null&&Zo(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Zo(r),t===1)e.tag===0?tp(Hc.bind(null,e)):kd(Hc.bind(null,e)),Xm(function(){!(W&6)&&sr()}),r=null;else{switch(Zu(n)){case 1:r=Kl;break;case 4:r=Qu;break;case 16:r=ei;break;case 536870912:r=Xu;break;default:r=ei}r=bh(r,ph.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ph(e,t){if(Ws=-1,Gs=0,W&6)throw Error(S(327));var r=e.callbackNode;if(Zr()&&e.callbackNode!==r)return null;var n=ti(e,e===ye?we:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=vi(e,n);else{t=n;var i=W;W|=2;var a=xh();(ye!==e||we!==t)&&(Nt=null,on=ce()+500,pr(e,t));do try{bp();break}catch(o){gh(e,o)}while(!0);lo(),gi.current=a,W=i,de!==null?t=0:(ye=null,we=0,t=pe)}if(t!==0){if(t===2&&(i=Qa(e),i!==0&&(n=i,t=kl(e,i))),t===1)throw r=is,pr(e,0),Ut(e,n),Fe(e,ce()),r;if(t===6)Ut(e,n);else{if(i=e.current.alternate,!(n&30)&&!wp(i)&&(t=vi(e,n),t===2&&(a=Qa(e),a!==0&&(n=a,t=kl(e,a))),t===1))throw r=is,pr(e,0),Ut(e,n),Fe(e,ce()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(S(345));case 2:or(e,$e,Nt);break;case 3:if(Ut(e,n),(n&130023424)===n&&(t=No+500-ce(),10<t)){if(ti(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Ee(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=sl(or.bind(null,e,$e,Nt),t);break}or(e,$e,Nt);break;case 4:if(Ut(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var l=31-ut(n);a=1<<l,l=t[l],l>i&&(i=l),n&=~a}if(n=i,n=ce()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*vp(n/1960))-n,10<n){e.timeoutHandle=sl(or.bind(null,e,$e,Nt),n);break}or(e,$e,Nt);break;case 5:or(e,$e,Nt);break;default:throw Error(S(329))}}}return Fe(e,ce()),e.callbackNode===r?ph.bind(null,e):null}function kl(e,t){var r=Mn;return e.current.memoizedState.isDehydrated&&(pr(e,t).flags|=256),e=vi(e,t),e!==2&&(t=$e,$e=r,t!==null&&_l(t)),e}function _l(e){$e===null?$e=e:$e.push.apply($e,e)}function wp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!ht(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ut(e,t){for(t&=~bo,t&=~zi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ut(t),n=1<<r;e[r]=-1,t&=~n}}function Hc(e){if(W&6)throw Error(S(327));Zr();var t=ti(e,0);if(!(t&1))return Fe(e,ce()),null;var r=vi(e,t);if(e.tag!==0&&r===2){var n=Qa(e);n!==0&&(t=n,r=kl(e,n))}if(r===1)throw r=is,pr(e,0),Ut(e,t),Fe(e,ce()),r;if(r===6)throw Error(S(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,or(e,$e,Nt),Fe(e,ce()),null}function ko(e,t){var r=W;W|=1;try{return e(t)}finally{W=r,W===0&&(on=ce()+500,Di&&sr())}}function jr(e){qt!==null&&qt.tag===0&&!(W&6)&&Zr();var t=W;W|=1;var r=Ze.transition,n=J;try{if(Ze.transition=null,J=1,e)return e()}finally{J=n,Ze.transition=r,W=t,!(W&6)&&sr()}}function _o(){Ue=Hr.current,te(Hr)}function pr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Qm(r)),de!==null)for(r=de.return;r!==null;){var n=r;switch(so(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ai();break;case 3:an(),te(Me),te(Ce),mo();break;case 5:fo(n);break;case 4:an();break;case 13:te(se);break;case 19:te(se);break;case 10:oo(n.type._context);break;case 22:case 23:_o()}r=r.return}if(ye=e,de=e=Yt(e.current,null),we=Ue=t,pe=0,is=null,bo=zi=wr=0,$e=Mn=null,fr!==null){for(t=0;t<fr.length;t++)if(r=fr[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var l=a.next;a.next=i,n.next=l}r.pending=n}fr=null}return e}function gh(e,t){do{var r=de;try{if(lo(),Vs.current=pi,mi){for(var n=ie.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}mi=!1}if(vr=0,xe=me=ie=null,On=!1,rs=0,jo.current=null,r===null||r.return===null){pe=1,is=t,de=null;break}e:{var a=e,l=r.return,o=r,c=t;if(t=we,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Ac(l);if(y!==null){y.flags&=-257,Ic(y,l,o,a,t),y.mode&1&&Rc(a,u,t),t=y,c=u;var p=t.updateQueue;if(p===null){var j=new Set;j.add(c),t.updateQueue=j}else p.add(c);break e}else{if(!(t&1)){Rc(a,u,t),Co();break e}c=Error(S(426))}}else if(ne&&o.mode&1){var N=Ac(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Ic(N,l,o,a,t),io(ln(c,o));break e}}a=c=ln(c,o),pe!==4&&(pe=2),Mn===null?Mn=[a]:Mn.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=Zd(a,c,t);_c(a,x);break e;case 1:o=c;var h=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof h.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Qt===null||!Qt.has(g)))){a.flags|=65536,t&=-t,a.lanes|=t;var v=eh(a,o,t);_c(a,v);break e}}a=a.return}while(a!==null)}vh(r)}catch(k){t=k,de===r&&r!==null&&(de=r=r.return);continue}break}while(!0)}function xh(){var e=gi.current;return gi.current=pi,e===null?pi:e}function Co(){(pe===0||pe===3||pe===2)&&(pe=4),ye===null||!(wr&268435455)&&!(zi&268435455)||Ut(ye,we)}function vi(e,t){var r=W;W|=2;var n=xh();(ye!==e||we!==t)&&(Nt=null,pr(e,t));do try{jp();break}catch(i){gh(e,i)}while(!0);if(lo(),W=r,gi.current=n,de!==null)throw Error(S(261));return ye=null,we=0,pe}function jp(){for(;de!==null;)yh(de)}function bp(){for(;de!==null&&!Gf();)yh(de)}function yh(e){var t=jh(e.alternate,e,Ue);e.memoizedProps=e.pendingProps,t===null?vh(e):de=t,jo.current=null}function vh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=pp(r,t),r!==null){r.flags&=32767,de=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pe=6,de=null;return}}else if(r=mp(r,t,Ue),r!==null){de=r;return}if(t=t.sibling,t!==null){de=t;return}de=t=e}while(t!==null);pe===0&&(pe=5)}function or(e,t,r){var n=J,i=Ze.transition;try{Ze.transition=null,J=1,Np(e,t,r,n)}finally{Ze.transition=i,J=n}return null}function Np(e,t,r,n){do Zr();while(qt!==null);if(W&6)throw Error(S(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(S(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(nm(e,a),e===ye&&(de=ye=null,we=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ts||(Ts=!0,bh(ei,function(){return Zr(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ze.transition,Ze.transition=null;var l=J;J=1;var o=W;W|=4,jo.current=null,xp(e,r),fh(r,e),Vm(rl),ri=!!tl,rl=tl=null,e.current=r,yp(r),Kf(),W=o,J=l,Ze.transition=a}else e.current=r;if(Ts&&(Ts=!1,qt=e,yi=i),a=e.pendingLanes,a===0&&(Qt=null),Xf(r.stateNode),Fe(e,ce()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(xi)throw xi=!1,e=bl,bl=null,e;return yi&1&&e.tag!==0&&Zr(),a=e.pendingLanes,a&1?e===Nl?Ln++:(Ln=0,Nl=e):Ln=0,sr(),null}function Zr(){if(qt!==null){var e=Zu(yi),t=Ze.transition,r=J;try{if(Ze.transition=null,J=16>e?16:e,qt===null)var n=!1;else{if(e=qt,qt=null,yi=0,W&6)throw Error(S(331));var i=W;for(W|=4,$=e.current;$!==null;){var a=$,l=a.child;if($.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for($=u;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:Dn(8,d,a)}var f=d.child;if(f!==null)f.return=d,$=f;else for(;$!==null;){d=$;var m=d.sibling,y=d.return;if(uh(d),d===u){$=null;break}if(m!==null){m.return=y,$=m;break}$=y}}}var p=a.alternate;if(p!==null){var j=p.child;if(j!==null){p.child=null;do{var N=j.sibling;j.sibling=null,j=N}while(j!==null)}}$=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,$=l;else e:for(;$!==null;){if(a=$,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Dn(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,$=x;break e}$=a.return}}var h=e.current;for($=h;$!==null;){l=$;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,$=g;else e:for(l=h;$!==null;){if(o=$,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Fi(9,o)}}catch(k){oe(o,o.return,k)}if(o===l){$=null;break e}var v=o.sibling;if(v!==null){v.return=o.return,$=v;break e}$=o.return}}if(W=i,sr(),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Ri,e)}catch{}n=!0}return n}finally{J=r,Ze.transition=t}}return!1}function Wc(e,t,r){t=ln(r,t),t=Zd(e,t,1),e=Jt(e,t,1),t=Ee(),e!==null&&(os(e,1,t),Fe(e,t))}function oe(e,t,r){if(e.tag===3)Wc(e,e,r);else for(;t!==null;){if(t.tag===3){Wc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qt===null||!Qt.has(n))){e=ln(r,e),e=eh(t,e,1),t=Jt(t,e,1),e=Ee(),t!==null&&(os(t,1,e),Fe(t,e));break}}t=t.return}}function kp(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ee(),e.pingedLanes|=e.suspendedLanes&r,ye===e&&(we&r)===r&&(pe===4||pe===3&&(we&130023424)===we&&500>ce()-No?pr(e,0):bo|=r),Fe(e,t)}function wh(e,t){t===0&&(e.mode&1?(t=ws,ws<<=1,!(ws&130023424)&&(ws=4194304)):t=1);var r=Ee();e=Rt(e,t),e!==null&&(os(e,t,r),Fe(e,r))}function _p(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),wh(e,r)}function Cp(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(S(314))}n!==null&&n.delete(t),wh(e,r)}var jh;jh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Me.current)De=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return De=!1,fp(e,t,r);De=!!(e.flags&131072)}else De=!1,ne&&t.flags&1048576&&_d(t,ci,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Hs(e,t),e=t.pendingProps;var i=rn(t,Ce.current);Yr(t,r),i=go(null,t,n,e,i,r);var a=xo();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Le(n)?(a=!0,li(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uo(t),i.updater=Li,t.stateNode=i,i._reactInternals=t,dl(t,n,e,r),t=ml(null,t,n,!0,a,r)):(t.tag=0,ne&&a&&no(t),Se(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Ep(n),e=at(n,e),i){case 0:t=fl(null,t,n,e,r);break e;case 1:t=Dc(null,t,n,e,r);break e;case 11:t=$c(null,t,n,e,r);break e;case 14:t=Oc(null,t,n,at(n.type,e),r);break e}throw Error(S(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:at(n,i),fl(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:at(n,i),Dc(e,t,n,i,r);case 3:e:{if(sh(t),e===null)throw Error(S(387));n=t.pendingProps,a=t.memoizedState,i=a.element,Rd(e,t),hi(t,n,null,r);var l=t.memoizedState;if(n=l.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=ln(Error(S(423)),t),t=Mc(e,t,n,r,i);break e}else if(n!==i){i=ln(Error(S(424)),t),t=Mc(e,t,n,r,i);break e}else for(Be=Kt(t.stateNode.containerInfo.firstChild),Ve=t,ne=!0,ct=null,r=Pd(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(nn(),n===i){t=At(e,t,r);break e}Se(e,t,n,r)}t=t.child}return t;case 5:return Ad(t),e===null&&ol(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,l=i.children,nl(n,i)?l=null:a!==null&&nl(n,a)&&(t.flags|=32),nh(e,t),Se(e,t,l,r),t.child;case 6:return e===null&&ol(t),null;case 13:return ih(e,t,r);case 4:return ho(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=sn(t,null,n,r):Se(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:at(n,i),$c(e,t,n,i,r);case 7:return Se(e,t,t.pendingProps,r),t.child;case 8:return Se(e,t,t.pendingProps.children,r),t.child;case 12:return Se(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value,Z(ui,n._currentValue),n._currentValue=l,a!==null)if(ht(a.value,l)){if(a.children===i.children&&!Me.current){t=At(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Et(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),cl(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(S(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),cl(l,r,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Se(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Yr(t,r),i=rt(i),n=n(i),t.flags|=1,Se(e,t,n,r),t.child;case 14:return n=t.type,i=at(n,t.pendingProps),i=at(n.type,i),Oc(e,t,n,i,r);case 15:return th(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:at(n,i),Hs(e,t),t.tag=1,Le(n)?(e=!0,li(t)):e=!1,Yr(t,r),Yd(t,n,i),dl(t,n,i,r),ml(null,t,n,!0,e,r);case 19:return ah(e,t,r);case 22:return rh(e,t,r)}throw Error(S(156,t.tag))};function bh(e,t){return Ju(e,t)}function Sp(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ye(e,t,r,n){return new Sp(e,t,r,n)}function So(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ep(e){if(typeof e=="function")return So(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Hl)return 11;if(e===Wl)return 14}return 2}function Yt(e,t){var r=e.alternate;return r===null?(r=Ye(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ks(e,t,r,n,i,a){var l=2;if(n=e,typeof e=="function")So(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Or:return gr(r.children,i,a,t);case ql:l=8,i|=8;break;case Oa:return e=Ye(12,r,t,i|2),e.elementType=Oa,e.lanes=a,e;case Da:return e=Ye(13,r,t,i),e.elementType=Da,e.lanes=a,e;case Ma:return e=Ye(19,r,t,i),e.elementType=Ma,e.lanes=a,e;case Au:return Ui(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tu:l=10;break e;case Ru:l=9;break e;case Hl:l=11;break e;case Wl:l=14;break e;case Mt:l=16,n=null;break e}throw Error(S(130,e==null?e:typeof e,""))}return t=Ye(l,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function gr(e,t,r,n){return e=Ye(7,e,n,t),e.lanes=r,e}function Ui(e,t,r,n){return e=Ye(22,e,n,t),e.elementType=Au,e.lanes=r,e.stateNode={isHidden:!1},e}function Na(e,t,r){return e=Ye(6,e,null,t),e.lanes=r,e}function ka(e,t,r){return t=Ye(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pp(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sa(0),this.expirationTimes=sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sa(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Eo(e,t,r,n,i,a,l,o,c){return e=new Pp(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ye(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},uo(a),e}function Tp(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Nh(e){if(!e)return er;e=e._reactInternals;e:{if(_r(e)!==e||e.tag!==1)throw Error(S(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Le(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(S(171))}if(e.tag===1){var r=e.type;if(Le(r))return Nd(e,r,t)}return t}function kh(e,t,r,n,i,a,l,o,c){return e=Eo(r,n,!0,e,i,a,l,o,c),e.context=Nh(null),r=e.current,n=Ee(),i=Xt(r),a=Et(n,i),a.callback=t??null,Jt(r,a,i),e.current.lanes=i,os(e,i,n),Fe(e,n),e}function Bi(e,t,r,n){var i=t.current,a=Ee(),l=Xt(i);return r=Nh(r),t.context===null?t.context=r:t.pendingContext=r,t=Et(a,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Jt(i,t,l),e!==null&&(dt(e,i,l,a),Bs(e,i,l)),l}function wi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Po(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}function Rp(){return null}var _h=typeof reportError=="function"?reportError:function(e){console.error(e)};function To(e){this._internalRoot=e}Vi.prototype.render=To.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(S(409));Bi(e,t,null,null)};Vi.prototype.unmount=To.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jr(function(){Bi(null,e,null,null)}),t[Tt]=null}};function Vi(e){this._internalRoot=e}Vi.prototype.unstable_scheduleHydration=function(e){if(e){var t=rd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<zt.length&&t!==0&&t<zt[r].priority;r++);zt.splice(r,0,e),r===0&&sd(e)}};function Ro(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Kc(){}function Ap(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=wi(l);a.call(u)}}var l=kh(t,n,e,0,null,!1,!1,"",Kc);return e._reactRootContainer=l,e[Tt]=l.current,Xn(e.nodeType===8?e.parentNode:e),jr(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=wi(c);o.call(u)}}var c=Eo(e,0,!1,null,null,!1,!1,"",Kc);return e._reactRootContainer=c,e[Tt]=c.current,Xn(e.nodeType===8?e.parentNode:e),jr(function(){Bi(t,c,r,n)}),c}function Hi(e,t,r,n,i){var a=r._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var o=i;i=function(){var c=wi(l);o.call(c)}}Bi(t,l,e,i)}else l=Ap(r,t,e,i,n);return wi(l)}ed=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Sn(t.pendingLanes);r!==0&&(Jl(t,r|1),Fe(t,ce()),!(W&6)&&(on=ce()+500,sr()))}break;case 13:jr(function(){var n=Rt(e,1);if(n!==null){var i=Ee();dt(n,e,1,i)}}),Po(e,1)}};Ql=function(e){if(e.tag===13){var t=Rt(e,134217728);if(t!==null){var r=Ee();dt(t,e,134217728,r)}Po(e,134217728)}};td=function(e){if(e.tag===13){var t=Xt(e),r=Rt(e,t);if(r!==null){var n=Ee();dt(r,e,t,n)}Po(e,t)}};rd=function(){return J};nd=function(e,t){var r=J;try{return J=e,t()}finally{J=r}};Ga=function(e,t,r){switch(t){case"input":if(za(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Oi(n);if(!i)throw Error(S(90));$u(n),za(n,i)}}}break;case"textarea":Du(e,r);break;case"select":t=r.value,t!=null&&Kr(e,!!r.multiple,t,!1)}};Vu=ko;qu=jr;var Ip={usingClientEntryPoint:!1,Events:[us,Fr,Oi,Uu,Bu,ko]},bn={findFiberByHostInstance:hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$p={bundleType:bn.bundleType,version:bn.version,rendererPackageName:bn.rendererPackageName,rendererConfig:bn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:It.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Gu(e),e===null?null:e.stateNode},findFiberByHostInstance:bn.findFiberByHostInstance||Rp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rs.isDisabled&&Rs.supportsFiber)try{Ri=Rs.inject($p),xt=Rs}catch{}}Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ip;Ge.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ro(t))throw Error(S(200));return Tp(e,t,null,r)};Ge.createRoot=function(e,t){if(!Ro(e))throw Error(S(299));var r=!1,n="",i=_h;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Eo(e,1,!1,null,null,r,!1,n,i),e[Tt]=t.current,Xn(e.nodeType===8?e.parentNode:e),new To(t)};Ge.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(S(188)):(e=Object.keys(e).join(","),Error(S(268,e)));return e=Gu(t),e=e===null?null:e.stateNode,e};Ge.flushSync=function(e){return jr(e)};Ge.hydrate=function(e,t,r){if(!qi(t))throw Error(S(200));return Hi(null,e,t,!0,r)};Ge.hydrateRoot=function(e,t,r){if(!Ro(e))throw Error(S(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",l=_h;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=kh(t,null,e,1,r??null,i,!1,a,l),e[Tt]=t.current,Xn(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Vi(t)};Ge.render=function(e,t,r){if(!qi(t))throw Error(S(200));return Hi(null,e,t,!1,r)};Ge.unmountComponentAtNode=function(e){if(!qi(e))throw Error(S(40));return e._reactRootContainer?(jr(function(){Hi(null,null,e,!1,function(){e._reactRootContainer=null,e[Tt]=null})}),!0):!1};Ge.unstable_batchedUpdates=ko;Ge.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!qi(r))throw Error(S(200));if(e==null||e._reactInternals===void 0)throw Error(S(38));return Hi(e,t,r,!1,n)};Ge.version="18.3.1-next-f1338f8080-20240426";function Ch(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ch)}catch(e){console.error(e)}}Ch(),Cu.exports=Ge;var Op=Cu.exports,Sh,Jc=Op;Sh=Jc.createRoot,Jc.hydrateRoot;const Dp="modulepreload",Mp=function(e){return"/"+e},Qc={},hs=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=Mp(c),c in Qc)return;Qc[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Dp,u||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return i.then(l=>{for(const o of l||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},Lp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>hs(async()=>{const{default:n}=await Promise.resolve().then(()=>fn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Ao extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Fp extends Ao{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class zp extends Ao{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Up extends Ao{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Cl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Cl||(Cl={}));var Bp=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class Vp{constructor(t,{headers:r={},customFetch:n,region:i=Cl.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=Lp(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Bp(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:l}=r;let o={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(o["x-region"]=c);let u;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(o["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(o["Content-Type"]="application/json",u=JSON.stringify(l)));const d=yield this.fetch(`${this.url}/${t}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:u}).catch(p=>{throw new Fp(p)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new zp(d);if(!d.ok)throw new Up(d);let m=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return m==="application/json"?y=yield d.json():m==="application/octet-stream"?y=yield d.blob():m==="text/event-stream"?y=d:m==="multipart/form-data"?y=yield d.formData():y=yield d.text(),{data:y,error:null}}catch(i){return{data:null,error:i}}})}}var Oe={},Io={},Wi={},fs={},Gi={},Ki={},qp=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},cn=qp();const Hp=cn.fetch,Eh=cn.fetch.bind(cn),Ph=cn.Headers,Wp=cn.Request,Gp=cn.Response,fn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ph,Request:Wp,Response:Gp,default:Eh,fetch:Hp},Symbol.toStringTag,{value:"Module"})),Kp=cf(fn);var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});let Jp=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ji.default=Jp;var Th=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ki,"__esModule",{value:!0});const Qp=Th(Kp),Xp=Th(Ji);let Yp=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Qp.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,o,c;let u=null,d=null,f=null,m=a.status,y=a.statusText;if(a.ok){if(this.method!=="HEAD"){const x=await a.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=x:d=JSON.parse(x))}const j=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),N=(o=a.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");j&&N&&N.length>1&&(f=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,m=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const j=await a.text();try{u=JSON.parse(j),Array.isArray(u)&&a.status===404&&(d=[],u=null,m=200,y="OK")}catch{a.status===404&&j===""?(m=204,y="No Content"):u={message:j}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,y="OK"),u&&this.shouldThrowOnError)throw new Xp.default(u)}return{error:u,data:d,count:f,status:m,statusText:y}});return this.shouldThrowOnError||(i=i.catch(a=>{var l,o,c;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,r)}returns(){return this}overrideTypes(){return this}};Ki.default=Yp;var Zp=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gi,"__esModule",{value:!0});const e0=Zp(Ki);let t0=class extends e0.default{select(t){let r=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:l="text"}={}){var o;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${u}"; options=${c};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Gi.default=t0;var r0=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fs,"__esModule",{value:!0});const n0=r0(Gi);let s0=class extends n0.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};fs.default=s0;var i0=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wi,"__esModule",{value:!0});const Nn=i0(fs);let a0=class{constructor(t,{headers:r={},schema:n,fetch:i}){this.url=t,this.headers=r,this.schema=n,this.fetch=i}select(t,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let a=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",l),n&&(this.headers.Prefer=`count=${n}`),new Nn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const i="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new Nn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){const l="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),a||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Nn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new Nn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Nn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Wi.default=a0;var Qi={},Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.version=void 0;Xi.version="0.0.0-automated";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.DEFAULT_HEADERS=void 0;const l0=Xi;Qi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${l0.version}`};var Rh=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Io,"__esModule",{value:!0});const o0=Rh(Wi),c0=Rh(fs),u0=Qi;let d0=class Ah{constructor(t,{headers:r={},schema:n,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},u0.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=i}from(t){const r=new URL(`${this.url}/${t}`);return new o0.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ah(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:i=!1,count:a}={}){let l;const o=new URL(`${this.url}/rpc/${t}`);let c;n||i?(l=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{o.searchParams.append(d,f)})):(l="POST",c=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new c0.default({method:l,url:o,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Io.default=d0;var mn=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.PostgrestError=Oe.PostgrestBuilder=Oe.PostgrestTransformBuilder=Oe.PostgrestFilterBuilder=Oe.PostgrestQueryBuilder=Oe.PostgrestClient=void 0;const Ih=mn(Io);Oe.PostgrestClient=Ih.default;const $h=mn(Wi);Oe.PostgrestQueryBuilder=$h.default;const Oh=mn(fs);Oe.PostgrestFilterBuilder=Oh.default;const Dh=mn(Gi);Oe.PostgrestTransformBuilder=Dh.default;const Mh=mn(Ki);Oe.PostgrestBuilder=Mh.default;const Lh=mn(Ji);Oe.PostgrestError=Lh.default;var h0=Oe.default={PostgrestClient:Ih.default,PostgrestQueryBuilder:$h.default,PostgrestFilterBuilder:Oh.default,PostgrestTransformBuilder:Dh.default,PostgrestBuilder:Mh.default,PostgrestError:Lh.default};const{PostgrestClient:f0,PostgrestQueryBuilder:ey,PostgrestFilterBuilder:ty,PostgrestTransformBuilder:ry,PostgrestBuilder:ny,PostgrestError:sy}=h0;function m0(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const p0=m0(),g0="2.11.15",x0=`realtime-js/${g0}`,y0="1.0.0",Fh=1e4,v0=1e3;var Fn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Fn||(Fn={}));var ke;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ke||(ke={}));var ot;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ot||(ot={}));var Sl;(function(e){e.websocket="websocket"})(Sl||(Sl={}));var dr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(dr||(dr={}));class w0{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(t.slice(l,l+i));l=l+i;const c=n.decode(t.slice(l,l+a));l=l+a;const u=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class zh{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Y;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Y||(Y={}));const Xc=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,l)=>(a[l]=j0(l,e,t,i),a),{})},j0=(e,t,r,n)=>{const i=t.find(o=>o.name===e),a=i==null?void 0:i.type,l=r[e];return a&&!n.includes(a)?Uh(a,l):El(l)},Uh=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return _0(t,r)}switch(e){case Y.bool:return b0(t);case Y.float4:case Y.float8:case Y.int2:case Y.int4:case Y.int8:case Y.numeric:case Y.oid:return N0(t);case Y.json:case Y.jsonb:return k0(t);case Y.timestamp:return C0(t);case Y.abstime:case Y.date:case Y.daterange:case Y.int4range:case Y.int8range:case Y.money:case Y.reltime:case Y.text:case Y.time:case Y.timestamptz:case Y.timetz:case Y.tsrange:case Y.tstzrange:return El(t);default:return El(t)}},El=e=>e,b0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},N0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},k0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},_0=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const l=e.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(o=>Uh(t,o))}return e},C0=e=>typeof e=="string"?e.replace(" ","T"):e,Bh=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class _a{constructor(t,r,n={},i=Fh){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Yc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Yc||(Yc={}));class zn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zn.syncState(this.state,i,a,l),this.pendingDiffs.forEach(c=>{this.state=zn.syncDiff(this.state,c,a,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=zn.syncDiff(this.state,i,a,l),o())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),l=this.transformState(r),o={},c={};return this.map(a,(u,d)=>{l[u]||(c[u]=d)}),this.map(l,(u,d)=>{const f=a[u];if(f){const m=d.map(N=>N.presence_ref),y=f.map(N=>N.presence_ref),p=d.filter(N=>y.indexOf(N.presence_ref)<0),j=f.filter(N=>m.indexOf(N.presence_ref)<0);p.length>0&&(o[u]=p),j.length>0&&(c[u]=j)}else o[u]=d}),this.syncDiff(a,{joins:o,leaves:c},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const f=t[o].map(y=>y.presence_ref),m=d.filter(y=>f.indexOf(y.presence_ref)<0);t[o].unshift(...m)}n(o,d,c)}),this.map(l,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[o]=u,i(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Zc;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Zc||(Zc={}));var eu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(eu||(eu={}));var kt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(kt||(kt={}));class $o{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new _a(this,ot.join,this.params,this.timeout),this.rejoinTimer=new zh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ke.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ot.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new zn(this),this.broadcastEndpointURL=Bh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ke.closed){const{config:{broadcast:a,presence:l,private:o}}=this.params;this._onError(d=>t==null?void 0:t(kt.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(kt.CLOSED));const c={},u={broadcast:a,presence:l,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&i!==void 0?i:[],private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(kt.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,y=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,p=[];for(let j=0;j<y;j++){const N=m[j],{filter:{event:x,schema:h,table:g,filter:v}}=N,k=d&&d[j];if(k&&k.event===x&&k.schema===h&&k.table===g&&k.filter===v)p.push(Object.assign(Object.assign({},N),{id:k.id}));else{this.unsubscribe(),this.state=ke.errored,t==null||t(kt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(kt.SUBSCRIBED);return}}).receive("error",d=>{this.state=ke.errored,t==null||t(kt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(kt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ke.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ot.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new _a(this,ot.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new _a(this,t,r,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=ot;if(n&&[o,c,u,d].indexOf(l)>=0&&n!==this._joinRef())return;let m=this._onMessage(l,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var p,j,N;return((p=y.filter)===null||p===void 0?void 0:p.event)==="*"||((N=(j=y.filter)===null||j===void 0?void 0:j.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===l}).map(y=>y.callback(m,n)):(a=this.bindings[l])===null||a===void 0||a.filter(y=>{var p,j,N,x,h,g;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const v=y.id,k=(p=y.filter)===null||p===void 0?void 0:p.event;return v&&((j=r.ids)===null||j===void 0?void 0:j.includes(v))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((N=r.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const v=(h=(x=y==null?void 0:y.filter)===null||x===void 0?void 0:x.event)===null||h===void 0?void 0:h.toLocaleLowerCase();return v==="*"||v===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:j,table:N,commit_timestamp:x,type:h,errors:g}=p;m=Object.assign(Object.assign({},{schema:j,table:N,commit_timestamp:x,eventType:h,new:{},old:{},errors:g}),this._getPayloadRecords(p))}y.callback(m,n)})}_isClosed(){return this.state===ke.closed}_isJoined(){return this.state===ke.joined}_isJoining(){return this.state===ke.joining}_isLeaving(){return this.state===ke.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&$o.isEqual(i.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ot.close,{},t)}_onError(t){this._on(ot.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ke.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Xc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Xc(t.columns,t.old_record)),r}}const tu=()=>{},S0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class E0{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fh,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=tu,this.ref=0,this.logger=tu,this.conn=null,this.sendBuffer=[],this.serializer=new w0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...o)=>hs(async()=>{const{default:c}=await Promise.resolve().then(()=>fn);return{default:c}},void 0).then(({default:c})=>c(...o)):l=fetch,(...o)=>l(...o)},this.endPoint=`${t}/${Sl.websocket}`,this.httpEndpoint=Bh(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,l)=>l(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new zh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=p0),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:y0}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Fn.connecting:return dr.Connecting;case Fn.open:return dr.Open;case Fn.closing:return dr.Closing;default:return dr.Closed}}isConnected(){return this.connectionState()===dr.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new $o(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:x0};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(ot.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(v0,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:i,payload:a,ref:l}=r;n==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${i} ${l&&"("+l+")"||""}`,a),Array.from(this.channels).filter(o=>o._isMember(n)).forEach(o=>o._trigger(i,a,l)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ot.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([S0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Oo extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ge(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class P0 extends Oo{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Pl extends Oo{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var T0=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const Vh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>hs(async()=>{const{default:n}=await Promise.resolve().then(()=>fn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},R0=()=>T0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield hs(()=>Promise.resolve().then(()=>fn),void 0)).Response:Response}),Tl=e=>{if(Array.isArray(e))return e.map(r=>Tl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=Tl(n)}),t};var Cr=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const Ca=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),A0=(e,t,r)=>Cr(void 0,void 0,void 0,function*(){const n=yield R0();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(i=>{t(new P0(Ca(i),e.status||500))}).catch(i=>{t(new Pl(Ca(i),i))}):t(new Pl(Ca(e),e))}),I0=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),r))};function ms(e,t,r,n,i,a){return Cr(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,I0(t,n,i,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>A0(c,o,n))})})}function ji(e,t,r,n){return Cr(this,void 0,void 0,function*(){return ms(e,"GET",t,r,n)})}function Ft(e,t,r,n,i){return Cr(this,void 0,void 0,function*(){return ms(e,"POST",t,n,i,r)})}function $0(e,t,r,n,i){return Cr(this,void 0,void 0,function*(){return ms(e,"PUT",t,n,i,r)})}function O0(e,t,r,n){return Cr(this,void 0,void 0,function*(){return ms(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function qh(e,t,r,n,i){return Cr(this,void 0,void 0,function*(){return ms(e,"DELETE",t,n,i,r)})}var Ie=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const D0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ru={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class M0{constructor(t,r={},n,i){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Vh(i)}uploadOrUpdate(t,r,n,i){return Ie(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},ru),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:a,headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{})),m=yield f.json();return f.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(ge(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return Ie(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),l=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:ru.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:d}),m=yield f.json();return f.ok?{data:{path:a,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(ge(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ie(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield Ft(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),l=new URL(this.url+a.url),o=l.searchParams.get("token");if(!o)throw new Oo("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ie(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}copy(t,r,n){return Ie(this,void 0,void 0,function*(){try{return{data:{path:(yield Ft(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return Ie(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield Ft(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return Ie(this,void 0,void 0,function*(){try{const i=yield Ft(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}download(t,r){return Ie(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield ji(this.fetch,`${this.url}/${i}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ge(o))return{data:null,error:o};throw o}})}info(t){return Ie(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ji(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Tl(n),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}exists(t){return Ie(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield O0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ge(n)&&n instanceof Pl){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(t){return Ie(this,void 0,void 0,function*(){try{return{data:yield qh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ie(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},D0),r),{prefix:t||""});return{data:yield Ft(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const L0="2.7.1",F0={"X-Client-Info":`storage-js/${L0}`};var Pr=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class z0{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},F0),r),this.fetch=Vh(n)}listBuckets(){return Pr(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}getBucket(t){return Pr(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Pr(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Pr(this,void 0,void 0,function*(){try{return{data:yield $0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Pr(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Pr(this,void 0,void 0,function*(){try{return{data:yield qh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}}class U0 extends z0{constructor(t,r={},n){super(t,r,n)}from(t){return new M0(this.url,this.headers,t,this.fetch)}}const B0="2.50.2";let Pn="";typeof Deno<"u"?Pn="deno":typeof document<"u"?Pn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pn="react-native":Pn="node";const V0={"X-Client-Info":`supabase-js-${Pn}/${B0}`},q0={headers:V0},H0={schema:"public"},W0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},G0={};var K0=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const J0=e=>{let t;return e?t=e:typeof fetch>"u"?t=Eh:t=fetch,(...r)=>t(...r)},Q0=()=>typeof Headers>"u"?Ph:Headers,X0=(e,t,r)=>{const n=J0(r),i=Q0();return(a,l)=>K0(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let u=new i(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},l),{headers:u}))})};var Y0=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};function Z0(e){return e.endsWith("/")?e:e+"/"}function eg(e,t){var r,n;const{db:i,auth:a,realtime:l,global:o}=e,{db:c,auth:u,realtime:d,global:f}=t,m={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),l),global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Y0(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const Hh="2.70.0",Ir=30*1e3,Rl=3,Sa=Rl*Ir,tg="http://localhost:9999",rg="supabase.auth.token",ng={"X-Client-Info":`gotrue-js/${Hh}`},Al="X-Supabase-Api-Version",Wh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},sg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ig=6e5;class Do extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function B(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class ag extends Do{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function lg(e){return B(e)&&e.name==="AuthApiError"}class Gh extends Do{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ir extends Do{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class Dt extends ir{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function og(e){return B(e)&&e.name==="AuthSessionMissingError"}class As extends ir{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Is extends ir{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class $s extends ir{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function cg(e){return B(e)&&e.name==="AuthImplicitGrantRedirectError"}class nu extends ir{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Il extends ir{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ea(e){return B(e)&&e.name==="AuthRetryableFetchError"}class su extends ir{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Un extends ir{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const bi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),iu=` 	
\r=`.split(""),ug=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<iu.length;t+=1)e[iu[t].charCodeAt(0)]=-2;for(let t=0;t<bi.length;t+=1)e[bi[t].charCodeAt(0)]=t;return e})();function au(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(bi[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(bi[n]),t.queuedBits-=6}}function Kh(e,t,r){const n=ug[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function lu(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{fg(l,n,r)};for(let l=0;l<e.length;l+=1)Kh(e.charCodeAt(l),i,a);return t.join("")}function dg(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function hg(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}dg(n,t)}}function fg(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function mg(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Kh(e.charCodeAt(i),r,n);return new Uint8Array(t)}function pg(e){const t=[];return hg(e,r=>t.push(r)),new Uint8Array(t)}function gg(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>au(i,r,n)),au(null,r,n),t.join("")}function xg(e){return Math.round(Date.now()/1e3)+e}function yg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const it=()=>typeof window<"u"&&typeof document<"u",ar={tested:!1,writable:!1},Bn=()=>{if(!it())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ar.tested)return ar.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ar.tested=!0,ar.writable=!0}catch{ar.tested=!0,ar.writable=!1}return ar.writable};function vg(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const Jh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>hs(async()=>{const{default:n}=await Promise.resolve().then(()=>fn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},wg=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Qh=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Os=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ds=async(e,t)=>{await e.removeItem(t)};class Yi{constructor(){this.promise=new Yi.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Yi.promiseConstructor=Promise;function Pa(e){const t=e.split(".");if(t.length!==3)throw new Un("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!sg.test(t[n]))throw new Un("JWT not in base64url format");return{header:JSON.parse(lu(t[0])),payload:JSON.parse(lu(t[1])),signature:mg(t[2]),raw:{header:t[0],payload:t[1]}}}async function jg(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function bg(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){n(l);return}}catch(l){if(!t(a,l)){i(l);return}}})()})}function Ng(e){return("0"+e.toString(16)).substr(-2)}function kg(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,Ng).join("")}async function _g(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function Cg(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await _g(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Tr(e,t,r=!1){const n=kg();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Qh(e,`${t}-code-verifier`,i);const a=await Cg(n);return[a,n===a?"plain":"s256"]}const Sg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Eg(e){const t=e.headers.get(Al);if(!t||!t.match(Sg))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Pg(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Tg(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Rg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Rr(e){if(!Rg.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Ag=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const cr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ig=[502,503,504];async function ou(e){var t;if(!wg(e))throw new Il(cr(e),0);if(Ig.includes(e.status))throw new Il(cr(e),e.status);let r;try{r=await e.json()}catch(a){throw new Gh(cr(a),a)}let n;const i=Eg(e);if(i&&i.getTime()>=Wh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new su(cr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Dt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new su(cr(r),e.status,r.weak_password.reasons);throw new ag(cr(r),e.status||500,n)}const $g=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function V(e,t,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[Al]||(a[Al]=Wh["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Og(e,t,r+o,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Og(e,t,r,n,i,a){const l=$g(t,n,i,a);let o;try{o=await e(r,Object.assign({},l))}catch(c){throw console.error(c),new Il(cr(c),0)}if(o.ok||await ou(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await ou(c)}}function bt(e){var t;let r=null;Fg(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=xg(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function cu(e){const t=bt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Bt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Dg(e){return{data:e,error:null}}function Mg(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,l=Ag(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function Lg(e){return e}function Fg(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ta=["global","local","others"];var zg=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};class Ug{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Jh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Ta[0]){if(Ta.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ta.join(", ")}`);try{return await V(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await V(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Bt})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=zg(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await V(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Mg,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(B(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await V(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Bt})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await V(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Lg});if(d.error)throw d.error;const f=await d.json(),m=(l=d.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(p=>{const j=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(p.split(";")[1].split("=")[1]);u[`${N}Page`]=j}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(B(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Rr(t);try{return await V(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Bt})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Rr(t);try{return await V(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Bt})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Rr(t);try{return await V(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Bt})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Rr(t.userId);try{const{data:r,error:n}=await V(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(B(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Rr(t.userId),Rr(t.id);try{return{data:await V(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}}}const Bg={getItem:e=>Bn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Bn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Bn()&&globalThis.localStorage.removeItem(e)}};function uu(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Vg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ar={debug:!!(globalThis&&Bn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Xh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class qg extends Xh{}async function Hg(e,t,r){Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new qg(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ar.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Vg();const Wg={url:tg,storageKey:rg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ng,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function du(e,t,r){return await r()}class as{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=as.nextInstanceID,as.nextInstanceID+=1,this.instanceID>0&&it()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Wg),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Ug({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Jh(i.fetch),this.lock=i.lock||du,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:it()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Hg:this.lock=du,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Bn()?this.storage=Bg:(this.memoryStorage={},this.storage=uu(this.memoryStorage)):(this.memoryStorage={},this.storage=uu(this.memoryStorage)),it()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Hh}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=vg(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),it()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),cg(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return B(r)?{error:r}:{error:new Gh("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:bt}),{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(B(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:d,password:f,options:m}=t;let y=null,p=null;this.flowType==="pkce"&&([y,p]=await Tr(this.storage,this.storageKey)),a=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:p},xform:bt})}else if("phone"in t){const{phone:d,password:f,options:m}=t;a=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:bt})}else throw new Is("You must provide either an email or phone number and a password");const{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(B(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:l,options:o}=t;r=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:cu})}else if("phone"in t){const{phone:a,password:l,options:o}=t;r=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:cu})}else throw new Is("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new As}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(B(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,i,a,l,o,c,u,d,f,m,y;let p,j;if("message"in t)p=t.message,j=t.signature;else{const{chain:N,wallet:x,statement:h,options:g}=t;let v;if(it())if(typeof x=="object")v=x;else{const w=window;if("solana"in w&&typeof w.solana=="object"&&("signIn"in w.solana&&typeof w.solana.signIn=="function"||"signMessage"in w.solana&&typeof w.solana.signMessage=="function"))v=w.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=x}const k=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in v&&v.signIn){const w=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),h?{statement:h}:null));let C;if(Array.isArray(w)&&w[0]&&typeof w[0]=="object")C=w[0];else if(w&&typeof w=="object"&&"signedMessage"in w&&"signature"in w)C=w;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)p=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),j=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${k.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...h?["",h,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(i=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((f=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...g.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const w=await v.signMessage(new TextEncoder().encode(p),"utf8");if(!w||!(w instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=w}}try{const{data:N,error:x}=await V(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:gg(j)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:bt});if(x)throw x;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new As}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:x})}catch(N){if(B(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(t){const r=await Os(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:l}=await V(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:bt});if(await Ds(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new As}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(B(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:l}=t,o=await V(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:bt}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new As}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(B(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,i,a,l;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Tr(this.storage,this.storageKey));const{error:f}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Is("You must provide either an email or phone number.")}catch(o){if(B(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await V(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:bt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,u=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(B(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var r,n,i;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Tr(this.storage,this.storageKey)),await V(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Dg})}catch(a){if(B(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Dt;const{error:i}=await V(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(B(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:l}=await V(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:l,error:o}=await V(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new Is("You must provide either an email or phone number and a type")}catch(r){if(B(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Os(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Sa:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!l&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Bt}):await this._useSession(async r=>{var n,i,a;const{data:l,error:o}=r;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Dt}:await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Bt})})}catch(r){if(B(r))return og(r)&&(await this._removeSession(),await Ds(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Dt;const l=i.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Tr(this.storage,this.storageKey));const{data:u,error:d}=await V(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Bt});if(d)throw d;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Dt;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:l}=Pa(t.access_token);if(l.exp&&(n=l.exp,i=n<=r),i){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(B(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Dt;const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(B(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!it())throw new $s("No browser detected.");if(t.error||t.error_description||t.error_code)throw new $s(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new nu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $s("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new nu("No code detected.");const{data:h,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:h.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:o,expires_at:c,token_type:u}=t;if(!a||!o||!l||!u)throw new $s("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let m=d+f;c&&(m=parseInt(c));const y=m-d;y*1e3<=Ir&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${f}s`);const p=m-f;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,m,d);const{data:j,error:N}=await this._getUser(a);if(N)throw N;const x={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:m,refresh_token:l,token_type:u,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(B(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Os(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const l=(n=i.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(lg(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await Ds(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=yg(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Tr(this.storage,this.storageKey,!0));try{return await V(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(B(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var l,o,c,u,d;const{data:f,error:m}=a;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await V(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return it()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(B(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:l}=r;if(l)throw l;return await V(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(B(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await bg(async i=>(i>0&&await jg(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await V(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:bt})),(i,a)=>{const l=200*Math.pow(2,i);return a&&Ea(a)&&Date.now()+l-n<Ir})}catch(n){if(this._debug(r,"error",n),B(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),it()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Os(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Sa;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Sa}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Ea(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Dt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Yi;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new Dt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),B(a)){const l={session:null,error:a};return Ea(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(l),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Qh(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Ds(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&it()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ir);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/Ir);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ir}ms, refresh threshold is ${Rl} ticks`),i<=Rl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Xh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!it()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await Tr(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await V(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(B(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await V(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(B(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const{data:l,error:o}=await V(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(B(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await V(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(B(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],i=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Pa(i.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n||(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+ig>Date.now()))return n;const{data:i,error:a}=await V(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!i.keys||i.keys.length===0)throw new Un("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),n=i.keys.find(l=>l.kid===t),!n)throw new Un("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:y,error:p}=await this.getSession();if(p||!y.session)return{data:null,error:p};n=y.session.access_token}const{header:i,payload:a,signature:l,raw:{header:o,payload:c}}=Pa(n);if(Pg(a.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:a,header:i,signature:l},error:null}}const u=Tg(i.alg),d=await this.fetchJwk(i.kid,r),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,l,pg(`${o}.${c}`)))throw new Un("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}}}as.nextInstanceID=0;const Gg=as;class Kg extends Gg{constructor(t){super(t)}}var Jg=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class Qg{constructor(t,r,n){var i,a,l;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=Z0(t),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:H0,realtime:G0,auth:Object.assign(Object.assign({},W0),{storageKey:u}),global:q0},f=eg(n??{},d);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=X0(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new f0(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new Vp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new U0(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Jg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:a,flowType:l,lock:o,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Kg({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,flowType:l,lock:o,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new E0(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Xg=(e,t,r)=>new Qg(e,t,r),Yg="https://jkmyflqzrmtvacpsgrxs.supabase.co",Zg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImprbXlmbHF6cm10dmFjcHNncnhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEyMjAzNDMsImV4cCI6MjA2Njc5NjM0M30.i9T9hR0Ux7bX5-6i0wFFxqnktgvPi5a7vG4URrCkEUw",Xe=Xg(Yg,Zg);function ur(e){const[t,r]=P.useState([]),[n,i]=P.useState(!0),[a,l]=P.useState(null),o=async()=>{try{i(!0);const{data:m,error:y}=await Xe.from(e).select("*").order("created_at",{ascending:!1});if(y)throw y;r(m||[])}catch(m){l(m instanceof Error?m.message:"Erro desconhecido")}finally{i(!1)}},c=async m=>{try{const{data:y,error:p}=await Xe.from(e).insert(m).select().single();if(p)throw p;return r(j=>[y,...j]),y}catch(y){throw l(y instanceof Error?y.message:"Erro ao inserir"),y}},u=async(m,y)=>{try{const{data:p,error:j}=await Xe.from(e).update(y).eq("id",m).select().single();if(j)throw j;return r(N=>N.map(x=>x.id===m?p:x)),p}catch(p){throw l(p instanceof Error?p.message:"Erro ao atualizar"),p}},d=async m=>{try{const{error:y}=await Xe.from(e).delete().eq("id",m);if(y)throw y;r(p=>p.filter(j=>j.id!==m))}catch(y){throw l(y instanceof Error?y.message:"Erro ao deletar"),y}},f=async()=>{try{const{error:m}=await Xe.from(e).delete().neq("id","00000000-0000-0000-0000-000000000000");if(m)throw m;r([])}catch(m){throw l(m instanceof Error?m.message:"Erro ao limpar dados"),m}};return P.useEffect(()=>{o()},[e]),{data:t,loading:n,error:a,fetchAll:o,insert:c,update:u,remove:d,clearAll:f,setError:l}}function ex(){const[e,t]=P.useState([]),[r,n]=P.useState(!0),[i,a]=P.useState(null),l=async()=>{try{n(!0);const{data:y,error:p}=await Xe.from("customers").select(`
          *,
          level:customer_levels(*)
        `).order("created_at",{ascending:!1});if(p)throw p;t(y||[])}catch(y){a(y instanceof Error?y.message:"Erro ao buscar clientes")}finally{n(!1)}},o=async y=>{try{const{data:p,error:j}=await Xe.from("customers").insert({first_name:y.firstName,last_name:y.lastName,email:y.email,phone:y.phone,document:y.document,points:y.points||0,level_id:y.level.id,status:y.status,email_verified:y.emailVerified||!1,phone_verified:y.phoneVerified||!1,document_verified:y.documentVerified||!0}).select(`
          *,
          level:customer_levels(*)
        `).single();if(j)throw j;return t(N=>[p,...N]),p}catch(p){throw a(p instanceof Error?p.message:"Erro ao adicionar cliente"),p}},c=async(y,p)=>{try{const j={};p.firstName&&(j.first_name=p.firstName),p.lastName&&(j.last_name=p.lastName),p.email&&(j.email=p.email),p.phone&&(j.phone=p.phone),p.document&&(j.document=p.document),p.points!==void 0&&(j.points=p.points),p.level&&(j.level_id=p.level.id),p.status&&(j.status=p.status),p.emailVerified!==void 0&&(j.email_verified=p.emailVerified),p.phoneVerified!==void 0&&(j.phone_verified=p.phoneVerified),p.documentVerified!==void 0&&(j.document_verified=p.documentVerified);const{data:N,error:x}=await Xe.from("customers").update(j).eq("id",y).select(`
          *,
          level:customer_levels(*)
        `).single();if(x)throw x;return t(h=>h.map(g=>g.id===y?N:g)),N}catch(j){throw a(j instanceof Error?j.message:"Erro ao atualizar cliente"),j}},u=y=>{const p=y.replace(/[^\d]/g,"");return e.find(j=>j.document.replace(/[^\d]/g,"")===p)},d=y=>e.find(p=>p.email.toLowerCase()===y.toLowerCase()),f=y=>{const p=y.replace(/[^\d]/g,"");return e.find(j=>j.phone.replace(/[^\d]/g,"")===p)},m=async()=>{try{const{error:y}=await Xe.from("customers").delete().neq("id","00000000-0000-0000-0000-000000000000");if(y)throw y;t([])}catch(y){throw a(y instanceof Error?y.message:"Erro ao limpar clientes"),y}};return P.useEffect(()=>{l()},[]),{customers:e,loading:r,error:i,fetchCustomers:l,addCustomer:o,updateCustomer:c,findCustomerByDocument:u,findCustomerByEmail:d,findCustomerByPhone:f,clearCustomers:m,setError:a}}function tx(){const[e,t]=P.useState([]),[r,n]=P.useState(!0),[i,a]=P.useState(null),l=async()=>{try{n(!0);const{data:u,error:d}=await Xe.from("point_movements").select("*").order("created_at",{ascending:!1});if(d)throw d;t(u||[])}catch(u){a(u instanceof Error?u.message:"Erro ao buscar movimentações")}finally{n(!1)}},o=async u=>{try{const{data:d,error:f}=await Xe.from("point_movements").insert({customer_id:u.customerId,customer_document:u.customerDocument,branch_id:u.branchId,type:u.type,points:u.points,description:u.description,date:u.date,reference:u.reference,coupon_code:u.couponCode}).select().single();if(f)throw f;return t(m=>[d,...m]),d}catch(d){throw a(d instanceof Error?d.message:"Erro ao adicionar movimentação"),d}},c=async()=>{try{const{error:u}=await Xe.from("point_movements").delete().neq("id","00000000-0000-0000-0000-000000000000");if(u)throw u;t([])}catch(u){throw a(u instanceof Error?u.message:"Erro ao limpar movimentações"),u}};return P.useEffect(()=>{l()},[]),{movements:e,loading:r,error:i,fetchMovements:l,addMovement:o,clearMovements:c,setError:a}}const Yh=P.createContext(void 0),Sr=()=>{const e=P.useContext(Yh);if(!e)throw new Error("useCustomerContext must be used within a CustomerProvider");return e},rx=[{id:"550e8400-e29b-41d4-a716-446655440000",name:"Bronze",color:"#CD7F32",icon:"award",order:1,requirements:{minPoints:0,minPurchaseValue:0,timeframe:0},benefits:{pointsMultiplier:1,referralBonus:1,freeShipping:!1,exclusiveEvents:!1,customRewards:[]}},{id:"550e8400-e29b-41d4-a716-446655440001",name:"Prata",color:"#C0C0C0",icon:"star",order:2,requirements:{minPoints:1e3,minPurchaseValue:500,timeframe:365},benefits:{pointsMultiplier:1.2,referralBonus:1.5,freeShipping:!0,exclusiveEvents:!1,customRewards:[]}},{id:"550e8400-e29b-41d4-a716-446655440002",name:"Ouro",color:"#FFD700",icon:"crown",order:3,requirements:{minPoints:5e3,minPurchaseValue:2e3,timeframe:365},benefits:{pointsMultiplier:1.5,referralBonus:2,freeShipping:!0,exclusiveEvents:!0,customRewards:[]}}],nx=e=>{const t=e.replace(/[^\d]/g,"");if(t.length!==11||/^(\d)\1{10}$/.test(t))return!1;let r=0;for(let i=0;i<9;i++)r+=parseInt(t.charAt(i))*(10-i);let n=r*10%11;if((n===10||n===11)&&(n=0),n!==parseInt(t.charAt(9)))return!1;r=0;for(let i=0;i<10;i++)r+=parseInt(t.charAt(i))*(11-i);return n=r*10%11,(n===10||n===11)&&(n=0),n===parseInt(t.charAt(10))},Ra=e=>e.replace(/[^\d]/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"),kn=e=>({id:e.id,firstName:e.first_name,lastName:e.last_name,email:e.email,phone:e.phone,document:e.document,points:e.points,level:Zh(e.level),status:e.status,registrationDate:e.registration_date,lastPurchase:e.last_purchase,address:e.address,preferences:e.preferences,emailVerified:e.email_verified,phoneVerified:e.phone_verified,documentVerified:e.document_verified}),Zh=e=>({id:e.id,name:e.name,color:e.color,icon:e.icon,order:e.order_position,requirements:{minPoints:e.min_points,minPurchaseValue:e.min_purchase_value,timeframe:e.timeframe_days},benefits:{pointsMultiplier:e.points_multiplier,referralBonus:e.referral_bonus,freeShipping:e.free_shipping,exclusiveEvents:e.exclusive_events,customRewards:e.custom_rewards||[]}}),sx=({children:e})=>{const{customers:t,loading:r,error:n,addCustomer:i,updateCustomer:a,findCustomerByDocument:l,findCustomerByEmail:o,findCustomerByPhone:c,clearCustomers:u}=ex(),{data:d,loading:f,error:m,insert:y,update:p,remove:j}=ur("customer_levels"),N=t.map(kn),x=d.length>0?d.map(Zh):rx,h=r||f,g=n||m,v=_=>{const T=l(_);return T?kn(T):void 0},k=_=>{const T=o(_);return T?kn(T):void 0},w=_=>{const T=c(_);return T?kn(T):void 0},C=(_,T,L)=>{const ue=_.replace(/[^\d]/g,"");if(!nx(ue))return{document:Ra(ue),email:T,phone:L,isValid:!1,conflicts:{duplicateDocument:!1}};const Re={};let A=!1;const D=v(ue);return D&&(Re.duplicateDocument=!0,Re.existingCustomer=D,A=!0),{document:Ra(ue),email:T,phone:L,isValid:!A,conflicts:A?Re:void 0}},R=async _=>{if(!C(_.document,_.email,_.phone).isValid)return null;try{const L=x[0];if(!L)return console.error("Nenhum nível disponível para atribuir ao cliente"),null;const ue=await i({..._,document:Ra(_.document),level:L});return kn(ue)}catch(L){return console.error("Erro ao adicionar cliente:",L),null}},U=async(_,T)=>{try{await a(_,T)}catch(L){console.error("Erro ao atualizar cliente:",L)}},O=async _=>{try{await y({name:_.name,color:_.color,icon:_.icon,order_position:_.order,min_points:_.requirements.minPoints,min_purchase_value:_.requirements.minPurchaseValue,timeframe_days:_.requirements.timeframe,points_multiplier:_.benefits.pointsMultiplier,referral_bonus:_.benefits.referralBonus,free_shipping:_.benefits.freeShipping,exclusive_events:_.benefits.exclusiveEvents,custom_rewards:_.benefits.customRewards})}catch(T){console.error("Erro ao adicionar nível:",T)}},le=async(_,T)=>{try{const L={};T.name&&(L.name=T.name),T.color&&(L.color=T.color),T.icon&&(L.icon=T.icon),T.order&&(L.order_position=T.order),T.requirements&&(T.requirements.minPoints!==void 0&&(L.min_points=T.requirements.minPoints),T.requirements.minPurchaseValue!==void 0&&(L.min_purchase_value=T.requirements.minPurchaseValue),T.requirements.timeframe!==void 0&&(L.timeframe_days=T.requirements.timeframe)),T.benefits&&(T.benefits.pointsMultiplier!==void 0&&(L.points_multiplier=T.benefits.pointsMultiplier),T.benefits.referralBonus!==void 0&&(L.referral_bonus=T.benefits.referralBonus),T.benefits.freeShipping!==void 0&&(L.free_shipping=T.benefits.freeShipping),T.benefits.exclusiveEvents!==void 0&&(L.exclusive_events=T.benefits.exclusiveEvents),T.benefits.customRewards!==void 0&&(L.custom_rewards=T.benefits.customRewards)),await p(_,L)}catch(L){console.error("Erro ao atualizar nível:",L)}},X=async _=>{const T=N.filter(L=>L.level.id===_);if(T.length>0){alert(`Não é possível deletar este nível pois há ${T.length} cliente(s) associado(s) a ele.`);return}if(x.length<=1){alert("Não é possível deletar o último nível. Deve haver pelo menos um nível ativo.");return}try{await j(_)}catch(L){console.error("Erro ao deletar nível:",L)}};return s.jsx(Yh.Provider,{value:{customers:N,levels:x,loading:h,error:g,updateCustomer:U,addCustomer:R,validateCustomer:C,findCustomerByDocument:v,findCustomerByEmail:k,findCustomerByPhone:w,addLevel:O,updateLevel:le,deleteLevel:X,clearCustomers:u},children:e})},ef=P.createContext(void 0),$t=()=>{const e=P.useContext(ef);if(!e)throw new Error("useApp must be used within an AppProvider");return e},ix=[{id:"550e8400-e29b-41d4-a716-446655440100",name:"Filial Centro",code:"FIL001",address:"Rua das Flores, 123 - Centro - São Paulo, SP",phone:"(11) 3333-4444",email:"centro@empresa.com",manager:"João Silva",isActive:!0,color:"#3B82F6",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"550e8400-e29b-41d4-a716-446655440101",name:"Filial Shopping",code:"FIL002",address:"Shopping Center, Loja 45 - Vila Madalena - São Paulo, SP",phone:"(11) 5555-6666",email:"shopping@empresa.com",manager:"Maria Santos",isActive:!0,color:"#10B981",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],ax=e=>({id:e.id,customerId:e.customer_id,customerDocument:e.customer_document,branchId:e.branch_id,type:e.type,points:e.points,description:e.description,date:e.date,reference:e.reference,couponCode:e.coupon_code}),lx=e=>({id:e.id,name:e.name,code:e.code,address:e.address,phone:e.phone,email:e.email,manager:e.manager,isActive:e.is_active,color:e.color,created_at:e.created_at,updated_at:e.updated_at}),ox=({children:e})=>{const t=Sr(),{movements:r,loading:n,error:i,addMovement:a,clearMovements:l}=tx(),{data:o,loading:c,error:u}=ur("rewards"),{data:d,loading:f,error:m}=ur("campaigns"),{data:y,loading:p,error:j}=ur("referrals"),{data:N,loading:x,error:h,insert:g,update:v,remove:k}=ur("referral_types"),{data:w,loading:C,error:R,insert:U,update:O,remove:le}=ur("branches"),{data:X,loading:_,error:T,update:L}=ur("settings"),ue=r.map(ax),Re=w.length>0?w.map(lx):ix,A=o.map(E=>({id:E.id,name:E.name,description:E.description,pointsCost:E.points_cost,type:E.type,value:E.value,isActive:E.is_active,expirationDays:E.expiration_days,image:E.image_url,conditions:E.conditions})),D=d.map(E=>({id:E.id,name:E.name,type:E.type,multiplier:E.multiplier,startDate:E.start_date,endDate:E.end_date,products:E.products,isActive:E.is_active,widget:E.widget})),z=y.map(E=>({id:E.id,referrerId:E.referrer_id,referrerDocument:E.referrer_document,referredId:E.referred_id||"",referredDocument:E.referred_document||"",referredIdentifier:E.referred_identifier,referredIdentifierType:E.referred_identifier_type,referralTypeId:E.referral_type_id,status:E.status,date:E.date,method:E.method,validatedDate:E.validated_date,rejectedReason:E.rejected_reason,purchaseValue:E.purchase_value})),Q=N.map(E=>({id:E.id,name:E.name,description:E.description,icon:E.icon,color:E.color,isActive:E.is_active,methods:E.methods,referrerReward:E.referrer_reward,referredReward:E.referred_reward,conditions:E.conditions})),K=X[0]?{company:X[0].company,program:X[0].program,notifications:X[0].notifications,validation:X[0].validation,terms:X[0].terms}:{company:{name:"Loja Exemplo",website:"https://lojaexemplo.com",address:"Rua das Flores, 123 - São Paulo, SP"},program:{name:"Programa Fidelidade",primaryColor:"#3B82F6",secondaryColor:"#10B981",font:"Inter",pointsPerReal:1,minPurchaseValue:50,pointsExpiration:{enabled:!0,days:365,notifyDaysBefore:30}},notifications:{email:!0,whatsapp:!0,sms:!1},validation:{requireCpfValidation:!0,requireEmailVerification:!1,requirePhoneVerification:!1,allowDuplicateEmail:!1,allowDuplicatePhone:!0},terms:""},ft=t.loading||n||c||f||p||x||C||_,ze=t.error||i||u||m||j||h||R||T,wt=async E=>{try{if(!E.branchId)throw new Error("Filial é obrigatória para movimentações");await a(E)}catch(F){throw console.error("Erro ao adicionar movimentação:",F),F}},I=async E=>{try{X[0]&&await L(X[0].id,{company:{...K.company,...E.company},program:{...K.program,...E.program},notifications:{...K.notifications,...E.notifications},validation:{...K.validation,...E.validation},terms:E.terms||K.terms})}catch(F){console.error("Erro ao atualizar configurações:",F)}},H=async E=>{try{await U({name:E.name,code:E.code,address:E.address,phone:E.phone,email:E.email,manager:E.manager,is_active:E.isActive,color:E.color})}catch(F){console.error("Erro ao adicionar filial:",F)}},he=async(E,F)=>{try{const re={};F.name&&(re.name=F.name),F.code&&(re.code=F.code),F.address&&(re.address=F.address),F.phone&&(re.phone=F.phone),F.email&&(re.email=F.email),F.manager&&(re.manager=F.manager),F.isActive!==void 0&&(re.is_active=F.isActive),F.color&&(re.color=F.color),await O(E,re)}catch(re){console.error("Erro ao atualizar filial:",re)}},b=async E=>{try{await le(E)}catch(F){console.error("Erro ao deletar filial:",F)}},G=async E=>{try{await g({name:E.name,description:E.description,icon:E.icon,color:E.color,is_active:E.isActive,methods:E.methods,referrer_reward:E.referrerReward,referred_reward:E.referredReward,conditions:E.conditions})}catch(F){console.error("Erro ao adicionar tipo de indicação:",F)}},Ae=async(E,F)=>{try{const re={};F.name&&(re.name=F.name),F.description&&(re.description=F.description),F.icon&&(re.icon=F.icon),F.color&&(re.color=F.color),F.isActive!==void 0&&(re.is_active=F.isActive),F.methods&&(re.methods=F.methods),F.referrerReward&&(re.referrer_reward=F.referrerReward),F.referredReward&&(re.referred_reward=F.referredReward),F.conditions&&(re.conditions=F.conditions),await v(E,re)}catch(re){console.error("Erro ao atualizar tipo de indicação:",re)}},fe=async E=>{try{await k(E)}catch(F){console.error("Erro ao deletar tipo de indicação:",F)}},jt=async()=>{try{t.clearCustomers&&await t.clearCustomers(),l&&await l(),console.log("Todos os dados foram limpos com sucesso")}catch(E){console.error("Erro ao limpar dados:",E)}};return s.jsx(ef.Provider,{value:{movements:ue,rewards:A,campaigns:D,referrals:z,referralTypes:Q,branches:Re,settings:K,loading:ft,error:ze,addMovement:wt,updateSettings:I,addReferralType:G,updateReferralType:Ae,deleteReferralType:fe,addBranch:H,updateBranch:he,deleteBranch:b,clearAllData:jt},children:e})},cx=({children:e})=>s.jsx(sx,{children:s.jsx(ox,{children:e})});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ux={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),M=(e,t)=>{const r=P.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:c,...u},d)=>P.createElement("svg",{ref:d,...ux,width:i,height:i,stroke:n,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${dx(e)}`,o].join(" "),...u},[...t.map(([f,m])=>P.createElement(f,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=M("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=M("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=M("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=M("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=M("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=M("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=M("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=M("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=M("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=M("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=M("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=M("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=M("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=M("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=M("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=M("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=M("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=M("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=M("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=M("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=M("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=M("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=M("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=M("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=M("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=M("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=M("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=M("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=M("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=M("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=M("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=M("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=M("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=M("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=M("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=M("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=M("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=M("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=M("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=M("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=M("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=M("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=M("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=M("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=M("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=M("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=M("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=M("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=M("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=M("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Tx=({children:e,currentPage:t,onPageChange:r})=>{const[n,i]=P.useState(!1),a=[{id:"dashboard",label:"Dashboard",icon:vt},{id:"customers",label:"Clientes",icon:Qs},{id:"branches",label:"Filiais",icon:Ni},{id:"levels",label:"Níveis",icon:qe},{id:"movements",label:"Movimentos",icon:vt},{id:"rewards",label:"Recompensas",icon:We},{id:"referrals",label:"Indicações",icon:Gr},{id:"communication",label:"Comunicação",icon:Ei},{id:"objectives",label:"Objetivos",icon:Js},{id:"settings",label:"Personalização",icon:sf}];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:s.jsx("button",{onClick:()=>i(!n),className:"p-2 rounded-md bg-white shadow-md",children:n?s.jsx(Nr,{size:24}):s.jsx(vx,{size:24})})}),s.jsxs("div",{className:`fixed inset-y-0 left-0 z-30 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out ${n?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[s.jsxs("div",{className:"flex items-center justify-center h-16 bg-blue-600 text-white",children:[s.jsx(We,{className:"w-8 h-8 mr-2"}),s.jsx("span",{className:"text-xl font-bold",children:"Cashback Pro"})]}),s.jsx("nav",{className:"mt-8",children:a.map(l=>{const o=l.icon;return s.jsxs("button",{onClick:()=>{r(l.id),i(!1)},className:`w-full flex items-center px-6 py-3 text-left transition-colors ${t===l.id?"bg-blue-50 text-blue-600 border-r-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[s.jsx(o,{className:"w-5 h-5 mr-3"}),l.label]},l.id)})})]}),n&&s.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-20 lg:hidden",onClick:()=>i(!1)}),s.jsx("div",{className:"lg:ml-64 p-4 lg:p-8",children:e})]})},fu=({onPageChange:e})=>{const{movements:t=[],rewards:r=[],referrals:n=[],clearAllData:i}=$t(),{customers:a=[]}=Sr(),l=f=>`${f.firstName} ${f.lastName}`.trim(),o=[{title:"Total de Clientes",value:a.length.toString(),icon:Qs,color:"bg-blue-500",change:"+12%"},{title:"Pontos Ativos",value:a.reduce((f,m)=>f+m.points,0).toLocaleString(),icon:qe,color:"bg-yellow-500",change:"+8%"},{title:"Resgates do Mês",value:t.filter(f=>f.type==="redeem").length.toString(),icon:We,color:"bg-green-500",change:"+15%"},{title:"Indicações",value:n.length.toString(),icon:Gr,color:"bg-purple-500",change:"+25%"}],c=t.slice(0,5),u=a.sort((f,m)=>m.points-f.points).slice(0,5),d=async()=>{if(confirm("Tem certeza que deseja limpar TODOS os dados de clientes e movimentações? Esta ação não pode ser desfeita."))try{await i(),alert("Todos os dados foram limpos com sucesso!")}catch{alert("Erro ao limpar dados. Tente novamente.")}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:d,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center",children:[s.jsx(br,{className:"w-4 h-4 mr-2"}),"Limpar Dados"]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Última atualização: ",new Date().toLocaleString("pt-BR")]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map(f=>{const m=f.icon;return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:f.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.value})]}),s.jsx("div",{className:`${f.color} p-3 rounded-full`,children:s.jsx(m,{className:"w-6 h-6 text-white"})})]}),s.jsxs("div",{className:"mt-4 flex items-center",children:[s.jsx("span",{className:"text-sm font-medium text-green-600",children:f.change}),s.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"vs mês anterior"})]})]},f.title)})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Movimentações Recentes"}),c.length>0?s.jsx("div",{className:"space-y-4",children:c.map(f=>{const m=a.find(y=>y.id===f.customerId);return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${f.type==="earn"?"bg-green-100":"bg-red-100"}`,children:s.jsx(vt,{className:`w-5 h-5 ${f.type==="earn"?"text-green-600":"text-red-600"}`})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:m?l(m):"Cliente não encontrado"}),s.jsx("p",{className:"text-sm text-gray-500",children:f.description})]})]}),s.jsxs("div",{className:`text-sm font-medium ${f.type==="earn"?"text-green-600":"text-red-600"}`,children:[f.type==="earn"?"+":"",f.points," pts"]})]},f.id)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(vt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Nenhuma movimentação encontrada"}),s.jsx("p",{className:"text-sm text-gray-400",children:"As movimentações aparecerão aqui quando criadas"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Top Clientes"}),u.length>0?s.jsx("div",{className:"space-y-4",children:u.map((f,m)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx(Wr,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:l(f)}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Nível ",f.level.name]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[f.points.toLocaleString()," pts"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["#",m+1]})]})]},f.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Qs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Nenhum cliente encontrado"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Os clientes aparecerão aqui quando cadastrados"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Ações Rápidas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>e("customers"),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[s.jsx(Qs,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Adicionar Cliente"})]}),s.jsxs("button",{onClick:()=>e("rewards"),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors",children:[s.jsx(We,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Nova Recompensa"})]}),s.jsxs("button",{onClick:()=>e("movements"),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-colors",children:[s.jsx(vt,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Registrar Pontos"})]})]})]})]})},Ia=[{code:"+55",country:"Brasil",flag:"🇧🇷"},{code:"+1",country:"Estados Unidos",flag:"🇺🇸"},{code:"+1",country:"Canadá",flag:"🇨🇦"},{code:"+54",country:"Argentina",flag:"🇦🇷"},{code:"+56",country:"Chile",flag:"🇨🇱"},{code:"+57",country:"Colômbia",flag:"🇨🇴"},{code:"+51",country:"Peru",flag:"🇵🇪"},{code:"+598",country:"Uruguai",flag:"🇺🇾"},{code:"+595",country:"Paraguai",flag:"🇵🇾"},{code:"+591",country:"Bolívia",flag:"🇧🇴"},{code:"+593",country:"Equador",flag:"🇪🇨"},{code:"+58",country:"Venezuela",flag:"🇻🇪"},{code:"+33",country:"França",flag:"🇫🇷"},{code:"+49",country:"Alemanha",flag:"🇩🇪"},{code:"+39",country:"Itália",flag:"🇮🇹"},{code:"+34",country:"Espanha",flag:"🇪🇸"},{code:"+351",country:"Portugal",flag:"🇵🇹"},{code:"+44",country:"Reino Unido",flag:"🇬🇧"},{code:"+81",country:"Japão",flag:"🇯🇵"},{code:"+86",country:"China",flag:"🇨🇳"},{code:"+91",country:"Índia",flag:"🇮🇳"},{code:"+61",country:"Austrália",flag:"🇦🇺"}],lf={Norte:[{ddd:"68",city:"Rio Branco",state:"AC"},{ddd:"82",city:"Maceió",state:"AL"},{ddd:"96",city:"Macapá",state:"AP"},{ddd:"92",city:"Manaus",state:"AM"},{ddd:"97",city:"Manaus Interior",state:"AM"},{ddd:"71",city:"Salvador",state:"BA"},{ddd:"73",city:"Ilhéus",state:"BA"},{ddd:"74",city:"Juazeiro",state:"BA"},{ddd:"75",city:"Feira de Santana",state:"BA"},{ddd:"77",city:"Barreiras",state:"BA"},{ddd:"85",city:"Fortaleza",state:"CE"},{ddd:"88",city:"Juazeiro do Norte",state:"CE"},{ddd:"61",city:"Brasília",state:"DF"},{ddd:"27",city:"Vitória",state:"ES"},{ddd:"28",city:"Cachoeiro de Itapemirim",state:"ES"},{ddd:"62",city:"Goiânia",state:"GO"},{ddd:"64",city:"Rio Verde",state:"GO"},{ddd:"98",city:"São Luís",state:"MA"},{ddd:"99",city:"Imperatriz",state:"MA"},{ddd:"65",city:"Cuiabá",state:"MT"},{ddd:"66",city:"Rondonópolis",state:"MT"},{ddd:"67",city:"Campo Grande",state:"MS"},{ddd:"31",city:"Belo Horizonte",state:"MG"},{ddd:"32",city:"Juiz de Fora",state:"MG"},{ddd:"33",city:"Governador Valadares",state:"MG"},{ddd:"34",city:"Uberlândia",state:"MG"},{ddd:"35",city:"Poços de Caldas",state:"MG"},{ddd:"37",city:"Divinópolis",state:"MG"},{ddd:"38",city:"Montes Claros",state:"MG"},{ddd:"91",city:"Belém",state:"PA"},{ddd:"93",city:"Santarém",state:"PA"},{ddd:"94",city:"Marabá",state:"PA"},{ddd:"83",city:"João Pessoa",state:"PB"},{ddd:"81",city:"Recife",state:"PE"},{ddd:"87",city:"Petrolina",state:"PE"},{ddd:"86",city:"Teresina",state:"PI"},{ddd:"89",city:"Picos",state:"PI"},{ddd:"41",city:"Curitiba",state:"PR"},{ddd:"42",city:"Ponta Grossa",state:"PR"},{ddd:"43",city:"Londrina",state:"PR"},{ddd:"44",city:"Maringá",state:"PR"},{ddd:"45",city:"Cascavel",state:"PR"},{ddd:"46",city:"Francisco Beltrão",state:"PR"},{ddd:"21",city:"Rio de Janeiro",state:"RJ"},{ddd:"22",city:"Campos dos Goytacazes",state:"RJ"},{ddd:"24",city:"Volta Redonda",state:"RJ"},{ddd:"84",city:"Natal",state:"RN"},{ddd:"69",city:"Porto Velho",state:"RO"},{ddd:"95",city:"Boa Vista",state:"RR"},{ddd:"51",city:"Porto Alegre",state:"RS"},{ddd:"53",city:"Pelotas",state:"RS"},{ddd:"54",city:"Caxias do Sul",state:"RS"},{ddd:"55",city:"Santa Maria",state:"RS"},{ddd:"48",city:"Florianópolis",state:"SC"},{ddd:"47",city:"Joinville",state:"SC"},{ddd:"49",city:"Chapecó",state:"SC"},{ddd:"79",city:"Aracaju",state:"SE"},{ddd:"11",city:"São Paulo",state:"SP"},{ddd:"12",city:"São José dos Campos",state:"SP"},{ddd:"13",city:"Santos",state:"SP"},{ddd:"14",city:"Bauru",state:"SP"},{ddd:"15",city:"Sorocaba",state:"SP"},{ddd:"16",city:"Ribeirão Preto",state:"SP"},{ddd:"17",city:"São José do Rio Preto",state:"SP"},{ddd:"18",city:"Presidente Prudente",state:"SP"},{ddd:"19",city:"Campinas",state:"SP"},{ddd:"63",city:"Palmas",state:"TO"}]},Rx=e=>lf.Norte.map(r=>r.ddd).includes(e),of=e=>lf.Norte.find(t=>t.ddd===e),Ax=e=>{const t=e.replace(/[^\d]/g,"");return t.length===9&&t.startsWith("9")},Ix=(e,t,r)=>{const n=r.replace(/[^\d]/g,"");return n.length===9?`${e} ${t} ${n.substring(0,5)}-${n.substring(5)}`:n.length===8?`${e} ${t} ${n.substring(0,4)}-${n.substring(4)}`:`${e} ${t} ${n}`},$x=(e,t,r)=>{const n=r.replace(/[^\d]/g,"");if(e==="+55"){const i=Rx(t),a=Ax(n),l=of(t);return{isValid:i&&a,formatted:i&&a?Ix(e,t,n):"",errors:{invalidDDD:!i,invalidMobile:!a,requiresNineDigits:n.length!==9,mustStartWithNine:!n.startsWith("9")},areaInfo:l}}else{const i=n.length>=8&&n.length<=15;return{isValid:i,formatted:i?`${e} ${n}`:"",errors:{invalidLength:!i},areaInfo:null}}},zo=({value:e,onChange:t,error:r,placeholder:n="+55 11 99999-9999",className:i=""})=>{var v;const[a,l]=P.useState(Ia[0]),[o,c]=P.useState(!1),[u,d]=P.useState(""),[f,m]=P.useState(""),[y,p]=P.useState(null);P.useEffect(()=>{if(e){const k=e.match(/^(\+\d{1,4})\s(\d{2})\s(.+)$/);if(k){const[,w,C,R]=k,U=Ia.find(O=>O.code===w);U&&(l(U),d(C),m(R.replace(/[^\d]/g,"")))}}},[]),P.useEffect(()=>{if(u&&f){const k=$x(a.code,u,f);p(k),k.isValid&&t(k.formatted)}},[a,u,f,t]);const j=k=>{const w=k.replace(/[^\d]/g,"").substring(0,2);d(w)},N=k=>{let w=k.replace(/[^\d]/g,"");a.code==="+55"?w=w.substring(0,9):w=w.substring(0,15),m(w)},x=k=>a.code==="+55"&&k.length>=5?`${k.substring(0,5)}-${k.substring(5)}`:k,g=a.code==="+55"&&u?of(u):null;return s.jsxs("div",{className:`relative ${i}`,children:[s.jsxs("div",{className:"flex",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>c(!o),className:"flex items-center px-3 py-2 border border-r-0 border-gray-300 rounded-l-lg bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("span",{className:"mr-2",children:a.flag}),s.jsx("span",{className:"text-sm font-medium",children:a.code}),s.jsx(mx,{className:"w-4 h-4 ml-1 text-gray-400"})]}),o&&s.jsx("div",{className:"absolute top-full left-0 z-50 w-64 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Ia.map(k=>s.jsxs("button",{type:"button",onClick:()=>{l(k),c(!1),d(""),m("")},className:"flex items-center w-full px-3 py-2 text-left hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",children:[s.jsx("span",{className:"mr-3",children:k.flag}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium",children:k.country}),s.jsx("div",{className:"text-xs text-gray-500",children:k.code})]}),a.code===k.code&&a.country===k.country&&s.jsx(en,{className:"w-4 h-4 text-blue-600"})]},`${k.code}-${k.country}`))})]}),a.code==="+55"&&s.jsx("input",{type:"text",value:u,onChange:k=>j(k.target.value),placeholder:"11",maxLength:2,className:`w-16 px-2 py-2 border-t border-b border-gray-300 text-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${(v=y==null?void 0:y.errors)!=null&&v.invalidDDD?"border-red-300 bg-red-50":""}`}),s.jsx("input",{type:"text",value:x(f),onChange:k=>N(k.target.value),placeholder:a.code==="+55"?"99999-9999":"999999999",className:`flex-1 px-3 py-2 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${y&&!y.isValid?"border-red-300 bg-red-50":""}`})]}),g&&s.jsxs("div",{className:"mt-1 text-xs text-green-600 flex items-center",children:[s.jsx(en,{className:"w-3 h-3 mr-1"}),g.city," - ",g.state]}),y&&!y.isValid&&s.jsx("div",{className:"mt-1 text-xs text-red-600",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx($l,{className:"w-3 h-3 mr-1"}),s.jsx("span",{children:a.code==="+55"?s.jsxs(s.Fragment,{children:[y.errors.invalidDDD&&"DDD inválido. ",y.errors.requiresNineDigits&&"Celular deve ter 9 dígitos. ",y.errors.mustStartWithNine&&"Celular deve começar com 9. "]}):y.errors.invalidLength&&"Número deve ter entre 8 e 15 dígitos."})]})}),(y==null?void 0:y.isValid)&&s.jsxs("div",{className:"mt-1 text-xs text-green-600 flex items-center",children:[s.jsx(en,{className:"w-3 h-3 mr-1"}),"Número válido: ",y.formatted]}),r&&s.jsxs("div",{className:"mt-1 text-xs text-red-600 flex items-center",children:[s.jsx($l,{className:"w-3 h-3 mr-1"}),r]}),o&&s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)})]})},Ox=({customer:e,onBack:t})=>{const{movements:r,addMovement:n}=$t(),{levels:i,updateCustomer:a}=Sr(),[l,o]=P.useState(!1),[c,u]=P.useState(e),[d,f]=P.useState(0),[m,y]=P.useState(""),p=r.filter(v=>v.customerId===e.id),j=v=>`${v.firstName} ${v.lastName}`.trim(),N=()=>{a(e.id,c),o(!1)},x=()=>{if(d&&m){const v={customerId:e.id,customerDocument:e.document,type:"admin_adjust",points:d,description:m,date:new Date().toISOString().split("T")[0]};n(v),a(e.id,{points:e.points+d}),f(0),y("")}},h=v=>{const w=v?`ONLINE-${Date.now()}`:void 0,C={customerId:e.id,customerDocument:e.document,type:"redeem",points:-100,description:`Resgate ${v?"online":"offline"}: Desconto R$ 10,00`,date:new Date().toISOString().split("T")[0],couponCode:w};n(C),a(e.id,{points:e.points-100})},g=v=>{const k=v.replace(/[^\d]/g,"");let w=k;k.length>=4&&(w=k.replace(/(\d{3})(\d{1,3})/,"$1.$2")),k.length>=7&&(w=k.replace(/(\d{3})\.(\d{3})(\d{1,3})/,"$1.$2.$3")),k.length>=10&&(w=k.replace(/(\d{3})\.(\d{3})\.(\d{3})(\d{1,2})/,"$1.$2.$3-$4")),u({...c,document:w})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{onClick:t,className:"mr-4 p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(hx,{className:"w-5 h-5"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Detalhes do Cliente"})]}),s.jsxs("button",{onClick:()=>o(!l),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[s.jsx(et,{className:"w-4 h-4 mr-2"}),l?"Cancelar":"Editar"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Informações Básicas"}),l?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),s.jsx("input",{type:"text",value:c.firstName,onChange:v=>u({...c,firstName:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Nome"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sobrenome"}),s.jsx("input",{type:"text",value:c.lastName,onChange:v=>u({...c,lastName:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Sobrenome"})]})]}),s.jsx("input",{type:"email",value:c.email,onChange:v=>u({...c,email:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Email"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),s.jsx(zo,{value:c.phone,onChange:v=>u({...c,phone:v})})]}),s.jsx("input",{type:"text",value:c.document,onChange:v=>g(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"CPF",maxLength:14}),s.jsx("button",{onClick:N,className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Salvar Alterações"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsxs("span",{className:"text-xl font-bold text-blue-600",children:[e.firstName.charAt(0),e.lastName.charAt(0)]})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:j(e)}),s.jsx("p",{className:"text-sm text-gray-500",children:e.email})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Lo,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("span",{className:"text-sm text-gray-600",children:e.phone})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Mo,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("span",{className:"text-sm text-gray-600",children:e.document})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Saldo de Pontos"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(qe,{className:"w-8 h-8 text-yellow-500 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.points.toLocaleString()}),s.jsx("p",{className:"text-sm text-gray-500",children:"pontos disponíveis"})]})]}),s.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:e.level.color+"20",color:e.level.color},children:e.level.name})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Status"}),s.jsxs("select",{value:e.status,onChange:v=>a(e.id,{status:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"active",children:"Ativo"}),s.jsx("option",{value:"inactive",children:"Inativo"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nível"}),s.jsx("select",{value:e.level.id,onChange:v=>{const k=i.find(w=>w.id===v.target.value);k&&a(e.id,{level:k})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:i.map(v=>s.jsx("option",{value:v.id,children:v.name},v.id))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Gerenciar Pontos"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",value:d,onChange:v=>f(Number(v.target.value)),placeholder:"Pontos",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),s.jsx("input",{type:"text",value:m,onChange:v=>y(v.target.value),placeholder:"Motivo",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsx("button",{onClick:x,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Adicionar Pontos"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Resgatar Recompensa"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("button",{onClick:()=>h(!0),className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:"Resgate Online"}),s.jsx("button",{onClick:()=>h(!1),className:"bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 transition-colors",children:"Resgate Offline"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Histórico de Pontos"}),s.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:p.map(v=>s.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${v.type==="earn"?"bg-green-100":v.type==="redeem"?"bg-red-100":v.type==="admin_adjust"?"bg-blue-100":"bg-gray-100"}`,children:[v.type==="earn"&&s.jsx(vt,{className:"w-4 h-4 text-green-600"}),v.type==="redeem"&&s.jsx(We,{className:"w-4 h-4 text-red-600"}),v.type==="admin_adjust"&&s.jsx(et,{className:"w-4 h-4 text-blue-600"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:v.description}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsx("p",{className:"text-xs text-gray-500",children:new Date(v.date).toLocaleDateString("pt-BR")}),s.jsxs("p",{className:`text-sm font-semibold ${v.points>0?"text-green-600":"text-red-600"}`,children:[v.points>0?"+":"",v.points," pts"]})]}),v.couponCode&&s.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Cupom: ",v.couponCode]})]})]},v.id))})]})]})]})},Dx=()=>{var C,R,U,O,le,X;const{customers:e,levels:t,validateCustomer:r,addCustomer:n}=Sr(),[i,a]=P.useState(""),[l,o]=P.useState("all"),[c,u]=P.useState(null),[d,f]=P.useState(!1),[m,y]=P.useState({firstName:"",lastName:"",email:"",phone:"",document:"",points:0,status:"active"}),[p,j]=P.useState(null),N=_=>`${_.firstName} ${_.lastName}`.trim(),x=e.filter(_=>{const L=N(_).toLowerCase().includes(i.toLowerCase())||_.email.toLowerCase().includes(i.toLowerCase())||_.document.includes(i),ue=l==="all"||_.status===l;return L&&ue}),h=_=>{const T=_.replace(/[^\d]/g,"");let L=T;if(T.length>=4&&(L=T.replace(/(\d{3})(\d{1,3})/,"$1.$2")),T.length>=7&&(L=T.replace(/(\d{3})\.(\d{3})(\d{1,3})/,"$1.$2.$3")),T.length>=10&&(L=T.replace(/(\d{3})\.(\d{3})\.(\d{3})(\d{1,2})/,"$1.$2.$3-$4")),y({...m,document:L}),T.length===11){const ue=r(T,m.email,m.phone);j(ue)}else j(null)},g=_=>{if(y({...m,email:_}),m.document.replace(/[^\d]/g,"").length===11){const T=r(m.document,_,m.phone);j(T)}},v=_=>{if(y({...m,phone:_}),m.document.replace(/[^\d]/g,"").length===11){const T=r(m.document,m.email,_);j(T)}},k=()=>{if(!(p!=null&&p.isValid))return;const _={...m,level:t[0],registrationDate:new Date().toISOString().split("T")[0],emailVerified:!1,phoneVerified:!1,documentVerified:!0};n(_)&&(f(!1),y({firstName:"",lastName:"",email:"",phone:"",document:"",points:0,status:"active"}),j(null))},w=_=>{const L=[_.documentVerified,_.emailVerified,_.phoneVerified].filter(Boolean).length;return L===3?s.jsx(ki,{className:"w-4 h-4 text-green-600"}):L>=1?s.jsx($l,{className:"w-4 h-4 text-yellow-600"}):s.jsx(Px,{className:"w-4 h-4 text-red-600"})};return c?s.jsx(Ox,{customer:c,onBack:()=>u(null)}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Clientes"}),s.jsxs("button",{onClick:()=>f(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[s.jsx(tr,{className:"w-4 h-4 mr-2"}),"Novo Cliente"]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Fo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Buscar por nome, email ou CPF...",value:i,onChange:_=>a(_.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:l,onChange:_=>o(_.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Todos os Status"}),s.jsx("option",{value:"active",children:"Ativo"}),s.jsx("option",{value:"inactive",children:"Inativo"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CPF"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Verificação"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pontos"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nível"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Última Compra"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(_=>s.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[_.firstName.charAt(0),_.lastName.charAt(0)]})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:N(_)}),s.jsx("div",{className:"text-sm text-gray-500",children:_.email}),s.jsx("div",{className:"text-sm text-gray-500",children:_.phone})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.document})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[w(_),s.jsxs("div",{className:"text-xs text-gray-500",children:[s.jsxs("div",{className:_.documentVerified?"text-green-600":"text-red-600",children:["CPF: ",_.documentVerified?"Verificado":"Pendente"]}),s.jsxs("div",{className:_.emailVerified?"text-green-600":"text-red-600",children:["Email: ",_.emailVerified?"Verificado":"Pendente"]}),s.jsxs("div",{className:_.phoneVerified?"text-green-600":"text-red-600",children:["Tel: ",_.phoneVerified?"Verificado":"Pendente"]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(qe,{className:"w-4 h-4 text-yellow-500 mr-1"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:_.points.toLocaleString()})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:_.level.color+"20",color:_.level.color},children:_.level.name})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:_.status==="active"?"Ativo":"Inativo"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.lastPurchase?new Date(_.lastPurchase).toLocaleDateString("pt-BR"):"Nunca"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[s.jsx("button",{onClick:()=>u(_),className:"text-blue-600 hover:text-blue-900 mr-4",children:s.jsx(et,{className:"w-4 h-4"})}),s.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:s.jsx(wx,{className:"w-4 h-4"})})]})]},_.id))})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(vt,{className:"w-5 h-5 text-blue-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Clientes Ativos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(_=>_.status==="active").length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(ki,{className:"w-5 h-5 text-green-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Totalmente Verificados"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(_=>_.documentVerified&&_.emailVerified&&_.phoneVerified).length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx(qe,{className:"w-5 h-5 text-yellow-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pontos Totais"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.reduce((_,T)=>_+T.points,0).toLocaleString()})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(We,{className:"w-5 h-5 text-purple-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Média de Pontos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Math.round(e.reduce((_,T)=>_+T.points,0)/e.length).toLocaleString()})]})]})})]}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Novo Cliente"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),s.jsx("input",{type:"text",value:m.firstName,onChange:_=>y({...m,firstName:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"João"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sobrenome"}),s.jsx("input",{type:"text",value:m.lastName,onChange:_=>y({...m,lastName:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Silva"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF (Chave Primária)"}),s.jsx("input",{type:"text",value:m.document,onChange:_=>h(_.target.value),placeholder:"000.000.000-00",maxLength:14,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${p&&!p.isValid?"border-red-300":"border-gray-300"}`}),p&&!p.isValid&&s.jsxs("div",{className:"mt-1 text-sm text-red-600",children:[((C=p.conflicts)==null?void 0:C.duplicateDocument)&&"CPF já cadastrado",!((R=p.conflicts)!=null&&R.duplicateDocument)&&"CPF inválido"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Chave Secundária)"}),s.jsx("input",{type:"email",value:m.email,onChange:_=>g(_.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${(U=p==null?void 0:p.conflicts)!=null&&U.duplicateEmail?"border-red-300":"border-gray-300"}`,placeholder:"joao@email.com"}),((O=p==null?void 0:p.conflicts)==null?void 0:O.duplicateEmail)&&s.jsx("div",{className:"mt-1 text-sm text-red-600",children:"Email já cadastrado para outro CPF"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone Celular (Chave Secundária)"}),s.jsx(zo,{value:m.phone,onChange:v,placeholder:"+55 85 99999-9999",error:(le=p==null?void 0:p.conflicts)!=null&&le.duplicatePhone?"Telefone já cadastrado para outro CPF":void 0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pontos Iniciais"}),s.jsx("input",{type:"number",value:m.points,onChange:_=>y({...m,points:Number(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),((X=p==null?void 0:p.conflicts)==null?void 0:X.existingCustomer)&&s.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Cliente Existente Encontrado:"}),s.jsxs("p",{className:"text-sm text-yellow-700",children:[N(p.conflicts.existingCustomer)," - ",p.conflicts.existingCustomer.document]})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{f(!1),j(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:k,disabled:!(p!=null&&p.isValid),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Adicionar Cliente"})]})]})})]})},Mx=()=>{const{branches:e,addBranch:t,updateBranch:r,deleteBranch:n}=$t(),[i,a]=P.useState(!1),[l,o]=P.useState(null),[c,u]=P.useState({name:"",code:"",address:"",phone:"",email:"",manager:"",isActive:!0,color:"#3B82F6"}),d=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1","#FFD700","#CD7F32"],f=()=>{u({name:"",code:"",address:"",phone:"",email:"",manager:"",isActive:!0,color:"#3B82F6"})},m=h=>{h?(o(h),u({name:h.name,code:h.code,address:h.address,phone:h.phone,email:h.email,manager:h.manager,isActive:h.isActive,color:h.color})):(o(null),f()),a(!0)},y=()=>{a(!1),o(null),f()},p=h=>{if(h.preventDefault(),!c.name.trim()||!c.code.trim()){alert("Nome e código da filial são obrigatórios");return}l?r(l.id,c):t(c),y()},j=h=>{confirm(`Tem certeza que deseja deletar a filial "${h.name}"?`)&&n(h.id)},N=h=>{const g=h.replace(/\D/g,"");return g.length===11?g.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):g.length===10?g.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):h},x=h=>{const g=N(h);u({...c,phone:g})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Filiais"}),s.jsxs("button",{onClick:()=>m(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[s.jsx(tr,{className:"w-4 h-4 mr-2"}),"Nova Filial"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Ni,{className:"w-5 h-5 text-blue-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total de Filiais"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ci,{className:"w-5 h-5 text-green-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Filiais Ativas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(h=>h.isActive).length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(_i,{className:"w-5 h-5 text-red-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Filiais Inativas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(h=>!h.isActive).length})]})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(h=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:h.color+"20"},children:s.jsx(Ni,{className:"w-6 h-6",style:{color:h.color}})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h.name}),s.jsx("p",{className:"text-sm text-gray-500",children:h.code})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[h.isActive?s.jsx(Ci,{className:"w-4 h-4 text-green-600"}):s.jsx(_i,{className:"w-4 h-4 text-gray-400"}),s.jsx("button",{onClick:()=>m(h),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full transition-colors",children:s.jsx(et,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>j(h),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:s.jsx(br,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx(rf,{className:"w-4 h-4 text-gray-400 mr-2 mt-0.5"}),s.jsx("span",{className:"text-sm text-gray-600",children:h.address})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Lo,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("span",{className:"text-sm text-gray-600",children:h.phone})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Si,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("span",{className:"text-sm text-gray-600",children:h.email})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Pi,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("span",{className:"text-sm text-gray-600",children:h.manager})]}),s.jsx("div",{className:"pt-2",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h.isActive?"Ativa":"Inativa"})})]})]},h.id))}),i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:l?"Editar Filial":"Nova Filial"}),s.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Nr,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Filial"}),s.jsx("input",{type:"text",value:c.name,onChange:h=>u({...c,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Filial Centro",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Código"}),s.jsx("input",{type:"text",value:c.code,onChange:h=>u({...c,code:h.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: FIL001",maxLength:10,required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereço"}),s.jsx("input",{type:"text",value:c.address,onChange:h=>u({...c,address:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Rua, número, bairro, cidade",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),s.jsx("input",{type:"text",value:c.phone,onChange:h=>x(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"(11) 99999-9999",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:c.email,onChange:h=>u({...c,email:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"filial@empresa.com",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gerente"}),s.jsx("input",{type:"text",value:c.manager,onChange:h=>u({...c,manager:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Nome do gerente",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cor de Identificação"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(h=>s.jsx("button",{type:"button",onClick:()=>u({...c,color:h}),className:`w-10 h-10 rounded-full border-2 transition-all ${c.color===h?"border-gray-800 scale-110":"border-gray-300"}`,style:{backgroundColor:h}},h))})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isActive",checked:c.isActive,onChange:h=>u({...c,isActive:h.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"Filial ativa"})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:y,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[l?"Atualizar":"Criar"," Filial"]})]})]})]})})]})},Lx=()=>{const{levels:e,addLevel:t,updateLevel:r,deleteLevel:n}=Sr(),[i,a]=P.useState(!1),[l,o]=P.useState(null),[c,u]=P.useState({name:"",color:"#3B82F6",icon:"award",order:1,requirements:{minPoints:0,minPurchaseValue:0,timeframe:0},benefits:{pointsMultiplier:1,referralBonus:1,freeShipping:!1,exclusiveEvents:!1,customRewards:[]}}),[d,f]=P.useState(""),m={award:Wr,star:qe,crown:Ol,trophy:Dl,gem:hu},y=[{value:"award",label:"Prêmio",icon:Wr},{value:"star",label:"Estrela",icon:qe},{value:"crown",label:"Coroa",icon:Ol},{value:"trophy",label:"Troféu",icon:Dl},{value:"gem",label:"Gema",icon:hu}],p=["#CD7F32","#C0C0C0","#FFD700","#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899"],j=()=>{u({name:"",color:"#3B82F6",icon:"award",order:e.length+1,requirements:{minPoints:0,minPurchaseValue:0,timeframe:0},benefits:{pointsMultiplier:1,referralBonus:1,freeShipping:!1,exclusiveEvents:!1,customRewards:[]}}),f("")},N=w=>{w?(o(w),u({name:w.name,color:w.color,icon:w.icon,order:w.order,requirements:w.requirements,benefits:w.benefits})):(o(null),j()),a(!0)},x=()=>{a(!1),o(null),j()},h=w=>{if(w.preventDefault(),!c.name.trim()){alert("Nome do nível é obrigatório");return}const C={...c,requirements:{minPoints:c.requirements.minPoints||void 0,minPurchaseValue:c.requirements.minPurchaseValue||void 0,timeframe:c.requirements.timeframe||void 0}};l?r(l.id,C):t(C),x()},g=()=>{d.trim()&&(u({...c,benefits:{...c.benefits,customRewards:[...c.benefits.customRewards,d.trim()]}}),f(""))},v=w=>{u({...c,benefits:{...c.benefits,customRewards:c.benefits.customRewards.filter((C,R)=>R!==w)}})},k=w=>{confirm(`Tem certeza que deseja deletar o nível "${w.name}"?`)&&n(w.id)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Níveis de Clientes"}),s.jsxs("button",{onClick:()=>N(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[s.jsx(tr,{className:"w-4 h-4 mr-2"}),"Novo Nível"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(w=>{var R;const C=m[w.icon]||Wr;return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:w.color+"20"},children:s.jsx(C,{className:"w-6 h-6",style:{color:w.color}})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:w.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Ordem: ",w.order]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>N(w),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full transition-colors",children:s.jsx(et,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>k(w),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:s.jsx(br,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Requisitos"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Mínimo: ",((R=w.requirements.minPoints)==null?void 0:R.toLocaleString())||0," pontos"]}),w.requirements.minPurchaseValue&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Compra mínima: R$ ",w.requirements.minPurchaseValue.toLocaleString()]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Benefícios"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("li",{children:["• ",w.benefits.pointsMultiplier,"x pontos em compras"]}),s.jsxs("li",{children:["• ",w.benefits.referralBonus,"x pontos em indicações"]}),w.benefits.freeShipping&&s.jsx("li",{children:"• Frete grátis"}),w.benefits.exclusiveEvents&&s.jsx("li",{children:"• Eventos exclusivos"}),w.benefits.customRewards.map((U,O)=>s.jsxs("li",{children:["• ",U]},O))]})]})]})]},w.id)})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Resumo dos Níveis"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nível"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requisitos"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Multiplicador"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Benefícios"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(w=>{var R;const C=m[w.icon]||Wr;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:w.color+"20"},children:s.jsx(C,{className:"w-4 h-4",style:{color:w.color}})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.name}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Ordem ",w.order]})]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[((R=w.requirements.minPoints)==null?void 0:R.toLocaleString())||0," pontos"]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[w.benefits.pointsMultiplier,"x"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[w.benefits.freeShipping&&s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Frete grátis"}),w.benefits.exclusiveEvents&&s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Eventos"})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[s.jsx("button",{onClick:()=>N(w),className:"text-blue-600 hover:text-blue-900 mr-4",children:s.jsx(et,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>k(w),className:"text-red-600 hover:text-red-900",children:s.jsx(br,{className:"w-4 h-4"})})]})]},w.id)})})]})})]}),i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:l?"Editar Nível":"Novo Nível"}),s.jsx("button",{onClick:x,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Nr,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Nível"}),s.jsx("input",{type:"text",value:c.name,onChange:w=>u({...c,name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Bronze, Prata, Ouro",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ordem"}),s.jsx("input",{type:"number",value:c.order,onChange:w=>u({...c,order:Number(w.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ícone"}),s.jsx("div",{className:"grid grid-cols-5 gap-3",children:y.map(w=>{const C=w.icon;return s.jsxs("button",{type:"button",onClick:()=>u({...c,icon:w.value}),className:`p-3 border-2 rounded-lg flex flex-col items-center justify-center transition-colors ${c.icon===w.value?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[s.jsx(C,{className:"w-6 h-6 mb-1"}),s.jsx("span",{className:"text-xs",children:w.label})]},w.value)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cor"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(w=>s.jsx("button",{type:"button",onClick:()=>u({...c,color:w}),className:`w-10 h-10 rounded-full border-2 transition-all ${c.color===w?"border-gray-800 scale-110":"border-gray-300"}`,style:{backgroundColor:w}},w))})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Requisitos"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pontos Mínimos"}),s.jsx("input",{type:"number",value:c.requirements.minPoints||"",onChange:w=>u({...c,requirements:{...c.requirements,minPoints:Number(w.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compra Mínima (R$)"}),s.jsx("input",{type:"number",value:c.requirements.minPurchaseValue||"",onChange:w=>u({...c,requirements:{...c.requirements,minPurchaseValue:Number(w.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Período (dias)"}),s.jsx("input",{type:"number",value:c.requirements.timeframe||"",onChange:w=>u({...c,requirements:{...c.requirements,timeframe:Number(w.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Benefícios"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Multiplicador de Pontos"}),s.jsx("input",{type:"number",value:c.benefits.pointsMultiplier,onChange:w=>u({...c,benefits:{...c.benefits,pointsMultiplier:Number(w.target.value)||1}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1",step:"0.1",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bônus de Indicação"}),s.jsx("input",{type:"number",value:c.benefits.referralBonus,onChange:w=>u({...c,benefits:{...c.benefits,referralBonus:Number(w.target.value)||1}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1",step:"0.1",required:!0})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"freeShipping",checked:c.benefits.freeShipping,onChange:w=>u({...c,benefits:{...c.benefits,freeShipping:w.target.checked}}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"freeShipping",className:"ml-2 block text-sm text-gray-900",children:"Frete grátis"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"exclusiveEvents",checked:c.benefits.exclusiveEvents,onChange:w=>u({...c,benefits:{...c.benefits,exclusiveEvents:w.target.checked}}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"exclusiveEvents",className:"ml-2 block text-sm text-gray-900",children:"Eventos exclusivos"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recompensas Personalizadas"}),s.jsxs("div",{className:"space-y-2",children:[c.benefits.customRewards.map((w,C)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"flex-1 px-3 py-2 bg-gray-50 rounded-lg text-sm",children:w}),s.jsx("button",{type:"button",onClick:()=>v(C),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:s.jsx(Nr,{className:"w-4 h-4"})})]},C)),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"text",value:d,onChange:w=>f(w.target.value),placeholder:"Digite uma recompensa personalizada",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",onKeyPress:w=>{w.key==="Enter"&&(w.preventDefault(),g())}}),s.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Adicionar"})]})]})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[l?"Atualizar":"Criar"," Nível"]})]})]})]})})]})},Fx=({customer:e,movement:t,onClose:r})=>{const{settings:n}=$t(),i=c=>`${c.firstName} ${c.lastName}`.trim(),a=c=>new Date(c).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),l=()=>{window.print()},o=({viaNumber:c})=>s.jsxs("div",{className:"receipt-content bg-white p-6 border border-gray-300 rounded-lg mb-4",children:[s.jsxs("div",{className:"text-center border-b border-gray-200 pb-4 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-center mb-2",children:[s.jsx(We,{className:"w-8 h-8 text-blue-600 mr-2"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.company.name})]}),s.jsx("p",{className:"text-sm text-gray-600",children:n.program.name}),s.jsx("p",{className:"text-xs text-gray-500",children:n.company.website}),s.jsx("div",{className:"mt-2 text-xs text-gray-500",children:s.jsxs("strong",{children:["COMPROVANTE DE RESGATE - ",c,"ª VIA"]})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-2 flex items-center",children:[s.jsx(Pi,{className:"w-4 h-4 mr-1"}),"Dados do Cliente"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Nome:"})," ",i(e)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"CPF:"})," ",e.document]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Email:"})," ",e.email]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Telefone:"})," ",e.phone]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Nível:"}),s.jsx("span",{className:"ml-1 px-2 py-0.5 rounded text-xs font-medium",style:{backgroundColor:e.level.color+"20",color:e.level.color},children:e.level.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Pontos Disponíveis:"})," ",e.points.toLocaleString()]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-2 flex items-center",children:[s.jsx(We,{className:"w-4 h-4 mr-1"}),"Detalhes do Resgate"]}),s.jsx("div",{className:"bg-gray-50 p-3 rounded",children:s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Descrição:"})," ",t.description]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Pontos Resgatados:"}),s.jsxs("span",{className:"text-red-600 font-bold",children:[Math.abs(t.points)," pontos"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Data/Hora:"})," ",a(t.date)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Referência:"})," ",t.reference||"N/A"]}),t.couponCode&&s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"font-medium",children:"Código do Cupom:"}),s.jsx("span",{className:"ml-1 px-2 py-1 bg-blue-100 text-blue-800 rounded font-mono text-sm",children:t.couponCode})]})]})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-2 flex items-center",children:[s.jsx(qe,{className:"w-4 h-4 mr-1"}),"Saldo Atualizado"]}),s.jsx("div",{className:"bg-blue-50 p-3 rounded",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-gray-600",children:"Saldo atual de pontos:"}),s.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[(e.points+t.points).toLocaleString()," pontos"]})]})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-2 flex items-center",children:[s.jsx(Mo,{className:"w-4 h-4 mr-1"}),"Informações Importantes"]}),s.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[s.jsx("p",{children:"• Este comprovante é válido como prova de resgate de pontos"}),s.jsx("p",{children:"• Guarde este comprovante para seus registros"}),s.jsx("p",{children:"• Em caso de dúvidas, entre em contato conosco"}),t.couponCode&&s.jsx("p",{children:"• O código do cupom deve ser apresentado no momento da compra"}),n.program.pointsExpiration.enabled&&s.jsxs("p",{children:["• Pontos expiram em ",n.program.pointsExpiration.days," dias"]})]})]}),s.jsx("div",{className:"border-t border-gray-200 pt-4 text-center",children:s.jsxs("div",{className:"text-xs text-gray-500",children:[s.jsx("p",{children:n.company.address}),s.jsxs("p",{className:"mt-1",children:[s.jsx("span",{className:"font-medium",children:"Data de Emissão:"})," ",a(new Date().toISOString())]}),s.jsx("p",{className:"mt-2 text-xs",children:s.jsx("strong",{children:"Obrigado por participar do nosso programa de fidelidade!"})})]})})]});return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"no-print flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Comprovante de Resgate"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:l,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[s.jsx(bx,{className:"w-4 h-4 mr-2"}),"Imprimir"]}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Nr,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"p-6",children:[s.jsx(o,{viaNumber:1}),s.jsx("div",{className:"print-only border-t-2 border-dashed border-gray-400 my-4 page-break"}),s.jsx(o,{viaNumber:2})]})]})})};function zx(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let r="";for(let n=0;n<e;n++){const i=Math.floor(Math.random()*t.length);r+=t[i]}return r}function mu(e="online"){const t=Date.now().toString(36).toUpperCase(),r=zx(6);return`${e==="online"?"ON":"OF"}-${t}-${r}`}const Ux=()=>{const{movements:e,branches:t,addMovement:r}=$t(),{customers:n,updateCustomer:i,findCustomerByDocument:a}=Sr(),[l,o]=P.useState(""),[c,u]=P.useState("all"),[d,f]=P.useState(!1),[m,y]=P.useState(null),[p,j]=P.useState(""),[N,x]=P.useState(null),[h,g]=P.useState(null),[v,k]=P.useState({type:"earn",points:0,description:"",reference:"",couponCode:""}),[w,C]=P.useState(!1),[R,U]=P.useState(null),O=I=>`${I.firstName} ${I.lastName}`.trim(),le=e.filter(I=>{const H=n.find(G=>G.id===I.customerId),he=H&&O(H).toLowerCase().includes(l.toLowerCase())||I.description.toLowerCase().includes(l.toLowerCase()),b=c==="all"||I.type===c;return he&&b}),X=I=>{const H=I.replace(/[^\d]/g,"");let he=H;if(H.length>=4&&(he=H.replace(/(\d{3})(\d{1,3})/,"$1.$2")),H.length>=7&&(he=H.replace(/(\d{3})\.(\d{3})(\d{1,3})/,"$1.$2.$3")),H.length>=10&&(he=H.replace(/(\d{3})\.(\d{3})\.(\d{3})(\d{1,2})/,"$1.$2.$3-$4")),j(he),H.length===11){const b=a(H);x(b||null)}else x(null)},_=()=>{j(""),x(null),g(null),k({type:"earn",points:0,description:"",reference:"",couponCode:""})},T=()=>{y("add_points"),j(""),x(null),g(null),k({type:"earn",points:0,description:"",reference:"",couponCode:""}),f(!0)},L=()=>{y("redeem_offline");const I=mu("offline");j(""),x(null),g(null),k({type:"redeem",points:100,description:"Resgate offline: Desconto R$ 10,00",reference:"",couponCode:I}),f(!0)},ue=()=>{y("redeem_online");const I=mu("online");j(""),x(null),g(null),k({type:"redeem",points:100,description:"Resgate online: Desconto R$ 10,00",reference:"",couponCode:I}),f(!0)},Re=()=>{f(!1),y(null),_()},A=()=>{if(N&&h&&v.points&&v.description){const I={customerId:N.id,customerDocument:N.document,branchId:h.id,type:v.type,points:v.type==="redeem"?-Math.abs(v.points):v.points,description:v.description,date:new Date().toISOString().split("T")[0],reference:v.reference||void 0,couponCode:v.couponCode||void 0};r(I);const H=v.type==="redeem"?-Math.abs(v.points):v.points;if(i(N.id,{points:N.points+H}),v.type==="redeem"){const he={...I,id:Date.now().toString()};U({customer:N,movement:he}),C(!0)}Re()}},D=()=>{C(!1),U(null)},z=I=>{switch(I){case"earn":return s.jsx(vt,{className:"w-5 h-5 text-green-600"});case"redeem":return s.jsx(We,{className:"w-5 h-5 text-red-600"});case"admin_adjust":return s.jsx(et,{className:"w-5 h-5 text-blue-600"});default:return s.jsx(vt,{className:"w-5 h-5 text-gray-600"})}},Q=I=>{switch(I){case"earn":return"Ganho";case"redeem":return"Resgate";case"admin_adjust":return"Ajuste Admin";case"referral":return"Indicação";case"expire":return"Expiração";case"refund":return"Reembolso";default:return I}},K=I=>{const H=t.find(he=>he.id===I);return H?H.name:"Filial não encontrada"},ft=()=>{switch(m){case"add_points":return"Registrar Nova Compra";case"redeem_offline":return"Resgate Offline";case"redeem_online":return"Resgate Online";default:return"Nova Movimentação"}},ze=()=>{switch(m){case"add_points":return"Registrar Compra";case"redeem_offline":return"Confirmar Resgate";case"redeem_online":return"Gerar Cupom";default:return"Adicionar"}},wt=()=>N&&h&&v.points>0&&v.description.trim();return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Movimentos de Pontos"}),s.jsxs("button",{onClick:T,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[s.jsx(tr,{className:"w-4 h-4 mr-2"}),"Nova Movimentação"]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Fo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Buscar por cliente ou descrição...",value:l,onChange:I=>o(I.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("select",{value:c,onChange:I=>u(I.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Todos os Tipos"}),s.jsx("option",{value:"earn",children:"Ganho"}),s.jsx("option",{value:"redeem",children:"Resgate"}),s.jsx("option",{value:"admin_adjust",children:"Ajuste Admin"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Resgate Offline"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Gerar cupom para impressão"})]}),s.jsx(Nx,{className:"w-8 h-8 text-blue-600"})]}),s.jsx("button",{onClick:L,className:"mt-4 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Iniciar Resgate"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Resgate Online"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Gerar cupom digital"})]}),s.jsx(nf,{className:"w-8 h-8 text-green-600"})]}),s.jsx("button",{onClick:ue,className:"mt-4 w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Gerar Cupom"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Acumular Pontos"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Registrar compra"})]}),s.jsx(vt,{className:"w-8 h-8 text-yellow-600"})]}),s.jsx("button",{onClick:T,className:"mt-4 w-full bg-yellow-600 text-white py-2 rounded-lg hover:bg-yellow-700 transition-colors",children:"Registrar Compra"})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Filial"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrição"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pontos"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referência"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:le.map(I=>{const H=n.find(he=>he.id===I.customerId);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(I.date).toLocaleDateString("pt-BR")}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:H?O(H):"Cliente não encontrado"}),s.jsx("div",{className:"text-sm text-gray-500",children:H==null?void 0:H.email})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:K(I.branchId)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[z(I.type),s.jsx("span",{className:"ml-2 text-sm text-gray-900",children:Q(I.type)})]})}),s.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:[I.description,I.couponCode&&s.jsxs("div",{className:"text-xs text-blue-600 mt-1 font-mono",children:["Cupom: ",I.couponCode]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`text-sm font-semibold ${I.points>0?"text-green-600":"text-red-600"}`,children:[I.points>0?"+":"",I.points]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.reference||"-"})]},I.id)})})]})})}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:ft()}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF do Cliente"}),s.jsx("input",{type:"text",value:p,onChange:I=>X(I.target.value),placeholder:"000.000.000-00",maxLength:14,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),p.replace(/[^\d]/g,"").length===11&&s.jsx("div",{className:"mt-2",children:N?s.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:s.jsxs("span",{className:"text-sm font-medium text-green-600",children:[N.firstName.charAt(0),N.lastName.charAt(0)]})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:O(N)}),s.jsxs("p",{className:"text-xs text-green-600",children:[N.email," • ",N.points," pontos"]})]})]})}):s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-800",children:"Cliente não encontrado com este CPF"})})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filial"}),s.jsxs("select",{value:(h==null?void 0:h.id)||"",onChange:I=>{const H=t.find(he=>he.id===I.target.value);g(H||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Selecione uma filial"}),t.filter(I=>I.isActive).map(I=>s.jsxs("option",{value:I.id,children:[I.name," (",I.code,")"]},I.id))]}),!h&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Selecione a filial onde a movimentação está sendo realizada"})]}),!m&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),s.jsxs("select",{value:v.type,onChange:I=>k({...v,type:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"earn",children:"Ganho"}),s.jsx("option",{value:"redeem",children:"Resgate"}),s.jsx("option",{value:"admin_adjust",children:"Ajuste Admin"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:m==="add_points"?"Pontos Ganhos":"Pontos"}),s.jsx("input",{type:"number",value:v.points,onChange:I=>k({...v,points:Number(I.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),s.jsx("input",{type:"text",value:v.description,onChange:I=>k({...v,description:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:m==="add_points"?"Ex: Compra no valor de R$ 150,00":m==="redeem_offline"?"Ex: Resgate offline: Desconto R$ 10,00":m==="redeem_online"?"Ex: Resgate online: Desconto R$ 10,00":"Descrição da movimentação"})]}),m==="add_points"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referência (opcional)"}),s.jsx("input",{type:"text",value:v.reference,onChange:I=>k({...v,reference:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Pedido #12345"})]}),(m==="redeem_offline"||m==="redeem_online")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código do Cupom"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:v.couponCode,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm"}),s.jsx("div",{className:"absolute right-2 top-2",children:s.jsx("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:"Único"})})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Código único gerado automaticamente para este resgate"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:Re,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:A,disabled:!wt(),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:ze()})]})]})}),w&&R&&s.jsx(Fx,{customer:R.customer,movement:R.movement,onClose:D})]})},Bx=()=>{const{rewards:e}=$t(),[t,r]=P.useState(!1),[n,i]=P.useState(null),[a,l]=P.useState({name:"",description:"",pointsCost:0,type:"discount",value:0,isActive:!0,expirationDays:30}),o=()=>{r(!1),i(null),l({name:"",description:"",pointsCost:0,type:"discount",value:0,isActive:!0,expirationDays:30})},c=d=>{switch(d){case"discount":return"Desconto";case"product":return"Produto";case"service":return"Serviço";case"custom":return"Personalizado";default:return d}},u=d=>{switch(d){case"discount":return s.jsx(We,{className:"w-5 h-5 text-green-600"});case"product":return s.jsx(qe,{className:"w-5 h-5 text-blue-600"});case"service":return s.jsx(tf,{className:"w-5 h-5 text-purple-600"});default:return s.jsx(We,{className:"w-5 h-5 text-gray-600"})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Recompensas"}),s.jsxs("button",{onClick:()=>r(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[s.jsx(tr,{className:"w-4 h-4 mr-2"}),"Nova Recompensa"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Configuração de Pontos"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pontos por Real (R$)"}),s.jsx("input",{type:"number",defaultValue:1,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quantos pontos vale cada R$1,00 gasto"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Mínimo de Compra (R$)"}),s.jsx("input",{type:"number",defaultValue:50,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Valor mínimo para acumular pontos"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiração de Pontos (dias)"}),s.jsx("input",{type:"number",defaultValue:365,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dias para expiração dos pontos"})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(d=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[u(d.type),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d.name}),s.jsx("p",{className:"text-sm text-gray-500",children:c(d.type)})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[d.isActive?s.jsx(Ci,{className:"w-4 h-4 text-green-600"}):s.jsx(_i,{className:"w-4 h-4 text-gray-400"}),s.jsx("button",{onClick:()=>{i(d),r(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full transition-colors",children:s.jsx(et,{className:"w-4 h-4"})}),s.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:s.jsx(br,{className:"w-4 h-4"})})]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:d.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Custo:"}),s.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[d.pointsCost," pontos"]})]}),d.type==="discount"&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Desconto:"}),s.jsxs("span",{className:"text-sm font-bold text-green-600",children:["R$ ",d.value]})]}),d.expirationDays&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Validade:"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[d.expirationDays," dias"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),s.jsx("span",{className:`text-sm font-medium ${d.isActive?"text-green-600":"text-red-600"}`,children:d.isActive?"Ativa":"Inativa"})]})]})]},d.id))}),t&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:n?"Editar Recompensa":"Nova Recompensa"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),s.jsx("input",{type:"text",value:n?n.name:a.name,onChange:d=>n?i({...n,name:d.target.value}):l({...a,name:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),s.jsx("textarea",{value:n?n.description:a.description,onChange:d=>n?i({...n,description:d.target.value}):l({...a,description:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),s.jsxs("select",{value:n?n.type:a.type,onChange:d=>n?i({...n,type:d.target.value}):l({...a,type:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"discount",children:"Desconto"}),s.jsx("option",{value:"product",children:"Produto"}),s.jsx("option",{value:"service",children:"Serviço"}),s.jsx("option",{value:"custom",children:"Personalizado"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custo em Pontos"}),s.jsx("input",{type:"number",value:n?n.pointsCost:a.pointsCost,onChange:d=>n?i({...n,pointsCost:Number(d.target.value)}):l({...a,pointsCost:Number(d.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor (R$)"}),s.jsx("input",{type:"number",value:n?n.value:a.value,onChange:d=>n?i({...n,value:Number(d.target.value)}):l({...a,value:Number(d.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Validade (dias)"}),s.jsx("input",{type:"number",value:n?n.expirationDays||30:a.expirationDays,onChange:d=>n?i({...n,expirationDays:Number(d.target.value)}):l({...a,expirationDays:Number(d.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isActive",checked:n?n.isActive:a.isActive,onChange:d=>n?i({...n,isActive:d.target.checked}):l({...a,isActive:d.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"Recompensa ativa"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{r(!1),i(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:o,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar"})]})]})})]})},Vx=()=>{var he;const{referrals:e,referralTypes:t,addReferralType:r,updateReferralType:n,deleteReferralType:i,addReferral:a}=$t(),{customers:l,findCustomerByDocument:o}=Sr(),[c,u]=P.useState("list"),[d,f]=P.useState(!1),[m,y]=P.useState(!1),[p,j]=P.useState(null),[N,x]=P.useState({name:"",description:"",icon:"user-plus",color:"#3B82F6",isActive:!0,methods:["email"],referrerReward:{type:"points",value:0,description:""},referredReward:{type:"points",value:0,description:""},conditions:{minPurchaseValue:0,validityDays:30,maxReferrals:0,requiresFirstPurchase:!1}}),[h,g]=P.useState({referrerDocument:"",referredIdentifier:"",referredIdentifierType:"email",referralTypeId:"",method:"email"}),[v,k]=P.useState(null),[w,C]=P.useState(null),[R,U]=P.useState(null),[O,le]=P.useState(""),[X,_]=P.useState("all"),T=b=>`${b.firstName} ${b.lastName}`.trim(),L=e.filter(b=>{const G=l.find(E=>E.id===b.referrerId),fe=(G?T(G):"").toLowerCase().includes(O.toLowerCase())||b.referrerDocument.includes(O)||b.referredIdentifier.toLowerCase().includes(O.toLowerCase()),jt=X==="all"||b.status===X;return fe&&jt}),ue=b=>{switch(b){case"validated":return s.jsx(en,{className:"w-5 h-5 text-green-600"});case"rejected":return s.jsx(Nr,{className:"w-5 h-5 text-red-600"});case"pending":return s.jsx(Aa,{className:"w-5 h-5 text-yellow-600"});default:return s.jsx(Aa,{className:"w-5 h-5 text-gray-600"})}},Re=b=>{switch(b){case"validated":return"Validada";case"rejected":return"Rejeitada";case"pending":return"Pendente";default:return b}},A=b=>{switch(b){case"email":return s.jsx(Si,{className:"w-4 h-4"});case"whatsapp":return s.jsx(Ei,{className:"w-4 h-4"});case"sms":return s.jsx(af,{className:"w-4 h-4"});case"qrcode":return s.jsx(nf,{className:"w-4 h-4"});default:return s.jsx(Gr,{className:"w-4 h-4"})}},D=b=>{switch(b){case"crown":return s.jsx(Ol,{className:"w-5 h-5"});case"heart":return s.jsx(xx,{className:"w-5 h-5"});case"building":return s.jsx(Ni,{className:"w-5 h-5"});case"gift":return s.jsx(We,{className:"w-5 h-5"});case"star":return s.jsx(qe,{className:"w-5 h-5"});case"award":return s.jsx(Wr,{className:"w-5 h-5"});case"trophy":return s.jsx(Dl,{className:"w-5 h-5"});default:return s.jsx(Gr,{className:"w-5 h-5"})}},z=b=>{switch(b){case"fixed":return"Valor Fixo (R$)";case"percentage":return"Percentual (%)";case"points":return"Pontos";case"gift":return"Brinde";default:return b}},Q=()=>{p?n(p.id,N):r(N),f(!1),j(null),x({name:"",description:"",icon:"user-plus",color:"#3B82F6",isActive:!0,methods:["email"],referrerReward:{type:"points",value:0,description:""},referredReward:{type:"points",value:0,description:""},conditions:{minPurchaseValue:0,validityDays:30,maxReferrals:0,requiresFirstPurchase:!1}})},K=b=>{j(b),x({name:b.name,description:b.description,icon:b.icon,color:b.color,isActive:b.isActive,methods:b.methods,referrerReward:b.referrerReward,referredReward:b.referredReward,conditions:b.conditions||{minPurchaseValue:0,validityDays:30,maxReferrals:0,requiresFirstPurchase:!1}}),f(!0)},ft=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1","#FFD700","#CD7F32"],ze=[{value:"user-plus",label:"Usuário Plus"},{value:"crown",label:"Coroa"},{value:"heart",label:"Coração"},{value:"building",label:"Prédio"},{value:"gift",label:"Presente"},{value:"star",label:"Estrela"},{value:"award",label:"Prêmio"},{value:"trophy",label:"Troféu"}],wt=b=>{const G=b.replace(/[^\d]/g,"");let Ae=G;if(G.length>=4&&(Ae=G.replace(/(\d{3})(\d{1,3})/,"$1.$2")),G.length>=7&&(Ae=G.replace(/(\d{3})\.(\d{3})(\d{1,3})/,"$1.$2.$3")),G.length>=10&&(Ae=G.replace(/(\d{3})\.(\d{3})\.(\d{3})(\d{1,2})/,"$1.$2.$3-$4")),g({...h,referrerDocument:Ae}),C(null),G.length===11){const fe=o(G);fe?(k(fe),C(null)):(k(null),C("Cliente não encontrado com este CPF."))}else k(null)},I=async()=>{if(!v){C("Selecione um cliente indicador válido.");return}if(!h.referredIdentifier.trim()){U("Identificador do indicado é obrigatório.");return}if(!h.referralTypeId){alert("Selecione um tipo de indicação.");return}if(!h.method){alert("Selecione um método de indicação.");return}const b={referrerId:v.id,referrerDocument:v.document,referredId:null,referredDocument:null,referredIdentifier:h.referredIdentifier,referredIdentifierType:h.referredIdentifierType,referralTypeId:h.referralTypeId,status:"pending",date:new Date().toISOString().split("T")[0],method:h.method,validatedDate:void 0,rejectedReason:void 0,purchaseValue:void 0};try{await a(b),y(!1),g({referrerDocument:"",referredIdentifier:"",referredIdentifierType:"email",referralTypeId:"",method:"email"}),k(null),C(null),U(null),alert("Indicação adicionada com sucesso!")}catch(G){console.error("Erro ao adicionar indicação:",G),alert("Erro ao adicionar indicação. Verifique o console para mais detalhes.")}},H=()=>{y(!1),g({referrerDocument:"",referredIdentifier:"",referredIdentifierType:"email",referralTypeId:"",method:"email"}),k(null),C(null),U(null)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sistema de Indicações"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>u("list"),className:`px-4 py-2 rounded-lg transition-colors ${c==="list"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Indicações"}),s.jsx("button",{onClick:()=>u("types"),className:`px-4 py-2 rounded-lg transition-colors ${c==="types"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Tipos de Indicação"}),s.jsx("button",{onClick:()=>u("config"),className:`px-4 py-2 rounded-lg transition-colors ${c==="config"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Configurações"})]})]}),c==="list"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Gr,{className:"w-5 h-5 text-blue-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total de Indicações"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(en,{className:"w-5 h-5 text-green-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Validadas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(b=>b.status==="validated").length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx(Aa,{className:"w-5 h-5 text-yellow-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pendentes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(b=>b.status==="pending").length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(We,{className:"w-5 h-5 text-purple-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tipos Ativos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.filter(b=>b.isActive).length})]})]})})]}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Fo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Buscar por CPF ou identificador...",value:O,onChange:b=>le(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gx,{className:"w-4 h-4 text-gray-400"}),s.jsxs("select",{value:X,onChange:b=>_(b.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Todos os status"}),s.jsx("option",{value:"pending",children:"Pendentes"}),s.jsx("option",{value:"validated",children:"Validadas"}),s.jsx("option",{value:"rejected",children:"Rejeitadas"})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Lista de Indicações"}),s.jsxs("button",{onClick:()=>y(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[s.jsx(tr,{className:"w-4 h-4"}),"Nova Indicação"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Indicador"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Indicado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Método"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(b=>{const G=l.find(jt=>jt.id===b.referrerId),Ae=l.find(jt=>jt.id===b.referredId),fe=t.find(jt=>jt.id===b.referralTypeId);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(b.date).toLocaleDateString("pt-BR")}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:G?T(G):"N/A"}),s.jsx("div",{className:"text-sm text-gray-500",children:b.referrerDocument})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ae?T(Ae):b.referredIdentifier}),s.jsx("div",{className:"text-sm text-gray-500",children:b.referredDocument||b.referredIdentifierType})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center mr-2",style:{backgroundColor:(fe==null?void 0:fe.color)+"20"},children:s.jsx("div",{style:{color:fe==null?void 0:fe.color},children:D((fe==null?void 0:fe.icon)||"user-plus")})}),s.jsx("span",{className:"text-sm text-gray-900",children:fe==null?void 0:fe.name})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[A(b.method),s.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:b.method})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[ue(b.status),s.jsx("span",{className:"ml-2 text-sm text-gray-900",children:Re(b.status)})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:b.status==="pending"&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"text-green-600 hover:text-green-900",children:s.jsx(en,{className:"w-4 h-4"})}),s.jsx("button",{className:"text-red-600 hover:text-red-900",children:s.jsx(Nr,{className:"w-4 h-4"})})]})})]},b.id)})})]})}),L.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Gr,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nenhuma indicação encontrada"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:O||X!=="all"?"Tente ajustar os filtros de busca.":"Comece criando uma nova indicação."})]})]})]}),c==="types"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Tipos de Indicação"}),s.jsxs("button",{onClick:()=>f(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[s.jsx(tr,{className:"w-4 h-4 mr-2"}),"Novo Tipo"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(b=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:b.color+"20"},children:s.jsx("div",{style:{color:b.color},children:D(b.icon)})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:b.name}),s.jsxs("div",{className:"flex items-center mt-1",children:[b.isActive?s.jsx(Ci,{className:"w-4 h-4 text-green-600 mr-1"}):s.jsx(_i,{className:"w-4 h-4 text-gray-400 mr-1"}),s.jsx("span",{className:`text-sm ${b.isActive?"text-green-600":"text-gray-400"}`,children:b.isActive?"Ativo":"Inativo"})]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>K(b),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full transition-colors",children:s.jsx(et,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>i(b.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:s.jsx(br,{className:"w-4 h-4"})})]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:b.description}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Recompensa do Indicador"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[z(b.referrerReward.type),": ",b.referrerReward.value]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:b.referrerReward.description})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Recompensa do Indicado"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[z(b.referredReward.type),": ",b.referredReward.value]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:b.referredReward.description})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Métodos Disponíveis"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:b.methods.map(G=>s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[A(G),s.jsx("span",{className:"ml-1 capitalize",children:G})]},G))})]}),b.conditions&&s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Condições"}),s.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[b.conditions.minPurchaseValue&&s.jsxs("div",{children:["• Compra mínima: R$ ",b.conditions.minPurchaseValue]}),b.conditions.validityDays&&s.jsxs("div",{children:["• Validade: ",b.conditions.validityDays," dias"]}),b.conditions.maxReferrals&&s.jsxs("div",{children:["• Máximo: ",b.conditions.maxReferrals," indicações"]}),b.conditions.requiresFirstPurchase&&s.jsx("div",{children:"• Requer primeira compra"})]})]})]})]},b.id))})]}),c==="config"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Configurações Gerais"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Validação Automática"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"manual",children:"Manual"}),s.jsx("option",{value:"first_purchase",children:"Após primeira compra"}),s.jsx("option",{value:"immediate",children:"Imediata"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Limite Global de Indicações por Cliente"}),s.jsx("input",{type:"number",defaultValue:50,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"allowSelfReferral",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"allowSelfReferral",className:"ml-2 block text-sm text-gray-900",children:"Permitir auto-indicação (mesmo email/telefone)"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"trackReferralSource",defaultChecked:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"trackReferralSource",className:"ml-2 block text-sm text-gray-900",children:"Rastrear origem das indicações"})]}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Salvar Configurações"})})]})]}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:p?"Editar Tipo de Indicação":"Novo Tipo de Indicação"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),s.jsx("input",{type:"text",value:N.name,onChange:b=>x({...N,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ícone"}),s.jsx("select",{value:N.icon,onChange:b=>x({...N,icon:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:ze.map(b=>s.jsx("option",{value:b.value,children:b.label},b.value))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),s.jsx("textarea",{value:N.description,onChange:b=>x({...N,description:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cor"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ft.map(b=>s.jsx("button",{onClick:()=>x({...N,color:b}),className:`w-8 h-8 rounded-full border-2 ${N.color===b?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:b}},b))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Métodos de Indicação"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:["email","whatsapp","sms","qrcode"].map(b=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:N.methods.includes(b),onChange:G=>{G.target.checked?x({...N,methods:[...N.methods,b]}):x({...N,methods:N.methods.filter(Ae=>Ae!==b)})},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:b})]},b))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recompensa do Indicador"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),s.jsxs("select",{value:N.referrerReward.type,onChange:b=>x({...N,referrerReward:{...N.referrerReward,type:b.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"points",children:"Pontos"}),s.jsx("option",{value:"fixed",children:"Valor Fixo (R$)"}),s.jsx("option",{value:"percentage",children:"Percentual (%)"}),s.jsx("option",{value:"gift",children:"Brinde"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),s.jsx("input",{type:"number",value:N.referrerReward.value,onChange:b=>x({...N,referrerReward:{...N.referrerReward,value:Number(b.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),s.jsx("input",{type:"text",value:N.referrerReward.description,onChange:b=>x({...N,referrerReward:{...N.referrerReward,description:b.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recompensa do Indicado"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),s.jsxs("select",{value:N.referredReward.type,onChange:b=>x({...N,referredReward:{...N.referredReward,type:b.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"points",children:"Pontos"}),s.jsx("option",{value:"fixed",children:"Valor Fixo (R$)"}),s.jsx("option",{value:"percentage",children:"Percentual (%)"}),s.jsx("option",{value:"gift",children:"Brinde"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),s.jsx("input",{type:"number",value:N.referredReward.value,onChange:b=>x({...N,referredReward:{...N.referredReward,value:Number(b.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),s.jsx("input",{type:"text",value:N.referredReward.description,onChange:b=>x({...N,referredReward:{...N.referredReward,description:b.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Condições"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compra Mínima (R$)"}),s.jsx("input",{type:"number",value:N.conditions.minPurchaseValue,onChange:b=>x({...N,conditions:{...N.conditions,minPurchaseValue:Number(b.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Validade (dias)"}),s.jsx("input",{type:"number",value:N.conditions.validityDays,onChange:b=>x({...N,conditions:{...N.conditions,validityDays:Number(b.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Máximo de Indicações"}),s.jsx("input",{type:"number",value:N.conditions.maxReferrals,onChange:b=>x({...N,conditions:{...N.conditions,maxReferrals:Number(b.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"requiresFirstPurchase",checked:N.conditions.requiresFirstPurchase,onChange:b=>x({...N,conditions:{...N.conditions,requiresFirstPurchase:b.target.checked}}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"requiresFirstPurchase",className:"ml-2 block text-sm text-gray-900",children:"Requer primeira compra"})]})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isActive",checked:N.isActive,onChange:b=>x({...N,isActive:b.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"Tipo de indicação ativo"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{f(!1),j(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsxs("button",{onClick:Q,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[p?"Atualizar":"Criar"," Tipo"]})]})]})}),m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Nova Indicação"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF do Indicador"}),s.jsx("input",{type:"text",value:h.referrerDocument,onChange:b=>wt(b.target.value),placeholder:"000.000.000-00",maxLength:14,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${w?"border-red-500":"border-gray-300"}`}),v&&s.jsxs("p",{className:"mt-1 text-sm text-green-600",children:["Cliente: ",T(v)]}),w&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:w})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Identificador do Indicado"}),s.jsxs("select",{value:h.referredIdentifierType,onChange:b=>g({...h,referredIdentifierType:b.target.value,referredIdentifier:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"email",children:"E-mail"}),s.jsx("option",{value:"phone",children:"Telefone"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Identificador do Indicado"}),h.referredIdentifierType==="email"?s.jsx("input",{type:"email",value:h.referredIdentifier,onChange:b=>{g({...h,referredIdentifier:b.target.value}),U(null)},placeholder:"email@exemplo.com",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${R?"border-red-500":"border-gray-300"}`}):s.jsx(zo,{value:h.referredIdentifier,onChange:b=>{g({...h,referredIdentifier:b}),U(null)},error:R||void 0}),R&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:R})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Indicação"}),s.jsxs("select",{value:h.referralTypeId,onChange:b=>{const G=t.find(Ae=>Ae.id===b.target.value);g({...h,referralTypeId:b.target.value,method:(G==null?void 0:G.methods[0])||"email"})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Selecione um tipo"}),t.filter(b=>b.isActive).map(b=>s.jsx("option",{value:b.id,children:b.name},b.id))]})]}),h.referralTypeId&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Método de Indicação"}),s.jsx("select",{value:h.method,onChange:b=>g({...h,method:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:(he=t.find(b=>b.id===h.referralTypeId))==null?void 0:he.methods.map(b=>s.jsx("option",{value:b,children:b.charAt(0).toUpperCase()+b.slice(1)},b))})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:H,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:I,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",disabled:!v||!h.referredIdentifier.trim()||!h.referralTypeId||!h.method,children:"Adicionar Indicação"})]})]})})]})},qx=()=>{const[e,t]=P.useState("campaigns"),[r,n]=P.useState(!1),i=[{id:"1",name:"Boas-vindas Novos Clientes",type:"welcome",status:"active",sent:150,opened:120,clicked:45},{id:"2",name:"Pontos Prestes a Expirar",type:"expiration",status:"active",sent:89,opened:67,clicked:23}],a=[{id:"1",name:"Boas-vindas",channel:"email",subject:"Bem-vindo ao nosso programa de fidelidade!",preview:"Olá {nome}, seja bem-vindo ao nosso programa..."},{id:"2",name:"Pontos Expiração",channel:"whatsapp",subject:"Seus pontos vão expirar em breve",preview:"Oi {nome}! Você tem {pontos} pontos que expiram em {dias} dias..."}],l=[{id:"1",name:"Novo Cliente Cadastrado",trigger:"customer_registered",action:"send_welcome_email",status:"active"},{id:"2",name:"Pontos Próximos ao Vencimento",trigger:"points_expiring_soon",action:"send_expiration_warning",status:"active"}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Comunicação"}),s.jsxs("button",{onClick:()=>n(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[s.jsx(tr,{className:"w-4 h-4 mr-2"}),"Nova Campanha"]})]}),s.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>t("campaigns"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${e==="campaigns"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Campanhas"}),s.jsx("button",{onClick:()=>t("templates"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${e==="templates"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Templates"}),s.jsx("button",{onClick:()=>t("automation"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${e==="automation"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Automação"})]}),e==="campaigns"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(_x,{className:"w-5 h-5 text-blue-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Enviadas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"239"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Si,{className:"w-5 h-5 text-green-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Abertas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"187"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(Ei,{className:"w-5 h-5 text-purple-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Cliques"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"68"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx(tf,{className:"w-5 h-5 text-yellow-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Taxa de Abertura"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"78%"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Campanhas Ativas"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enviadas"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abertas"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliques"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(o=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.name})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.type==="welcome"?"Boas-vindas":"Expiração"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.status==="active"?"Ativa":"Inativa"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.sent}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.opened}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.clicked}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[s.jsx("button",{className:"text-blue-600 hover:text-blue-900 mr-4",children:s.jsx(et,{className:"w-4 h-4"})}),s.jsx("button",{className:"text-red-600 hover:text-red-900",children:s.jsx(br,{className:"w-4 h-4"})})]})]},o.id))})]})})]})]}),e==="templates"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Templates de Mensagem"})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map(o=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:o.name}),s.jsxs("div",{className:"flex items-center space-x-2",children:[o.channel==="email"&&s.jsx(Si,{className:"w-4 h-4 text-blue-600"}),o.channel==="whatsapp"&&s.jsx(Ei,{className:"w-4 h-4 text-green-600"}),o.channel==="sms"&&s.jsx(af,{className:"w-4 h-4 text-purple-600"}),s.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:s.jsx(et,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Assunto:"}),s.jsx("p",{className:"text-sm text-gray-600",children:o.subject})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Preview:"}),s.jsx("p",{className:"text-sm text-gray-600",children:o.preview})]})]})]},o.id))})})]})}),e==="automation"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Régua de Comunicação"})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-4",children:l.map(o=>s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:o.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Quando: ",o.trigger==="customer_registered"?"Cliente se cadastra":"Pontos próximos ao vencimento"]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Ação: ",o.action==="send_welcome_email"?"Enviar email de boas-vindas":"Enviar aviso de expiração"]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.status==="active"?"Ativa":"Inativa"}),s.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:s.jsx(et,{className:"w-4 h-4"})})]})]},o.id))})})]})})]})},Hx=()=>{const[e]=P.useState([{id:"1",title:"Criar a Conta (Cadastro Nível 1)",description:"Cliente realiza o cadastro básico com nome e email",icon:Pi,reward:{type:"points",value:100},completed:85,total:100,status:"active"},{id:"2",title:"Cadastro Nível 2",description:"Cliente completa cadastro com telefone, endereço e WhatsApp",icon:Lo,reward:{type:"points",value:200},completed:67,total:100,status:"active"},{id:"3",title:"Cadastro Nível 3",description:"Cliente informa preferências de produtos, marcas, serviços e cor de cabelo",icon:rf,reward:{type:"points",value:300},completed:23,total:100,status:"active"},{id:"4",title:"Review de Produtos",description:"Cliente avalia produtos comprados",icon:qe,reward:{type:"points",value:50},completed:45,total:100,status:"active"},{id:"5",title:"Comprar uma Categoria de Produtos",description:"Cliente realiza compra em categoria específica",icon:Sx,reward:{type:"points",value:500},completed:12,total:100,status:"active"}]),[t,r]=P.useState(!1),[n,i]=P.useState({title:"",description:"",rewardType:"points",rewardValue:0,target:100}),a=(l,o)=>Math.round(l/o*100);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Objetivos e Metas"}),s.jsxs("button",{onClick:()=>r(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[s.jsx(Js,{className:"w-4 h-4 mr-2"}),"Novo Objetivo"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Js,{className:"w-5 h-5 text-blue-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Objetivos Ativos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(ki,{className:"w-5 h-5 text-green-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Taxa de Conclusão"}),s.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[Math.round(e.reduce((l,o)=>l+a(o.completed,o.total),0)/e.length),"%"]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx(qe,{className:"w-5 h-5 text-yellow-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pontos Distribuídos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.reduce((l,o)=>l+o.reward.value*o.completed,0).toLocaleString()})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(Pi,{className:"w-5 h-5 text-purple-600"})})}),s.jsxs("div",{className:"ml-5",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Participantes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.reduce((l,o)=>l+o.completed,0)})]})]})})]}),s.jsx("div",{className:"space-y-4",children:e.map(l=>{const o=l.icon,c=a(l.completed,l.total);return s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(o,{className:"w-6 h-6 text-blue-600"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l.title}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:l.description}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Progresso"}),s.jsxs("span",{className:"font-medium text-gray-900",children:[l.completed,"/",l.total," (",c,"%)"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${c}%`}})})]}),s.jsxs("div",{className:"mt-3 flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(qe,{className:"w-4 h-4 text-yellow-500 mr-1"}),s.jsxs("span",{children:["Recompensa: ",l.reward.value," pontos"]})]}),s.jsx("div",{className:"flex items-center text-sm",children:l.status==="active"?s.jsxs(s.Fragment,{children:[s.jsx(ki,{className:"w-4 h-4 text-green-500 mr-1"}),s.jsx("span",{className:"text-green-600",children:"Ativo"})]}):s.jsxs(s.Fragment,{children:[s.jsx(px,{className:"w-4 h-4 text-gray-400 mr-1"}),s.jsx("span",{className:"text-gray-500",children:"Inativo"})]})})]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full transition-colors",children:s.jsx(Js,{className:"w-4 h-4"})})})]})},l.id)})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Jornada do Cliente"}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"flex items-center justify-between",children:e.map((l,o)=>{const c=l.icon,u=a(l.completed,l.total),d=u>=80;return s.jsxs("div",{className:"flex flex-col items-center relative",children:[o<e.length-1&&s.jsx("div",{className:"absolute top-6 left-full w-full h-0.5 bg-gray-200 z-0"}),s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center z-10 ${d?"bg-green-100 border-2 border-green-500":"bg-gray-100 border-2 border-gray-300"}`,children:s.jsx(c,{className:`w-6 h-6 ${d?"text-green-600":"text-gray-400"}`})}),s.jsxs("div",{className:"mt-3 text-center max-w-24",children:[s.jsx("p",{className:"text-xs font-medium text-gray-900 leading-tight",children:l.title.split(" ").slice(0,2).join(" ")}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[u,"%"]})]})]},l.id)})})})]}),t&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Novo Objetivo"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título"}),s.jsx("input",{type:"text",value:n.title,onChange:l=>i({...n,title:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),s.jsx("textarea",{value:n.description,onChange:l=>i({...n,description:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Recompensa"}),s.jsxs("select",{value:n.rewardType,onChange:l=>i({...n,rewardType:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"points",children:"Pontos"}),s.jsx("option",{value:"discount",children:"Desconto"}),s.jsx("option",{value:"gift",children:"Brinde"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),s.jsx("input",{type:"number",value:n.rewardValue,onChange:l=>i({...n,rewardValue:Number(l.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta"}),s.jsx("input",{type:"number",value:n.target,onChange:l=>i({...n,target:Number(l.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>r(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:()=>{r(!1),i({title:"",description:"",rewardType:"points",rewardValue:0,target:100})},className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Criar Objetivo"})]})]})})]})},Wx=()=>{const{settings:e,updateSettings:t}=$t(),[r,n]=P.useState("company"),[i,a]=P.useState(e),[l,o]=P.useState(""),[c,u]=P.useState(""),d=()=>{t(i)},f=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1","#FFD700","#CD7F32","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA"],m=["Inter","Roboto","Open Sans","Lato","Montserrat","Poppins"],y=(p,j)=>{const N=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;(N.test(j)||j==="")&&(p==="primary"?(o(j),N.test(j)&&a({...i,program:{...i.program,primaryColor:j}})):(u(j),N.test(j)&&a({...i,program:{...i.program,secondaryColor:j}})))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Personalização"}),s.jsxs("button",{onClick:d,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[s.jsx(kx,{className:"w-4 h-4 mr-2"}),"Salvar Alterações"]})]}),s.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[s.jsxs("button",{onClick:()=>n("company"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors flex items-center justify-center ${r==="company"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[s.jsx(Ex,{className:"w-4 h-4 mr-2"}),"Empresa"]}),s.jsxs("button",{onClick:()=>n("program"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors flex items-center justify-center ${r==="program"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[s.jsx(jx,{className:"w-4 h-4 mr-2"}),"Programa"]}),s.jsxs("button",{onClick:()=>n("validation"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors flex items-center justify-center ${r==="validation"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[s.jsx(Cx,{className:"w-4 h-4 mr-2"}),"Validação"]}),s.jsxs("button",{onClick:()=>n("notifications"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors flex items-center justify-center ${r==="notifications"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[s.jsx(fx,{className:"w-4 h-4 mr-2"}),"Notificações"]}),s.jsxs("button",{onClick:()=>n("terms"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors flex items-center justify-center ${r==="terms"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[s.jsx(Mo,{className:"w-4 h-4 mr-2"}),"Regulamento"]})]}),r==="company"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Informações da Empresa"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Empresa"}),s.jsx("input",{type:"text",value:i.company.name,onChange:p=>a({...i,company:{...i.company,name:p.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),s.jsx("input",{type:"url",value:i.company.website,onChange:p=>a({...i,company:{...i.company,website:p.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereço"}),s.jsx("textarea",{value:i.company.address,onChange:p=>a({...i,company:{...i.company,address:p.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo da Empresa"}),s.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:s.jsxs("div",{className:"space-y-1 text-center",children:[s.jsx(sf,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsxs("div",{className:"flex text-sm text-gray-600",children:[s.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500",children:[s.jsx("span",{children:"Upload um arquivo"}),s.jsx("input",{type:"file",className:"sr-only",accept:"image/*"})]}),s.jsx("p",{className:"pl-1",children:"ou arraste e solte"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF até 10MB"})]})})]})]})]}),r==="program"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Configurações do Programa"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Programa"}),s.jsx("input",{type:"text",value:i.program.name,onChange:p=>a({...i,program:{...i.program,name:p.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pontos por Real (R$)"}),s.jsx("input",{type:"number",value:i.program.pointsPerReal,onChange:p=>a({...i,program:{...i.program,pointsPerReal:Number(p.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Mínimo de Compra (R$)"}),s.jsx("input",{type:"number",value:i.program.minPurchaseValue,onChange:p=>a({...i,program:{...i.program,minPurchaseValue:Number(p.target.value)}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fonte"}),s.jsx("select",{value:i.program.font,onChange:p=>a({...i,program:{...i.program,font:p.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:m.map(p=>s.jsx("option",{value:p,children:p},p))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Cor Primária"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Selecione uma cor da paleta:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(p=>s.jsx("button",{onClick:()=>a({...i,program:{...i.program,primaryColor:p}}),className:`w-10 h-10 rounded-lg border-2 transition-all hover:scale-110 ${i.program.primaryColor===p?"border-gray-800 shadow-lg":"border-gray-300"}`,style:{backgroundColor:p},title:p},p))})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Ou digite um código HEX personalizado:"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sm text-gray-700 mr-2",children:"#"}),s.jsx("input",{type:"text",value:l.replace("#",""),onChange:p=>y("primary","#"+p.target.value),placeholder:"3B82F6",maxLength:6,className:"w-24 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 text-sm font-mono"})]}),s.jsx("div",{className:"w-8 h-8 rounded border-2 border-gray-300",style:{backgroundColor:i.program.primaryColor}}),s.jsx("span",{className:"text-sm text-gray-600 font-mono",children:i.program.primaryColor})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Cor Secundária"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Selecione uma cor da paleta:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(p=>s.jsx("button",{onClick:()=>a({...i,program:{...i.program,secondaryColor:p}}),className:`w-10 h-10 rounded-lg border-2 transition-all hover:scale-110 ${i.program.secondaryColor===p?"border-gray-800 shadow-lg":"border-gray-300"}`,style:{backgroundColor:p},title:p},p))})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Ou digite um código HEX personalizado:"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sm text-gray-700 mr-2",children:"#"}),s.jsx("input",{type:"text",value:c.replace("#",""),onChange:p=>y("secondary","#"+p.target.value),placeholder:"10B981",maxLength:6,className:"w-24 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 text-sm font-mono"})]}),s.jsx("div",{className:"w-8 h-8 rounded border-2 border-gray-300",style:{backgroundColor:i.program.secondaryColor}}),s.jsx("span",{className:"text-sm text-gray-600 font-mono",children:i.program.secondaryColor})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Preview das Cores"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-16 rounded-lg flex items-center justify-center text-white font-medium",style:{backgroundColor:i.program.primaryColor},children:"Cor Primária"}),s.jsx("p",{className:"text-xs text-center mt-1 font-mono",children:i.program.primaryColor})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-16 rounded-lg flex items-center justify-center text-white font-medium",style:{backgroundColor:i.program.secondaryColor},children:"Cor Secundária"}),s.jsx("p",{className:"text-xs text-center mt-1 font-mono",children:i.program.secondaryColor})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"h-16 rounded-lg flex items-center justify-center text-white font-medium",style:{background:`linear-gradient(45deg, ${i.program.primaryColor}, ${i.program.secondaryColor})`},children:"Gradiente"}),s.jsx("p",{className:"text-xs text-center mt-1",children:"Combinação"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Expiração de Pontos"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"pointsExpiration",checked:i.program.pointsExpiration.enabled,onChange:p=>a({...i,program:{...i.program,pointsExpiration:{...i.program.pointsExpiration,enabled:p.target.checked}}}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"pointsExpiration",className:"ml-2 block text-sm text-gray-900",children:"Ativar expiração de pontos"})]}),i.program.pointsExpiration.enabled&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Período de Expiração (dias)"}),s.jsx("input",{type:"number",value:i.program.pointsExpiration.days,onChange:p=>a({...i,program:{...i.program,pointsExpiration:{...i.program.pointsExpiration,days:Number(p.target.value)}}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notificar antes (dias)"}),s.jsx("input",{type:"number",value:i.program.pointsExpiration.notifyDaysBefore,onChange:p=>a({...i,program:{...i.program,pointsExpiration:{...i.program.pointsExpiration,notifyDaysBefore:Number(p.target.value)}}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})]})]}),r==="validation"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Configurações de Validação"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Sistema de Chaves"}),s.jsxs("p",{className:"text-sm text-blue-700",children:[s.jsx("strong",{children:"Chave Primária:"})," CPF - Identificador único obrigatório",s.jsx("br",{}),s.jsx("strong",{children:"Chaves Secundárias:"})," Email e Telefone - Para comunicação e indicações"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Validação de CPF"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Verificar se o CPF é válido matematicamente"})]}),s.jsx("input",{type:"checkbox",checked:i.validation.requireCpfValidation,onChange:p=>a({...i,validation:{...i.validation,requireCpfValidation:p.target.checked}}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Verificação de Email"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Exigir verificação por email antes de ativar conta"})]}),s.jsx("input",{type:"checkbox",checked:i.validation.requireEmailVerification,onChange:p=>a({...i,validation:{...i.validation,requireEmailVerification:p.target.checked}}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Verificação de Telefone"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Exigir verificação por SMS antes de ativar conta"})]}),s.jsx("input",{type:"checkbox",checked:i.validation.requirePhoneVerification,onChange:p=>a({...i,validation:{...i.validation,requirePhoneVerification:p.target.checked}}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Permitir Email Duplicado"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Permitir que o mesmo email seja usado por CPFs diferentes"})]}),s.jsx("input",{type:"checkbox",checked:i.validation.allowDuplicateEmail,onChange:p=>a({...i,validation:{...i.validation,allowDuplicateEmail:p.target.checked}}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Permitir Telefone Duplicado"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Permitir que o mesmo telefone seja usado por CPFs diferentes"})]}),s.jsx("input",{type:"checkbox",checked:i.validation.allowDuplicatePhone,onChange:p=>a({...i,validation:{...i.validation,allowDuplicatePhone:p.target.checked}}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]})]}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Importante"}),s.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[s.jsx("li",{children:"• O CPF sempre será único no sistema (chave primária)"}),s.jsx("li",{children:"• Email e telefone podem ser usados para indicações mesmo se duplicados"}),s.jsx("li",{children:"• Recomendamos manter email único para melhor experiência do usuário"}),s.jsx("li",{children:"• Telefone duplicado é comum em famílias que compartilham números"})]})]})]})]}),r==="notifications"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Configurações de Notificação"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Email"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Enviar notificações por email"})]}),s.jsx("input",{type:"checkbox",checked:i.notifications.email,onChange:p=>a({...i,notifications:{...i.notifications,email:p.target.checked}}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"WhatsApp"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Enviar notificações por WhatsApp"})]}),s.jsx("input",{type:"checkbox",checked:i.notifications.whatsapp,onChange:p=>a({...i,notifications:{...i.notifications,whatsapp:p.target.checked}}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"SMS"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Enviar notificações por SMS"})]}),s.jsx("input",{type:"checkbox",checked:i.notifications.sms,onChange:p=>a({...i,notifications:{...i.notifications,sms:p.target.checked}}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]})]})]}),r==="terms"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Regulamento do Programa"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Termos e Condições"}),s.jsx("textarea",{value:i.terms,onChange:p=>a({...i,terms:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:15,placeholder:"Digite aqui os termos e condições do seu programa de fidelidade..."})]})]})]})},Gx=()=>{const{loading:e,error:t}=$t();return t?s.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl font-semibold mb-2",children:"Erro ao carregar dados"}),s.jsx("div",{className:"text-gray-600 text-sm",children:t}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Tentar Novamente"})]})}):e?s.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx(yx,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),s.jsx("div",{className:"text-gray-600 text-lg font-medium",children:"Carregando dados..."}),s.jsx("div",{className:"text-gray-500 text-sm mt-2",children:"Conectando ao banco de dados"})]})}):null};function Kx(){const[e,t]=P.useState("dashboard"),r=()=>{switch(e){case"dashboard":return s.jsx(fu,{onPageChange:t});case"customers":return s.jsx(Dx,{});case"branches":return s.jsx(Mx,{});case"levels":return s.jsx(Lx,{});case"movements":return s.jsx(Ux,{});case"rewards":return s.jsx(Bx,{});case"referrals":return s.jsx(Vx,{});case"communication":return s.jsx(qx,{});case"objectives":return s.jsx(Hx,{});case"settings":return s.jsx(Wx,{});default:return s.jsx(fu,{onPageChange:t})}};return s.jsx(cx,{children:s.jsxs(Tx,{currentPage:e,onPageChange:t,children:[s.jsx(Gx,{}),r()]})})}Sh(document.getElementById("root")).render(s.jsx(P.StrictMode,{children:s.jsx(Kx,{})}));
